; DISK-S2.MAC
;
; DOS 2.20 kernel bank 2 (ASCII version)
;
; Source re-created by Z80DIS 2.2
; Z80DIS was written by Kenneth Gielow, Palo Alto, CA
;
; Code Copyrighted by ASCII and maybe others
; Source comments by Arjen Zeilemaker
;
; Sourcecode supplied for STUDY ONLY
; Recreation NOT permitted without authorisation of the copyrightholders
;

DOS2    EQU     1               ; DOS2 flag for diskdriver


I$4003  EQU     4003H   ; ----I
I$4006  EQU     4006H   ; ----I
I$4009  EQU     4009H   ; ----I
I$400C  EQU     400CH   ; ----I
J$4022  EQU     4022H   ; J----
I$4B35  EQU     4B35H   ; ----I
I$561F  EQU     561FH   ; ----I
D$5D5B  EQU     5D5BH   ; --S--
C$9003  EQU     9003H   ; -C---
C$9C0B  EQU     9C0BH   ; -C---
J.A009  EQU     0A009H  ; J----
D$A309  EQU     0A309H  ; --S--
D.B064  EQU     0B064H  ; --SL-
I.B066  EQU     0B066H  ; ----I
I$B069  EQU     0B069H  ; ----I
D.B06C  EQU     0B06CH  ; --S-I
I.B0D0  EQU     0B0D0H  ; ----I
I.B1CF  EQU     0B1CFH  ; ----I
I.B1D0  EQU     0B1D0H  ; ----I
I$B1D1  EQU     0B1D1H  ; ----I
I$B1D2  EQU     0B1D2H  ; ----I
I.B2D4  EQU     0B2D4H  ; ----I
D.B400  EQU     0B400H  ; --SL-
I.B6D4  EQU     0B6D4H  ; ----I
I$B6F2  EQU     0B6F2H  ; ----I
D$B6FA  EQU     0B6FAH  ; --S--
D$B6FB  EQU     0B6FBH  ; --S--
D$B6FD  EQU     0B6FDH  ; ---L-
I.B8D4  EQU     0B8D4H  ; ----I
I.B8F4  EQU     0B8F4H  ; ----I
I$B901  EQU     0B901H  ; ----I
I.B910  EQU     0B910H  ; ----I
I.B91B  EQU     0B91BH  ; ----I
I.B926  EQU     0B926H  ; ----I
I$B931  EQU     0B931H  ; ----I
I$B933  EQU     0B933H  ; ----I
I$B973  EQU     0B973H  ; ----I
I.B975  EQU     0B975H  ; ----I
D.B976  EQU     0B976H  ; --SL-
D.B977  EQU     0B977H  ; --SL-
I.B99A  EQU     0B99AH  ; ----I
I.B9DA  EQU     0B9DAH  ; ----I
I$B9DB  EQU     0B9DBH  ; ----I
D$B9E8  EQU     0B9E8H  ; ---L-
D.B9EF  EQU     0B9EFH  ; ---LI
D$B9F1  EQU     0B9F1H  ; --S--
D.B9F3  EQU     0B9F3H  ; ---L-
I.B9F4  EQU     0B9F4H  ; ----I
D.B9F8  EQU     0B9F8H  ; ---L-
I.B9FA  EQU     0B9FAH  ; ----I
I.B9FF  EQU     0B9FFH  ; ----I
D.BA07  EQU     0BA07H  ; ---LI
D$BA08  EQU     0BA08H  ; ---L-
D.BA09  EQU     0BA09H  ; --S--
D$BA0B  EQU     0BA0BH  ; ---L-
I.BA1A  EQU     0BA1AH  ; ----I
I.BA23  EQU     0BA23H  ; ----I
I.BA25  EQU     0BA25H  ; ----I
D.BA33  EQU     0BA33H  ; --SL-
I.BA35  EQU     0BA35H  ; ----I
I$BA75  EQU     0BA75H  ; ----I
D.BB76  EQU     0BB76H  ; ---LI
D.BB77  EQU     0BB77H  ; --SL-
D.BB78  EQU     0BB78H  ; --SL-
D.BB7A  EQU     0BB7AH  ; --SL-
D.BB7B  EQU     0BB7BH  ; --SL-
D.BB7C  EQU     0BB7CH  ; --SL-
D.BB7D  EQU     0BB7DH  ; --SL-
D.BB7F  EQU     0BB7FH  ; --SL-
D.BB80  EQU     0BB80H  ; --SLI
D.BB82  EQU     0BB82H  ; --SL-
D.BB84  EQU     0BB84H  ; --SL-
D.BB86  EQU     0BB86H  ; --SLI
D.BB87  EQU     0BB87H  ; --S--
D$BB89  EQU     0BB89H  ; --S--
D.BB8A  EQU     0BB8AH  ; --S-I
D.BB8B  EQU     0BB8BH  ; --SL-
D.BB8D  EQU     0BB8DH  ; --SLI
D.BB8E  EQU     0BB8EH  ; --S--
D$BB8F  EQU     0BB8FH  ; --S--
D.BB90  EQU     0BB90H  ; --SL-
D.BB91  EQU     0BB91H  ; --SL-
D.BB92  EQU     0BB92H  ; ---LI
D$BB93  EQU     0BB93H  ; --S--
D.BB95  EQU     0BB95H  ; --SL-
D.BB96  EQU     0BB96H  ; --SL-
D.BB98  EQU     0BB98H  ; --SL-
D$BB99  EQU     0BB99H  ; ---L-
D.BB9A  EQU     0BB9AH  ; --SL-
D.BB9C  EQU     0BB9CH  ; ---L-
D.BB9E  EQU     0BB9EH  ; --SL-
D$BBA2  EQU     0BBA2H  ; --S--
D.BBA3  EQU     0BBA3H  ; --SL-
D.BBA5  EQU     0BBA5H  ; --S-I
D$BBA6  EQU     0BBA6H  ; --S--
D.BBA7  EQU     0BBA7H  ; --SL-
D.BBAA  EQU     0BBAAH  ; --SL-
D.BBAB  EQU     0BBABH  ; --SL-
D.BBAD  EQU     0BBADH  ; --SL-
D$BBAF  EQU     0BBAFH  ; --S--
D.BBB2  EQU     0BBB2H  ; --S--
D.BBB4  EQU     0BBB4H  ; --SL-
D.BBB6  EQU     0BBB6H  ; --SL-
D.BBB8  EQU     0BBB8H  ; --SL-
D.BBB9  EQU     0BBB9H  ; --SL-
D.BBBB  EQU     0BBBBH  ; --SL-
D.BBBC  EQU     0BBBCH  ; --SL-
D.BBBE  EQU     0BBBEH  ; --SL-
D$BBBF  EQU     0BBBFH  ; --S--
D.BBC0  EQU     0BBC0H  ; --SL-
D.BBC2  EQU     0BBC2H  ; --SL-
D.BBC4  EQU     0BBC4H  ; --SL-
I.BBC5  EQU     0BBC5H  ; ----I
I.BBC6  EQU     0BBC6H  ; ----I
I.BBD2  EQU     0BBD2H  ; ----I
D.BBDE  EQU     0BBDEH  ; --S-I
D.BBDF  EQU     0BBDFH  ; ---L-
D.BBE0  EQU     0BBE0H  ; --SL-
D.BBE1  EQU     0BBE1H  ; --SL-
D.BBE2  EQU     0BBE2H  ; --SL-
D.BBE4  EQU     0BBE4H  ; --SL-
D.BBE6  EQU     0BBE6H  ; --SL-
D.BBE8  EQU     0BBE8H  ; --SL-
D.BBEA  EQU     0BBEAH  ; --SL-
D.BBEB  EQU     0BBEBH  ; --SL-
D.BBED  EQU     0BBEDH  ; --SL-
D.BBEE  EQU     0BBEEH  ; --SLI
D.BBF0  EQU     0BBF0H  ; --SL-
D.BBF2  EQU     0BBF2H  ; --S-I
D.BBF4  EQU     0BBF4H  ; --SL-
I$BBF5  EQU     0BBF5H  ; ----I
D.BBF6  EQU     0BBF6H  ; --SL-
D.BBF8  EQU     0BBF8H  ; --SLI
I.BBFA  EQU     0BBFAH  ; ----I
D.BBFB  EQU     0BBFBH  ; ---LI
D$BBFD  EQU     0BBFDH  ; --S--
D.BBFE  EQU     0BBFEH  ; --SLI
I$BC00  EQU     0BC00H  ; ----I
D.BE00  EQU     0BE00H  ; --SLI
I.BE02  EQU     0BE02H  ; ----I
J$C037  EQU     0C037H  ; J----
D$C06A  EQU     0C06AH  ; ---L-
D$C072  EQU     0C072H  ; --S--
I$C085  EQU     0C085H  ; ----I
I.C0AB  EQU     0C0ABH  ; ----I
D$C0B9  EQU     0C0B9H  ; --S--
J$C1D1  EQU     0C1D1H  ; J----
J$C206  EQU     0C206H  ; J----
I$C83E  EQU     0C83EH  ; ----I
C$E40B  EQU     0E40BH  ; -C---
C.F1D6  EQU     0F1D6H  ; -C---
C$F1D9  EQU     0F1D9H  ; -C---
C.F1DC  EQU     0F1DCH  ; -C---
C$F1DF  EQU     0F1DFH  ; -C---
J$F1E5  EQU     0F1E5H  ; J----
J$F1E8  EQU     0F1E8H  ; J----
J$F1EB  EQU     0F1EBH  ; J----
J$F1EE  EQU     0F1EEH  ; J----
J$F1F1  EQU     0F1F1H  ; J----
J$F1F4  EQU     0F1F4H  ; J----
I$F1F7  EQU     0F1F7H  ; ----I
J$F1FA  EQU     0F1FAH  ; J----
CF206   EQU     0F206H
CF209   EQU     0F209H
CF224   EQU     0F224H
D.F23C  EQU     0F23CH  ; --SL-
D.F23D  EQU     0F23DH  ; --SL-
C$F252  EQU     0F252H  ; -C---
C$F255  EQU     0F255H  ; -C---
C$F258  EQU     0F258H  ; -C---
C$F25B  EQU     0F25BH  ; -C---
C$F25E  EQU     0F25EH  ; -C---
C$F261  EQU     0F261H  ; -C---
C$F264  EQU     0F264H  ; -C---
C$F267  EQU     0F267H  ; -C---
C$F26A  EQU     0F26AH  ; -C---
D$F2BA  EQU     0F2BAH  ; ---L-
D$F2BC  EQU     0F2BCH  ; ---L-
D.F2BD  EQU     0F2BDH  ; --S-I
D.F2BE  EQU     0F2BEH  ; --SL-
I$F2BF  EQU     0F2BFH  ; ----I
I$F2C7  EQU     0F2C7H  ; ----I
I$F2CB  EQU     0F2CBH  ; ----I
D$F2CD  EQU     0F2CDH  ; ---L-
D.F2CF  EQU     0F2CFH  ; ---L-
D$F2DA  EQU     0F2DAH  ; ---L-
D.F2EC  EQU     0F2ECH  ; --SL-
D$F300  EQU     0F300H  ; ---L-
D$F302  EQU     0F302H  ; ---L-
D.F30D  EQU     0F30DH  ; --SL-
I$F30F  EQU     0F30FH  ; ----I
D.F33F  EQU     0F33FH  ; --SL-
D.F344  EQU     0F344H  ; ---L-
D.F347  EQU     0F347H  ; ---L-
D$F348  EQU     0F348H  ; ---L-
D.F34D  EQU     0F34DH  ; --SL-
I$F353  EQU     0F353H  ; ----I
I$F355  EQU     0F355H  ; ----I
I$F371  EQU     0F371H  ; ----I
I$F374  EQU     0F374H  ; ----I
C.F37D  EQU     0F37DH  ; -C---

LINLEN  EQU     0F3B0H
CRTCNT  EQU     0F3B1H
CNSDFG  EQU     0F3DEH
KBUF    EQU     0F41FH
DRVTBL  EQU     0FB21H                  ; diskdriver table
INTFLG  EQU     0FC9BH
ESCCNT  EQU     0FCA7H
EXPTBL  EQU     0FCC1H
DFFFF   EQU     0FFFFH

        .Z80
        ASEG
        ORG     04100H

        .PHASE  0

        JP      J$0095

        DEFS    00005H-$,0

BDOS:   JP      J$026D

        DEFS    0000CH-$,0

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.000C: JP      J$F1E8

        DEFS    00014H-$,0

        JP      J$F1EB

        DEFS    0001CH-$,0

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$001C: JP      J$F1EE

        DEFS    00024H-$,0

        JP      J$F1F1

        DEFS    00028H-$,0

        JP      J$C206

        DEFS    00030H-$,0

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0030: JP      J$F1F4

        DEFS    00038H-$,0

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0038: JP      J$F1E5

C003B:  OUT     (0A8H),A
        LD      A,(DFFFF)
I$003F  EQU     $-1
I.0040: CPL
        LD      L,A
        AND     H
        OR      D
        JR      J.004E

C0046:  OUT     (0A8H),A
        LD      A,L
        JR      J.004E

C004B:  OUT     (0A8H),A
        LD      A,E
J.004E: LD      (DFFFF),A
        LD      A,B
        OUT     (0A8H),A
        RET

        DEFS    0005CH-$,0

C005C:  JP      C.11A6
C005F:  JP      C.1256

        DEFS    00080H-$,0

C0080:  JP      C.0A2D
C0083:  JP      J$0A6B
C0086:  JP      C.0A42
C0089:  JP      C.0B25
C008C:  JP      C.0B37
C008F:  JP      J$0B50
C0092:  JP      C.0B46

;         Subroutine initialize BDOS
;            Inputs  ________________________
;            Outputs ________________________

J$0095: LD      IY,D.BB80
I$0099: LD      DE,I$F353
I$009C: LD      A,(D$F348)
I$009F: LD      C,A
        LD      L,80H
I$00A2: LD      B,01H   ; 1 
        CALL    C.017E
I$00A5  EQU     $-2
        JR      NZ,J.00D8
I$00A8  EQU     $-1
        LD      HL,DRVTBL
        LD      DE,I$F355
        LD      B,04H   ; 4 
J$00B1: LD      A,(HL)
        INC     HL
        LD      C,(HL)
        INC     HL
        OR      A
        PUSH    HL
        PUSH    BC
        LD      B,A
        LD      L,10H   ; 16 
        CALL    NZ,C.017E
        POP     BC
        POP     HL
        JR      NZ,J.00D8
        DJNZ    J$00B1
        LD      D,B
        CALL    C0E8B
        LD      HL,I012C
J$00CB: LD      A,(HL)
        OR      A
        JR      Z,J.0101
        INC     HL
        PUSH    HL
        LD      HL,I.002B
        CALL    C.01CB
        POP     DE
J.00D8: JR      NZ,J$012A
        LD      BC,(D.BBF4)
        LD      (D.BBF4),HL
        LD      (HL),C
        INC     HL
        LD      (HL),B
        INC     HL
        EX      DE,HL
        LDI
        LDI
        EX      DE,HL
        LD      BC,6
        ADD     HL,BC
        EX      DE,HL
        LD      BC,12
        LDIR
        LD      A,80H
        LD      (DE),A
        LD      B,14H   ; 20 
        XOR     A
J$00FB: INC     DE
        LD      (DE),A
        DJNZ    J$00FB
I.00FF: JR      J$00CB
J.0100  EQU     $-1
J.0101: LD      B,05H   ; 5 
        CALL    C0E44
        LD      B,00H
        CALL    C2066
        CALL    C.0E35
        CALL    C$0384
        LD      HL,I0178
        LD      DE,I.B066
        LD      BC,6
        LDIR
        LD      A,01H   ; 1 
        LD      (D.F2BD),A
        LD      (IY+16),0FFH
        CALL    C$10CA
        OR      A
        RET
J$012A: SCF
        RET

I012C:	DEFB	0FFH
        DEFW	I0932
        DEFB	0A3H			; device, ascii mode, console input device, console output device
        DEFB	"CON        "

        DEFB	0FFH
        DEFW	I09E2
        DEFB	0A0H			; device, ascii mode
        DEFB	"LST        "

        DEFB	0FFH
        DEFW	I09E2
        DEFB	0A0H			; device, ascii mode
        DEFB	"PRN        "

        DEFB	0FFH
        DEFW	I0A03
        DEFB	0A0H			; device, ascii mode
        DEFB	"NUL        "

        DEFB	0FFH
        DEFW	I09BF
        DEFB	0A0H			; device, ascii mode
        DEFB	"AUX        "

        DEFB	0


I0178:	DEFB	27,"y5"
        DEFB	27,"x5"

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.017E: XOR     A
J$017F: EX      AF,AF'
        PUSH    HL
        LD      HL,I$0060
J$0182  EQU     $-2
J$0184: CALL    C.01CB
J$0186  EQU     $-1
        JR      NZ,J$01C9
J$0188  EQU     $-1
        EX      DE,HL
        PUSH    DE
        POP     IX
        PUSH    BC
        LD      C,(HL)
        INC     HL
        LD      B,(HL)
J$0191: INC     HL
        PUSH    HL
J$0193: LD      (IX+2),C
J$0195  EQU     $-1
        LD      (IX+3),B
J$0197  EQU     $-2
        LD      A,(BC)
        INC     A
        LD      (IX+8),A
        LD      L,A
        LD      H,00H
        INC     BC
        LD      A,(BC)
        LD      (IX+29),A
        LD      BC,D.BBFB
        JR      Z,J$01AE
        LD      BC,I.BA23
J$01AE: ADD     HL,HL
        ADD     HL,BC
        LD      (HL),E
        INC     HL
        LD      (HL),D
        POP     DE
        POP     BC
        POP     HL
        LD      (IX),C
        LD      (IX+1),L
        EX      AF,AF'
        LD      (IX+6),A
        INC     A
        LD      (IX+31),0FFH
        DJNZ    J$017F
        XOR     A
        RET
J$01C9: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.01CB: PUSH    DE
        PUSH    BC
        INC     HL
        RES     0,L
        LD      B,H
        LD      C,L
        LD      HL,(D.B064)
J$01D5: LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      A,D
        OR      E
        JR      Z,J$0203
        BIT     0,E
        JR      NZ,J$01E8
        EX      DE,HL
        SBC     HL,BC
        JR      NC,J$01ED
        ADD     HL,BC
        EX      DE,HL
J$01E8: RES     0,E
        ADD     HL,DE
        JR      J$01D5
J$01ED: EX      DE,HL
        DEC     HL
        DEC     HL
        JR      Z,J.0217
        DEC     DE
        DEC     DE
        LD      A,D
        OR      E
        JR      Z,J.01FF
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        ADD     HL,DE
        JR      J.0217
J.01FF: INC     BC
I.0200: INC     BC
        JR      J.0217
J$0203: LD      A,0DEH
        INC     BC
I$0206: INC     BC
I$0207: LD      HL,(D.B064)
        OR      A
I$020B: SBC     HL,BC
        JR      C,J.0227
        JP      P,J.0227
        LD      (D.B064),HL
        DEC     BC
        DEC     BC
J.0217: LD      (HL),C
        SET     0,(HL)
        INC     HL
        LD      (HL),B
        INC     HL
        PUSH    HL
J$021E: LD      (HL),00H
        INC     HL
        DEC     BC
        LD      A,B
        OR      C
        JR      NZ,J$021E
        POP     HL
J.0227: POP     BC
        POP     DE
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.022B: DEC     HL
        DEC     HL
        RES     0,(HL)
        PUSH    DE
        PUSH    BC
        LD      HL,(D.B064)
J$0234: LD      C,(HL)
        BIT     0,C
        JR      NZ,J$023F
        INC     HL
        LD      B,(HL)
        INC     HL
        ADD     HL,BC
        JR      J$0234
I$023E  EQU     $-1
J$023F: LD      (D.B064),HL
J$0242: LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      A,D
        OR      E
        JR      Z,J$026A
        BIT     0,E
        JR      NZ,J$0265
J$024E: PUSH    HL
        ADD     HL,DE
        LD      C,(HL)
        INC     HL
        LD      B,(HL)
        POP     HL
        BIT     0,C
        JR      NZ,J$025F
        INC     BC
        INC     BC
        EX      DE,HL
        ADD     HL,BC
        EX      DE,HL
        JR      J$024E
J$025F: DEC     HL
        LD      (HL),D
        DEC     HL
        LD      (HL),E
        INC     HL
        INC     HL
J$0265: RES     0,E
        ADD     HL,DE
        JR      J$0242
J$026A: POP     BC
        POP     DE
        RET

;         Subroutine BDOS handler
;            Inputs  ________________________
;            Outputs ________________________

J$026D: EI
        CALL    C$F252
        CALL    C$0278
        LD      (D$BBFD),A
J$0277: RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$0278: PUSH    HL
        PUSH    BC
        EX      AF,AF'
        LD      A,(D.F2BE)
        DEC     A
        CALL    Z,C.0AB9
        LD      A,C
        CP      71H     ; "q"
        JR      C,J$0289
        LD      C,09H   ; 9 
J$0289: EX      AF,AF'
        LD      B,00H
        LD      HL,I$02A2
        ADD     HL,BC
        ADD     HL,BC
        LD      C,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,C
        LD      IY,D.BB80
J$0299: POP     BC
        EX      (SP),HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C029C:  LD      A,0DCH
J$029E: LD      HL,C.0000
        RET

I$02A2: DEFW	C0CFB,C03A8,C03B6,C042E,C043D,C0441,C03D4,C03FE
        DEFW	C03BE,C029C,C0456,C03CD,C0B90,C0B95,C0BAB,C374B
        DEFW	C378F,C37A9,C37C3,C38C0,C3826,C386D,C38A8,C38ED
        DEFW	C0BC6,C0BDC,C0BE4,C0BEC,C029C,C029C,C029C,C029C
        DEFW	C029C,C392D,C3941,C395B,C3994,C029C,C3D19,C3D15
        DEFW	C3943,C029C,C1024,C1059,C10A3,C10AD,C0C48,C2558
        DEFW	C255B,C0C50,C029C,C029C,C029C,C029C,C029C,C029C
        DEFW	C029C,C029C,C029C,C029C,C029C,C029C,C029C,C029C
        DEFW	C18BC,C196F,C18C0,C1D9C,C1D8A,C1DE1,C1DEE,C1DFE
        DEFW	C1E13,C1E23,C1E33,C1E77,C2003,C1F0A,C1F31,C1F56
        DEFW	C1F7B,C1FB4,C1F14,C1F3B,C1F60,C1F93,C1FD6,C0CCF
        DEFW	C0CD5,C182D,C1843,C1863,C1878,C188A,C1893,C0CE0
        DEFW	C201F,C2066,C0CFD,C029C,C029C,C0D05,C0D0A,C0D39
        DEFW	C0D93,C0E44,C0E8B,C0EDE,C0EFF,C0F55,C0EB6,C0EC8
        DEFW	C0ED2

C$0384: LD	HL,IB0D0
        LD      (D.BB82),HL
        LD      (D.BB80),HL
        LD      DE,I.B1D0
        EX      DE,HL
        OR      A
        SBC     HL,DE
J$0394: EX      DE,HL
J$0395: LD      (HL),0DH        ; 13 
        INC     HL
        DEC     DE
        LD      A,D
J$039A: OR      E
        JR      NZ,J$0395
        LD      (D.BB7F),A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$03A0: XOR     A
        LD      (D.BB8D),A
        LD      (D.BB8A),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C03A8:  CALL    C03BE
        PUSH    HL
        LD      A,L
        CALL    C.085A
        CALL    NC,C.0871
        POP     HL
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C03B6:  LD      A,E
        CALL    C.086C
        XOR     A
        LD      H,A
J$03BC: LD      L,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C03BE:  BIT     0,(IY+9)
        LD      C,0FFH
        JR      NZ,C.0414
        CALL    C.08B2
        LD      L,A
        XOR     A
J$03CB: LD      H,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C03CD:  CALL    C.0897
        LD      L,A
        XOR     A
        LD      H,A
J$03D3: RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C03D4:  LD      A,E
        INC     A
        JR      Z,J$03E8
        BIT     1,(IY+9)
        LD      A,E
        LD      C,00H
        JR      NZ,J.042A
        CALL    C.0A6C
        XOR     A
        LD      H,A
        LD      L,A
        RET
J$03E8: BIT     0,(IY+9)
        LD      C,00H
        JR      NZ,C.0414
        LD      HL,D.BB8D
        CP      (HL)
        JR      NZ,J.0406
        CALL    C.0A42
        JR      NZ,J.0406
        LD      L,A
        LD      H,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C03FE:  BIT     0,(IY+9)
I$0400  EQU     $-2
        LD      C,00H
I$0404: JR      NZ,C.0414
J.0406: LD      A,(D.BB8D)
        OR      A
        CALL    Z,C.0A2D
        LD      L,A
        XOR     A
        LD      H,A
        LD      (D.BB8D),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0414: LD      B,00H
        PUSH    BC
        CALL    C.1D47
        POP     DE
        OR      A
        JR      NZ,J.0439
        OR      E
        JR      Z,J$0426
J$0421: LD      A,B
        SUB     03H     ; 3 
        JR      Z,J.0439
J$0426: LD      L,B
        XOR     A
        LD      H,A
        RET
J.042A: LD      B,01H   ; 1 
        JR      J$0446

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C042E:  LD      B,03H   ; 3 
        LD      C,0FFH
        CALL    C.1D47
        OR      A
        LD      L,B
        LD      H,A
        RET     Z
J.0439: LD      C,9BH
        JR      J$044F

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C043D:  LD      B,03H   ; 3 
        JR      J$0443

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0441:  LD      B,04H   ; 4 
J$0443: LD      C,0FFH
        LD      A,E
J$0446: CALL    C$1D22
        OR      A
        LD      L,A
        LD      H,A
        RET     Z
        LD      C,9CH
J$044F: LD      B,A
        LD      A,C
        CALL    C.3723
J$0454: JR      J$0454

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0456:  PUSH    DE
        BIT     0,(IY+9)
        JR      NZ,J$0463
        XOR     A
        CALL    C.04B1
        JR      J$049E
J$0463: EX      DE,HL
        LD      B,(HL)
        LD      C,00H
        INC     HL
        PUSH    HL
J.0469: PUSH    HL
        PUSH    BC
        LD      C,0FFH
        CALL    C.0414
        LD      A,L
        POP     BC
        POP     HL
        OR      A
        JR      Z,J.0469
        CP      0AH     ; 10 
        JR      Z,J.0469
        CP      0DH     ; 13 
        JR      Z,J$0499
        LD      E,A
        LD      A,B
        CP      C
        JR      Z,J$048E
        INC     C
        INC     HL
        LD      (HL),E
        LD      A,E
        PUSH    HL
        PUSH    BC
        CALL    C.086C
        JR      J$0495
J$048E: PUSH    HL
        PUSH    BC
        LD      A,07H   ; 7 
        CALL    C.0A6C
J$0495: POP     BC
        POP     HL
        JR      J.0469
J$0499: POP     HL
        LD      (HL),C
        CALL    C.086C
J$049E: POP     HL
        PUSH    HL
        LD      A,(HL)
        INC     HL
        CP      (HL)
        JR      Z,J$04AC
        LD      E,(HL)
        LD      D,00H
        ADD     HL,DE
        INC     HL
        LD      (HL),0DH        ; 13 
J$04AC: POP     DE
        XOR     A
        LD      L,A
        LD      H,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.04B1: LD      (D.BB7A),A
        INC     DE
        XOR     A
        LD      (DE),A
        DEC     DE
        LD      (D.BB7C),A
J.04BB: PUSH    DE
        CALL    C$058B
        POP     DE
        DEC     A
        JR      Z,J$050C
        DEC     A
        JR      Z,J$052A
        INC     DE
        LD      A,(DE)
        OR      A
        RET     Z
        LD      B,A
        LD      (D.BB7F),A
        LD      A,(D.BB7C)
        OR      A
        JR      Z,J$04EA
        PUSH    DE
        PUSH    BC
        LD      HL,(D.BB82)
J$04D9: INC     DE
        LD      A,(DE)
        CP      (HL)
        JR      NZ,J$04E6
        CALL    C.0567
        DJNZ    J$04D9
        LD      A,(HL)
        CP      0DH     ; 13 
J$04E6: POP     BC
        POP     DE
        JR      Z,J$04FE
J$04EA: LD      HL,(D.BB80)
J$04ED: INC     DE
        LD      A,(DE)
        LD      (HL),A
        CALL    C.0567
        DJNZ    J$04ED
        LD      A,(HL)
        LD      (HL),0DH        ; 13 
        CALL    C.0567
        LD      (D.BB80),HL
J$04FE: LD      (D.BB82),HL
J$0501: CP      0DH     ; 13 
        RET     Z
        LD      A,(HL)
        LD      (HL),0DH        ; 13 
        CALL    C.0567
        JR      J$0501
J$050C: LD      A,(D.BB7F)
        OR      A
        JR      Z,J.04BB
        LD      HL,(D.BB82)
J$0515: CALL    C.0579
        LD      A,(HL)
        CP      0DH     ; 13 
        JR      Z,J$0515
J$051D: CALL    C.0579
        LD      A,(HL)
J$0521: CP      0DH     ; 13 
        JR      NZ,J$051D
        CALL    C.0567
        JR      J$0544
J$052A: LD      A,(D.BB7F)
        OR      A
        JR      Z,J.04BB
        LD      HL,(D.BB82)
J$0533: LD      A,(HL)
        CP      0DH     ; 13 
        CALL    C.0567
        JR      NZ,J$0533
        SCF
J$053C: CALL    NC,C.0567
        LD      A,(HL)
        CP      0DH     ; 13 
        JR      Z,J$053C
J$0544: LD      (D.BB82),HL
        PUSH    DE
        LD      A,(DE)
        LD      B,A
        INC     DE
        INC     DE
        LD      C,0FFH
J$054E: LD      A,(HL)
        LD      (DE),A
        INC     C
        CALL    C.0567
        CP      0DH     ; 13 
        INC     DE
        JR      Z,J$055C
        DJNZ    J$054E
        INC     C
J$055C: POP     DE
        INC     DE
        LD      A,C
        LD      (DE),A
        DEC     DE
        LD      (D.BB7C),A
        JP      J.04BB

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0567: PUSH    AF
        PUSH    DE
        LD      DE,I.B1CF
        OR      A
        SBC     HL,DE
        ADD     HL,DE
        INC     HL
        JR      NZ,J$0576
        LD      HL,I.B0D0
J$0576: POP     DE
        POP     AF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0579: PUSH    AF
        PUSH    DE
        LD      DE,I.B0D0
        OR      A
        SBC     HL,DE
        ADD     HL,DE
        DEC     HL
        JR      NZ,J$0588
        LD      HL,I.B1CF
J$0588: POP     DE
        POP     AF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$058B: LD      HL,(D.BB8B)
        LD      (D.BB87),HL
        LD      (D.BB7D),HL
        EX      DE,HL
J$0595: LD      C,(HL)
        INC     HL
        LD      (D.BB84),HL
        LD      A,(HL)
        OR      A
        LD      B,A
        JR      Z,J$05A5
        INC     HL
        CALL    C.0811
        DEC     HL
        LD      A,B
J$05A5: LD      (D.BB86),A
        XOR     A
        CALL    C.06BC
I$05AC: LD      DE,I$05AC
        PUSH    DE
        PUSH    HL
        LD      HL,D.BB86
        LD      A,(HL)
        CP      B
        JR      NC,J$05B9
        LD      (HL),B
J$05B9: POP     HL
        CALL    C.08B2
        OR      A
        RET     Z
        CP      0AH     ; 10 
        RET     Z
        CP      0DH     ; 13 
        JP      Z,J$07A8
        CP      1DH
        JP      Z,J$06F9
        CP      1CH
        JP      Z,J$06DB
        CP      7FH
        JP      Z,J$0748
        CP      08H     ; 8 
        JP      Z,J$0741
        CP      12H     ; 18 
        JP      Z,J$06B8
        CP      1BH
        JR      Z,J.05EA
        CP      18H
        JR      Z,J.05EA
        CP      15H
J.05EA: JP      Z,J$07A1
        CP      1EH
        JP      Z,J$07BF
        CP      1FH
        JP      Z,J$07C6
        CP      0BH     ; 11 
        JP      Z,J$06F2
        LD      E,A
        LD      A,(D.BB7B)
        OR      A
        JP      NZ,J$0653
        LD      A,(D.BB86)
        CP      B
        JR      Z,J$063F
        INC     HL
        LD      A,E
        CALL    C.17D6
        JR      NC,J$062E
        LD      A,(D.BB86)
        DEC     A
        CP      B
        JR      NZ,J$0623
        INC     A
        CP      C
        DEC     HL
        JP      NC,J.06AB
        INC     HL
        INC     A
        LD      (D.BB86),A
J.0621  EQU     $-2
J$0623: LD      A,(HL)
        CALL    C.17D6
        INC     HL
        CALL    NC,C.07CD
        DEC     HL
        JR      J$0678
J$062E: CALL    C.07CD
        JR      C,J.06A3
        LD      A,(HL)
        CP      20H     ; " "
        JR      C,J.06A3
        LD      A,E
        CP      20H     ; " "
        JR      C,J.06A3
        JR      J$0649
J$063F: CP      C
        JR      NC,J.06AE
        LD      A,E
        CALL    C.17D6
        JR      C,J$0659
        INC     HL
J$0649: LD      (HL),E
        LD      A,E
        INC     B
        CALL    C.0836
        CALL    C.0821
        RET
J$0653: LD      A,E
        CALL    C.17D6
        JR      NC,J$0687
J$0659: LD      A,(D.BB86)
        INC     A
        CP      C
        JR      NC,J.06AB
        INC     A
        LD      (D.BB86),A
        DEC     A
        DEC     A
        SUB     B
        JR      Z,J$0677
        PUSH    DE
        PUSH    BC
        LD      C,A
        LD      B,00H
        ADD     HL,BC
        LD      D,H
        LD      E,L
        INC     DE
        INC     DE
        LDDR
        POP     BC
        POP     DE
J$0677: INC     HL
J$0678: LD      (HL),E
        INC     HL
        CALL    C.08B2
        LD      (HL),A
        DEC     HL
        CALL    C.07DC
        INC     B
        INC     B
        JP      C.06FD
J$0687: LD      A,(D.BB86)
        CP      C
        JR      NC,J.06AE
        INC     A
        LD      (D.BB86),A
        DEC     A
        SUB     B
        JR      Z,J$06A2
        PUSH    DE
        PUSH    BC
        LD      C,A
        LD      B,00H
        ADD     HL,BC
        LD      D,H
        LD      E,L
        INC     DE
        LDDR
        POP     BC
        POP     DE
J$06A2: INC     HL
J.06A3: LD      (HL),E
        CALL    C.07DC
        INC     B
        JP      C.06FD
J.06AB: CALL    C.08B2
J.06AE: LD      A,07H   ; 7 
        PUSH    BC
        PUSH    HL
        CALL    C.0A6C
        POP     HL
        POP     BC
        RET
J$06B8: LD      A,(D.BB7B)
        CPL

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.06BC: LD      (D.BB7B),A
        OR      A
        LD      A,79H   ; "y"
        JR      NZ,J$06C5
        DEC     A
J$06C5: PUSH    BC
        PUSH    HL
        PUSH    DE
        PUSH    AF
        LD      A,1BH
        CALL    C.0A6C
        POP     AF
        CALL    C.0A6C
        LD      A,34H   ; "4"
        CALL    C.0A6C
        POP     DE
        POP     HL
        POP     BC
        RET
J$06DB: LD      A,(D.BB86)
        CP      B
        RET     Z
        INC     HL
        INC     B
        LD      A,(HL)
        CALL    C.17D6
        JP      NC,C.0836
        CALL    C.0836
        INC     HL
        INC     B
        LD      A,(HL)
        JP      C.0836
J$06F2: LD      A,B
        OR      A
        RET     Z
        LD      B,00H
        JR      C.06FD
J$06F9: LD      A,B
        OR      A
        RET     Z
        DEC     B

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.06FD: LD      HL,(D.BB84)
        LD      DE,(D.BB87)
        PUSH    BC
        INC     B
        JR      J$0729
J$0708: INC     HL
        LD      A,(HL)
        CALL    C.17D6
        JR      NC,J$0719
        INC     HL
        DJNZ    J$0727
        DEC     HL
        DEC     HL
        POP     BC
        DEC     B
        PUSH    BC
        JR      J$072B
J$0719: CP      09H     ; 9 
        JR      NZ,J$0723
        LD      A,E
        OR      07H     ; 7 
        LD      E,A
        JR      J.0728
J$0723: CP      20H     ; " "
        JR      NC,J.0728
J$0727: INC     DE
J.0728: INC     DE
J$0729: DJNZ    J$0708
J$072B: PUSH    HL
        LD      HL,(D.BB8B)
        OR      A
        SBC     HL,DE
        JR      Z,J$073E
J$0734: LD      A,08H   ; 8 
        CALL    C.0836
        DEC     HL
        LD      A,H
        OR      L
        JR      NZ,J$0734
J$073E: POP     HL
        POP     BC
        RET
J$0741: LD      A,B
        OR      A
        RET     Z
        DEC     B
        CALL    C.06FD
J$0748: LD      A,(D.BB86)
        CP      B
        RET     Z
        DEC     A
        LD      (D.BB86),A
        SUB     B
        JR      Z,J.0784
        LD      E,A
        INC     HL
        LD      A,(HL)
        DEC     HL
        CALL    C.17D6
        LD      A,E
        JR      NC,J$0777
        PUSH    HL
        LD      HL,D.BB86
        DEC     (HL)
        POP     HL
        DEC     A
        JR      Z,J.0784
        PUSH    BC
        PUSH    HL
        LD      C,A
        LD      B,00H
        INC     HL
        LD      D,H
        LD      E,L
        INC     HL
        INC     HL
        LDIR
        POP     HL
        POP     BC
        JR      J.0784
J$0777: PUSH    BC
        PUSH    HL
        LD      C,A
        LD      B,00H
        INC     HL
        LD      D,H
        LD      E,L
        INC     HL
        LDIR
        POP     HL
        POP     BC
J.0784: INC     HL
        CALL    C.07DC
        DEC     HL
        JP      C.06FD

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.078C: XOR     A
        CP      B
        LD      B,A
        CALL    NZ,C.06FD
        CALL    C$07D7
        LD      B,00H
        CALL    C.06FD
        LD      HL,(D.BB84)
        LD      (HL),00H
        DEC     HL
        RET
J$07A1: CALL    C.078C
        POP     DE
        JP      J$0595
J$07A8: INC     HL
        CALL    C.07DC
        LD      HL,(D.BB84)
        LD      A,(D.BB86)
        LD      (HL),A
        XOR     A
        CALL    C.06BC
        LD      A,0DH   ; 13 
        CALL    C.0836
I$07BC: POP     HL
        XOR     A
        RET
J$07BF: POP     HL
        CALL    C.078C
        LD      A,01H   ; 1 
        RET
J$07C6: POP     HL
        CALL    C.078C
        LD      A,02H   ; 2 
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.07CD: LD      A,(HL)
        CALL    C.17D6
        RET     NC
        INC     HL
        LD      (HL),20H        ; " "
        DEC     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$07D7: PUSH    BC
        PUSH    DE
        PUSH    HL
        JR      J$07E7

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.07DC: PUSH    BC
        PUSH    DE
        PUSH    HL
        LD      A,(D.BB86)
        SUB     B
        LD      B,A
        CALL    C.0811
J$07E7: LD      DE,(D.BB8B)
        LD      HL,(D.BB7D)
        OR      A
        SBC     HL,DE
        JR      Z,J.0803
        JR      C,J.0803
J$07F5: LD      A,20H   ; " "
        CALL    C.0836
        DEC     HL
        LD      A,H
        OR      L
        JR      NZ,J$07F5
        LD      (D.BB7D),DE
I.0800  EQU     $-3
J.0803: LD      A,1BH
        CALL    C.0A6C
        LD      A,4BH   ; "K"
        CALL    C.0A6C
        POP     HL
        POP     DE
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0811: PUSH    BC
        INC     B
        JR      J$081D
J$0815: LD      A,(HL)
        CALL    C.0836
        CALL    C.0821
        INC     HL
J$081D: DJNZ    J$0815
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0821: PUSH    HL
        PUSH    BC
        LD      HL,(D.BB7D)
        LD      BC,(D.BB8B)
        OR      A
        SBC     HL,BC
        JR      NC,J$0833
        LD      (D.BB7D),BC
J$0833: POP     BC
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0836: PUSH    BC
        PUSH    DE
        PUSH    HL
        CALL    C.085A
        JR      NC,J$0847
        PUSH    AF
        LD      A,5EH   ; "^"
        CALL    C.084E
        POP     AF
        ADD     A,40H   ; "@"
J$0847: CALL    C.084E
        POP     HL
        POP     DE
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.084E: LD      B,A
        LD      A,(D.BB7A)
        OR      A
        LD      A,B
        JP      Z,C.0871
        JP      C.08EE

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.085A: CP      0DH     ; 13 
        RET     Z
        CP      0AH     ; 10 
        RET     Z
        CP      09H     ; 9 
        RET     Z
        CP      08H     ; 8 
        RET     Z
        CP      7FH
        RET     Z
        CP      20H     ; " "
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.086C: PUSH    AF
        CALL    C.0897
        POP     AF

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0871: CP      09H     ; 9 
        JR      NZ,C.0882
J$0875: LD      A,20H   ; " "
        CALL    C.0882
        LD      A,(D.BB8B)
        AND     07H     ; 7 
        JR      NZ,J$0875
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0882: LD      HL,(D.BB8B)
        CALL    C.0915
        LD      (D.BB8B),HL
        BIT     1,(IY+9)
        JP      Z,J$0908
        LD      C,0FFH
        JP      J.042A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0897: CALL    C.0A42
        LD      B,A
        LD      A,(D.BB8D)
        OR      A
        JR      NZ,J$08AF
        LD      A,B
        OR      A
        RET     Z
        CALL    C.0A2D
        CALL    C.08C5
        OR      A
        RET     Z
        LD      (D.BB8D),A
J$08AF: XOR     A
        DEC     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.08B2: LD      A,(D.BB8D)
        LD      (IY+13),00H
        OR      A
        RET     NZ
J$08BB: CALL    C.0A2D
        CALL    C.08C5
        OR      A
        JR      Z,J$08BB
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.08C5: CP      10H     ; 16 
        JR      Z,J$08E5
        CP      0EH     ; 14 
        JR      Z,J$08E8
        CP      03H     ; 3 
        JR      Z,J$08DC
        CP      13H     ; 19 
        RET     NZ
        CALL    C.0A2D
        CP      03H     ; 3 
        LD      A,00H
        RET     NZ
J$08DC: LD      A,9EH
        LD      B,00H
        CALL    C.3723
J$08E3: JR      J$08E3

J$08E5: LD      A,0FFH
        DEFB	0FEH
J$08E8: XOR     A
        LD      (D.BB8A),A
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.08EE: CP      09H     ; 9 
        JR      NZ,C.08FF
J$08F2: LD      A,20H   ; " "
        CALL    C.08FF
        LD      A,(D.BB8B)
        AND     07H     ; 7 
        JR      NZ,J$08F2
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.08FF: LD      HL,(D.BB8B)
        CALL    C.0915
        LD      (D.BB8B),HL
J$0908: CALL    C.0A6C
        LD      HL,D.BB8A
        BIT     0,(HL)
        RET     Z
        LD      E,A
        JP      C0441

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0915: INC     HL
        CP      7FH
        JR      Z,J$091D
        CP      20H     ; " "
        RET     NC
J$091D: DEC     HL
        LD      B,A
        LD      A,H
        OR      L
        LD      A,B
        RET     Z
        DEC     HL
        CP      08H     ; 8 
        RET     Z
        CP      7FH
        RET     Z
        INC     HL
        CP      0DH     ; 13 
        RET     NZ
        LD      HL,C.0000
        RET

I0932:  JP      J$0941
        JP      J$098E
        JP      J$09A1
        JP      J.0A1C
        JP      J$09B1

J$0941: BIT     5,C
        JR      NZ,J$094B
        CALL    C.0A2D
        LD      B,A
        XOR     A
        RET
J$094B: LD      HL,(D.BB78)
        LD      A,(HL)
        OR      A
        JR      NZ,J$0979
        LD      DE,I.B1D0
        LD      A,0FFH
        LD      (DE),A
        LD      A,0FFH
        CALL    C.04B1
        LD      A,0AH   ; 10 
        CALL    C.08EE
        LD      HL,I$B1D1
        LD      E,(HL)
        LD      D,00H
        INC     HL
        EX      DE,HL
        ADD     HL,DE
        LD      (HL),0DH        ; 13 
        INC     HL
        LD      (HL),0AH        ; 10 
        INC     HL
        LD      (HL),00H
        EX      DE,HL
        LD      A,(HL)
        CP      1AH
        JR      Z,J$0985
J$0979: INC     HL
        LD      (D.BB78),HL
        LD      B,A
        CP      0AH     ; 10 
        LD      A,0B9H
        RET     Z
        XOR     A
        RET
J$0985: LD      B,A
        LD      (HL),00H
        LD      (D.BB78),HL
        LD      A,0C7H
        RET
J$098E: BIT     5,C
        JR      NZ,J$0997
        CALL    C.0A6C
        XOR     A
        RET
J$0997: PUSH    AF
        CALL    C.0897
        POP     AF
        CALL    C.08EE
        XOR     A
        RET
J$09A1: BIT     5,C
        JR      NZ,J$09AB
        CALL    C.0A42
        LD      E,A
        XOR     A
        RET
J$09AB: CALL    C.0897
        LD      E,A
        XOR     A
        RET
J$09B1: CALL    C$0A20
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$09B6: LD      HL,I$B1D2
        LD      (D.BB78),HL
        LD      (HL),00H
        RET

I09BF:  JP      J$09CE
        JP      J$09DD
        JP      J.0A1C
        JP      J.0A1C
        JP      J.0A17

J$09CE: CALL    C.0B46
        LD      B,A
        CP      1AH
        JR      Z,J$0A14
        CP      0DH     ; 13 
        LD      A,0B9H
        RET     Z
        XOR     A
        RET
J$09DD: CALL    C$0B51
        XOR     A
        RET

I09E2:  JP      J.0A12
        JP      J$09F1
        JP      J.0A1C
        JP      J$09FD
        JP      J.0A17

J$09F1: CALL    C.0B25
        JR      NC,J.0A1A
        RES     0,(IY+10)
        LD      A,9FH
        RET
J$09FD: CALL    C.0B37
        LD      E,A
        XOR     A
        RET

I0A03:  JP      J.0A12
        JP      J.0A1A
        JP      J.0A1C
        JP      J.0A1C
        JP      J.0A17

J.0A12: LD      B,1AH
J$0A14: LD      A,0C7H
        RET
J.0A17: LD      DE,C.0000
J.0A1A: XOR     A
        RET
J.0A1C: LD      E,0FFH
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$0A20: LD      A,(LINLEN)
        LD      E,A
        LD      A,(CRTCNT)
        LD      HL,CNSDFG
        ADD     A,(HL)
        LD      D,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0A2D: CALL    C$F25B
        CALL    C.0AB9
        PUSH    IX
        LD      IX,I$009F
        CALL    C.0B78
        CALL    C.0B5B
        POP     IX
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0A42: CALL    C$F261
        LD      HL,D.F2BD
        DEC     (HL)
        JR      NZ,J$0A69
        INC     (HL)
        LD      A,(D.F2BE)
        DEC     A
        CALL    Z,C.0AB9
        PUSH    IX
        LD      IX,I$009C
        CALL    C.0B78
        CALL    C.0B5B
        POP     IX
        LD      A,0FFH
        RET     NZ
        LD      A,65H   ; "e"
        LD      (D.F2BD),A
J$0A69: XOR     A
        RET
J$0A6B: LD      A,C

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0A6C: CALL    C$F25E
        PUSH    IX
        LD      IX,I$00A2
        CALL    C.0B78
        POP     IX
        RET

?.0A7B: LD      E,A
        CP      1BH
        CALL    Z,C.0AB9
        LD      HL,D.BB76
        BIT     0,(HL)
        RES     0,(HL)
        JR      NZ,J.0A91
        CALL    C.17D6
        JR      NC,J.0A91
        SET     0,(HL)
J.0A91: LD      A,02H   ; 2 
        LD      (D.F2BE),A
        LD      A,(D.BB77)
        LD      C,A
        LD      B,00H
        LD      HL,D.B06C
        ADD     HL,BC
        LD      (HL),E
        INC     A
        LD      (D.BB77),A
        CP      64H     ; "d"
        JR      Z,C.0ACE
        LD      A,(ESCCNT)
        OR      A
        JR      NZ,C.0ACE
        LD      A,E
        CP      0AH     ; 10 
        JR      Z,C.0ACE
        CP      07H     ; 7 
        JR      Z,C.0ACE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0AB9: CALL    C$F264
        PUSH    AF
        LD      A,(D.BB77)
        OR      A
        JR      Z,J$0ACC
        PUSH    BC
        PUSH    DE
        PUSH    HL
        CALL    C.0ACE
        POP     HL
        POP     DE
        POP     BC
J$0ACC: POP     AF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0ACE: EX      AF,AF'
        EXX
        PUSH    AF
        PUSH    BC
        PUSH    DE
        PUSH    HL
        PUSH    IX
        PUSH    IY
        LD      HL,D.B06C
        LD      A,(D.BB76)
        BIT     0,A
        PUSH    AF
        LD      A,(D.BB77)
        JR      Z,J$0AE9
        DEC     A
        JR      Z,J$0B07
J$0AE9: LD      B,A
        LD      A,(ESCCNT)
        OR      A
        JR      NZ,J$0AF6
        LD      HL,I$B069
        INC     B
        INC     B
        INC     B
J$0AF6: CALL    C.F1DC
        PUSH    HL
        LD      HL,I.B066
        LD      B,03H   ; 3 
        LD      A,(ESCCNT)
I$0B00  EQU     $-2
        OR      A
        CALL    Z,C.F1DC
        POP     HL
J$0B07: XOR     A
        LD      (D.BB77),A
I.0B09  EQU     $-2
        LD      (D.F2BE),A
        POP     AF
        JR      Z,J$0B1A
        LD      A,(HL)
        LD      (D.B06C),A
        LD      A,01H   ; 1 
        LD      (D.BB77),A
J$0B1A: POP     IY
        POP     IX
        POP     HL
        POP     DE
        POP     BC
        POP     AF
        EXX
        EX      AF,AF'
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0B25: CALL    C$F267
        CALL    C.0AB9
        PUSH    IX
        LD      IX,I$00A5
        CALL    C.0B78
        POP     IX
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0B37: CALL    C$F26A
        PUSH    IX
        LD      IX,I$00A8
        CALL    C.0B78
        POP     IX
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0B46: CALL    C.0AB9
        LD      HL,I$F371
        CALL    C.3726
        RET
J$0B50: LD      A,C

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$0B51: CALL    C.0AB9
        LD      HL,I$F374
        CALL    C.3726
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0B5B: PUSH    AF
        LD      A,(INTFLG)
        SUB     03H     ; 3 
        JR      Z,J$0B65
        POP     AF
        RET
J$0B65: LD      (INTFLG),A
        LD      IX,I$0156
        CALL    C.0B78
        LD      A,9FH
        LD      B,00H
        CALL    C.3723
J$0B76: JR      J$0B76

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0B78: EX      AF,AF'
        EXX
        PUSH    AF
        PUSH    BC
        PUSH    DE
        PUSH    HL
        PUSH    IY
        EXX
        EX      AF,AF'
        CALL    C$F1D9
        EX      AF,AF'
        EXX
        POP     IY
        POP     HL
        POP     DE
        POP     BC
        POP     AF
        EXX
        EX      AF,AF'
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0B90:  LD      HL,I$0022
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0B95:  LD      B,0FFH
        LD      D,00H
        CALL    C0CE0
        LD      A,01H   ; 1 
        LD      (D.F23C),A
        LD      HL,DBUF
        LD      (D.F23D),HL
        XOR     A
        LD      H,A
        LD      L,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0BAB:  INC     E
        LD      A,E
        LD      C,0DBH
        CALL    NZ,C.3606
        JR      Z,J.0BBF
        LD      A,(HL)
        INC     HL
        OR      (HL)
        JR      Z,J.0BBF
        LD      A,E
        LD      (D.F23C),A
        LD      C,00H
J.0BBF: LD      HL,(D.F347)
        LD      H,00H
        LD      A,C
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0BC6:  LD      B,08H   ; 8 
        LD      HL,C.0000
J$0BCB: ADD     HL,HL
        PUSH    HL
        LD      A,B
        CALL    C.3606
        LD      A,(HL)
        INC     HL
        OR      (HL)
        POP     HL
        JR      Z,J$0BD8
        INC     HL
J$0BD8: DJNZ    J$0BCB
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0BDC:  LD      A,(D.F23C)
        DEC     A
        LD      L,A
        XOR     A
        LD      H,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0BE4:  LD      (D.F23D),DE
        XOR     A
        LD      H,A
        LD      L,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0BEC:  LD      C,E
        LD      B,00H
        LD      IX,I.B9DA
        CALL    C.318D
        OR      A
        LD      C,0FFH
        RET     NZ
        PUSH    HL
        POP     IX
        LD      E,(IX+22)
        LD      D,(IX+23)
        PUSH    DE
        LD      DE,I.0002
        LD      B,D
        LD      C,D
J$0C09: PUSH    DE
        CALL    C.2D86
        LD      A,D
        OR      E
        JR      NZ,J$0C12
        INC     BC
J$0C12: POP     DE
        EX      (SP),HL
        SBC     HL,DE
        ADD     HL,DE
        EX      (SP),HL
        INC     DE
        JR      NZ,J$0C09
        PUSH    BC
        LD      E,(IX+12)
        LD      D,(IX+13)
        CALL    C.2B6A
        LD      DE,I.000B
        ADD     HL,DE
        LD      DE,(D.F34D)
        PUSH    DE
        LD      BC,I.0200
        LDIR
        POP     IY
        POP     HL
        POP     DE
        DEC     DE
        NOP
        LD      C,(IX+2)
        LD      B,(IX+3)
        PUSH    BC
        LD      C,(IX+10)
        INC     C
        POP     IX
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0C48:  LD      A,E
        LD      (D.F30D),A
        XOR     A
        LD      H,A
        LD      L,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0C50:  LD      IX,I.B9DA
        LD      B,00H
        LD      C,L
        PUSH    DE
        CALL    C.318D
        POP     DE
        OR      A
        RET     NZ
        PUSH    HL
        POP     IX
        PUSH    DE
        LD      BC,C.0008
        ADD     HL,BC
        LDI
        LD      BC,I.0200
        LD      A,C
        LD      (DE),A
        INC     DE
        LD      A,B
        LD      (DE),A
        INC     DE
        INC     HL
        LD      A,(HL)
        INC     HL
        INC     A
        LD      (DE),A
        INC     DE
        INC     HL
        LDI
        LDI
        LDI
        LD      A,(HL)
        INC     HL
        PUSH    HL
        LD      L,(HL)
        LD      H,00H
        ADD     HL,HL
        ADD     HL,HL
        ADD     HL,HL
        ADD     HL,HL
        ADD     A,L
        LD      (DE),A
        INC     DE
        LD      A,H
        LD      (DE),A
        INC     DE
        POP     HL
        INC     HL
        INC     DE
        INC     DE
        PUSH    DE
        INC     DE
        LD      BC,12
        LDIR
        PUSH    DE
        EX      DE,HL
        LD      BC,-7
        ADD     HL,BC
        INC     (HL)
        JR      NZ,J$0CA4
        INC     HL
        INC     (HL)
J$0CA4: EX      DE,HL
        POP     DE
        LD      B,08H   ; 8 
        XOR     A
J$0CA9: LD      (DE),A
        INC     DE
        DJNZ    J$0CA9
        POP     DE
        LDI
        LD      L,(IX+22)
        LD      H,(IX+23)
        DEC     HL
        LD      B,(IX+11)
        JR      J$0CBD
J$0CBC: ADD     HL,HL
J$0CBD: DJNZ    J$0CBC
        LD      C,(IX+20)
        LD      B,(IX+21)
        ADD     HL,BC
        EX      DE,HL
        DEC     HL
        DEC     HL
        LD      (HL),D
        DEC     HL
        LD      (HL),E
        POP     DE
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0CCF:  LD      DE,(D.F23D)
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0CD5:  LD      A,(D.F30D)
        OR      A
        JR      Z,J$0CDD
        LD      A,0FFH
J$0CDD: LD      B,A
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0CE0:  LD      A,B
        CP      0FFH
        JR      Z,J$0CEB
        CALL    C.3606
        LD      B,A
        LD      A,C
        RET     Z
J$0CEB: LD      A,B
        CALL    C.2C4A
        LD      A,D
        OR      A
        RET     Z
        LD      A,B
        CALL    C.2C5A
        CALL    C$35EB
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0CFB:  LD      B,00H

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0CFD:  LD      A,B
        LD      B,00H
I$0D00: CALL    C.3723
J$0D03: JR      J$0D03

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0D05:  LD      B,(IY+125)
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0D0A:  LD      A,B
        PUSH    DE
        PUSH    IY
        LD      IY,(D.F347)
        LD      IX,(D$F2DA)
        CALL    C$001C
        EI
        POP     IY
        LD      B,A
        OR      A
        DEC     HL
        CALL    NZ,C.0D26
        XOR     A
        LD      (HL),A
        POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0D26: LD      C,0FFH
J$0D28: INC     C
        SUB     0AH     ; 10 
        JR      NC,J$0D28
        ADD     A,3AH   ; ":"
        PUSH    AF
        LD      A,C
        OR      A
        CALL    NZ,C.0D26
        POP     AF
        LD      (HL),A
        INC     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0D39:  EX      AF,AF'
        PUSH    HL
        POP     IX
        LD      A,B
        CALL    C.3606
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        OR      H
        LD      A,C
        RET     Z
        EX      AF,AF'
        OR      A
        JR      NZ,J$0D58
        CALL    C$3013
        PUSH    HL
        POP     IX
        LD      B,(IX)
        EX      DE,HL
        OR      A
        RET
J$0D58: EX      AF,AF'
        CALL    C.2C49
        CALL    C.2C59
        PUSH    HL
J$0D60: PUSH    DE
        PUSH    IX
        POP     DE
        XOR     A
        CALL    C.2731
        LD      HL,04000H
        OR      A
        SBC     HL,DE
        EX      (SP),HL
        POP     BC
        SBC     HL,BC
        JR      C,J$0D7E
        SBC     HL,BC
        JR      C,J$0D81
        ADD     HL,BC
        EX      DE,HL
        ADD     IX,BC
        JR      J$0D60
J$0D7E: ADD     HL,BC
        LD      B,H
        LD      C,L
J$0D81: SET     7,D
        PUSH    DE
        POP     IX
        LD      D,A
        EX      AF,AF'
        POP     HL
        CALL    C$3030
        LD      BC,I.0009
        ADD     HL,BC
        LD      (HL),00H
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0D93:  PUSH    BC
        LD      B,08H   ; 8 
        LD      D,B
        CALL    C0E8B
        POP     BC
        INC     B
        JP      Z,J.0E2D
        DEC     B
        JP      Z,J$0E04
        LD      HL,(D.BA33)
        LD      A,H
        OR      L
        LD      C,0BCH
        JP      NZ,J.0E2F
        CALL    C.0E35
        LD      DE,I.BE02
        LD      HL,D.BE00
J$0DB6: EXX
        LD      A,01H   ; 1 
        LD      B,30H   ; "0"
        CALL    C.11A6
        JR      C,J$0DCA
        PUSH    BC
        EXX
        INC     (HL)
        LD      (DE),A
        INC     DE
        POP     AF
        LD      (DE),A
        INC     DE
        DJNZ    J$0DB6
J$0DCA: LD      A,(D.BE00)
        OR      A
        LD      A,C
        LD      C,0DEH
        JP      Z,J.0E2F
        LD      HL,(D.BBFB)
        LD      (D.BA33),HL
        LD      A,08H   ; 8 
        PUSH    HL
        POP     IX
        LD      (IX+8),A
        LD      (IX+9),00H
        LD      (IX+31),0FFH
        LD      C,A
        LD      IX,I.B9DA
        LD      B,00H
        CALL    C.318D
        LD      A,0FFH
        CALL    C$2F1A
        LD      DE,C.0000
        CALL    C.2FA9
        CALL    C.2C49
        JR      J.0E2D
J$0E04: LD      HL,(D.BA33)
        LD      A,H
        OR      L
        JR      Z,J.0E2D
        LD      A,08H   ; 8 
        CALL    C.2C5A
        LD      HL,C.0000
        LD      (D.BA33),HL
        XOR     A
        LD      (D.BE00),A
        LD      HL,I.BE02
J$0E1D: LD      C,(HL)
        INC     HL
        LD      B,(HL)
        INC     HL
        LD      A,B
        OR      A
        JR      Z,J.0E2D
        PUSH    HL
        LD      A,C
        CALL    C.1256
        POP     HL
        JR      J$0E1D
J.0E2D: LD      C,00H
J.0E2F: LD      A,(D.BE00)
        LD      B,A
        LD      A,C
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0E35: LD      HL,I$BC00
        LD      DE,I$0400
J$0E3B: LD      (HL),00H
        INC     HL
        DEC     DE
        LD      A,D
        OR      E
        JR      NZ,J$0E3B
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0E44:  LD      A,B
        CP      02H     ; 2 
        JR      C,J.0E86
J.0E49: LD      A,B
        CP      (IY+122)
        JR      Z,J.0E86
        JR      NC,J$0E6E
        LD      HL,(D.BBF8)
        CALL    C.2D0F
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        DEC     HL
        LD      (D.BBF8),DE
        CALL    C.022B
        LD      HL,C.0000
        LD      (D.BBF6),HL
        LD      HL,I.BBFA
        DEC     (HL)
        JR      J.0E49
J$0E6E: LD      HL,I$020B
        CALL    C.01CB
        JR      NZ,J.0E86
        LD      DE,(D.BBF8)
        LD      (D.BBF8),HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        LD      HL,I.BBFA
        INC     (HL)
        JR      J.0E49
J.0E86: LD      B,(IY+122)
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0E8B:  LD      HL,I.BA1A
        LD      A,B
        OR      A
        JR      Z,J.0EAC
        CP      09H     ; 9 
        LD      A,0DBH
        RET     NC
        LD      C,B
        LD      B,00H
        ADD     HL,BC
        LD      A,D
        INC     A
        JR      Z,J$0EA9
        DEC     A
        JR      Z,J$0EA8
        CP      09H     ; 9 
        LD      A,0DBH
        RET     NC
        LD      C,D
J$0EA8: LD      (HL),C
J$0EA9: LD      D,(HL)
        XOR     A
        RET
J.0EAC: LD      (HL),A
        INC     HL
        INC     A
        CP      09H     ; 9 
        JR      NZ,J.0EAC
        XOR     A
        LD      D,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0EB6:  OR      A
        JR      Z,J$0EC2
        LD      A,B
        OR      A
        JR      Z,J$0EBF
        LD      A,0FFH
J$0EBF: LD      (D.F2EC),A
J$0EC2: LD      A,(D.F2EC)
        LD      B,A
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0EC8:  LD      B,02H   ; 2 
        LD      C,20H   ; " "
        XOR     A
        LD      H,A
        LD      L,A
        LD      D,A
        LD      E,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0ED2:  LD      C,(IY+9)
        OR      A
        JR      Z,J$0EDB
        LD      (IY+9),B
J$0EDB: LD      B,C
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0EDE:  XOR     A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$0EDF: LD      (D.BBED),A
        XOR     A
        PUSH    BC
        CALL    C.0FA2
        POP     BC
        RET     NZ
        PUSH    DE
        PUSH    BC
        LD      DE,D.BBEE
        CALL    C.0F8B
        LD      DE,I.0F76
        JR      NC,J$0EF8
        LD      D,B
        LD      E,C
J$0EF8: POP     BC
        POP     HL
        CALL    C.0FC8
        EX      DE,HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0EFF:  XOR     A
        LD      (D.BBED),A
        XOR     A
        CALL    C.0FA2
        RET     NZ
        LD      A,B
        OR      A
        RET     Z
        EX      AF,AF'
        EX      DE,HL
        LD      A,0FFH
        CALL    C.0FA2
        RET     NZ
        LD      A,B
        OR      A
        JR      Z,J$0F46
        EX      AF,AF'
        ADD     A,B
        LD      C,A
        LD      A,00H
        ADC     A,A
        LD      B,A
        PUSH    HL
        LD      HL,I.0004
        ADD     HL,BC
        CALL    C.01CB
        POP     BC
        RET     NZ
        PUSH    BC
        LD      BC,(D.BBEE)
        LD      (D.BBEE),HL
        LD      (HL),C
        INC     HL
        LD      (HL),B
        INC     HL
        EX      DE,HL
        XOR     A
        CALL    C.0FDF
        EX      (SP),HL
        LD      A,0FFH
        CALL    C.0FDF
        POP     HL
        LD      DE,(D.BBEE)
        JR      J$0F4A
J$0F46: EX      DE,HL
        LD      DE,D.BBEE
J$0F4A: CALL    C.0F8B
        LD      HL,D.BBEE
        CALL    C,C.2188
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C0F55:  XOR     A
        LD      (D.BBED),A
        PUSH    HL
        PUSH    BC
        LD      B,D
        LD      C,E
        LD      HL,(D.BBEE)
J$0F60: LD      A,H
        OR      L
        LD      DE,I.0F76
        JR      Z,J$0F71
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        EX      DE,HL
        DEC     BC
        LD      A,B
        OR      C
        JR      NZ,J$0F60
J$0F71: POP     BC
        POP     HL
        JP      C.0FC8

I.0F76: DEFW    0

        LD      HL,(D.BBEE)
J$0F7B: LD      A,H
        OR      L
        RET     Z
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        DEC     HL
        CALL    C.022B
        EX      DE,HL
        LD      (D.BBEE),HL
        JR      J$0F7B

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0F8B: EX      DE,HL
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        OR      H
        EX      DE,HL
        RET     Z
        PUSH    DE
        PUSH    HL
        INC     DE
        INC     DE
        CALL    C$0FF1
        LD      B,D
        LD      C,E
        POP     HL
        POP     DE
        JR      NZ,C.0F8B
        SCF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0FA2: PUSH    HL
        AND     01H     ; 1 
        LD      C,A
        LD      B,0FFH
J$0FA8: CALL    C.1003
        INC     HL
        CALL    C.17AE
        JR      Z,J$0FC1
        BIT     0,C
        JR      NZ,J$0FBB
        BIT     4,C
        LD      A,0C0H
        JR      NZ,J.0FC5
J$0FBB: DJNZ    J$0FA8
        LD      A,0BFH
        JR      J.0FC5
J$0FC1: DEC     A
        SUB     B
        LD      B,A
        XOR     A
J.0FC5: POP     HL
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0FC8: PUSH    HL
        PUSH    DE
J$0FCA: LD      A,B
        DEC     B
        OR      A
        LD      A,0BFH
        JR      Z,J$0FDB
        LD      A,(DE)
        CALL    C$1012
        INC     HL
        LD      A,(DE)
        INC     DE
        OR      A
        JR      NZ,J$0FCA
J$0FDB: POP     DE
        POP     HL
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.0FDF: PUSH    HL
        AND     01H     ; 1 
        LD      C,A
J$0FE3: CALL    C.1003
        INC     HL
        CALL    C.17AE
        LD      (DE),A
        INC     DE
        OR      A
        JR      NZ,J$0FE3
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$0FF1: LD      C,00H
J$0FF3: CALL    C.1003
        INC     HL
I$0FF7: CALL    C.17AE
        LD      B,A
        LD      A,(DE)
        INC     DE
        CP      B
        RET     NZ
I$0FFF: OR      A
        JR      NZ,J$0FF3
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1003: PUSH    HL
        EX      DE,HL
        LD      A,(D.BBED)
        CALL    C.2731
        EX      DE,HL
        CALL    CF206                   ; RD_SEG
        EI
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1012: PUSH    HL
        PUSH    DE
        LD      E,A
        EX      DE,HL
        LD      A,(D.BBED)
        CALL    C.2731
        EX      DE,HL
        CALL    CF209                   ; WR_SEG
        EI
        POP     DE
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1024:  CALL    C.111B
        LD      C,D
        LD      B,00H
        LD      E,L
        LD      D,H
        LD      HL,I$07BC
        ADD     HL,BC
        LD      A,D
        CP      03H     ; 3 
        LD      A,C
        SBC     A,0FCH
        AND     0FCH
        RRCA
        RRCA
        ADD     A,C
        PUSH    HL
        LD      HL,I104D-1
        LD      C,D
        ADD     HL,BC
        ADD     A,(HL)
        POP     HL
        ADD     A,E
J$1044: SUB     07H     ; 7 
        JR      NC,J$1044
        ADD     A,07H   ; 7 
        LD      C,A
        XOR     A
        RET

I104D:  DEFB    1,4,4,7,9,12,14,17,20,22,25,27

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1059:  LD      BC,0F844H
        ADD     HL,BC
        JR      NC,J.1091
        LD      A,H
        OR      A
        JR      NZ,J.1091
        LD      A,L
        CP      64H     ; "d"
        JR      NC,J.1091
        LD      B,A
        LD      A,D
        DEC     A
        CP      0CH     ; 12 
        JR      NC,J.1091
        LD      HL,I$1096
        ADD     A,L
        LD      L,A
        JR      NC,J$1077
        INC     H
J$1077: CP      97H
        JR      NZ,J.1083
        LD      A,B
        AND     03H     ; 3 
        JR      NZ,J.1083
        LD      HL,I$10A2
J.1083: LD      A,E
        DEC     A
        CP      (HL)
        JR      NC,J.1091
        LD      L,E
        LD      H,D
        LD      D,B
        CALL    C$1167
        XOR     A
        LD      C,A
        RET
J.1091: LD      C,0FFH
        LD      A,0BEH
        RET

I$1096: DEFB	31,28,31,30,31,30,31,31,30,31,30,31

I$10A2: DEFB    29

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C10A3:  CALL    C.111B
        LD      H,B
        LD      L,C
        LD      D,E
        LD      E,00H
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C10AD:  LD      A,H
        CP      18H
        JR      NC,J.10C5
        LD      A,L
        CP      3CH     ; "<"
        JR      NC,J.10C5
        LD      A,D
        CP      3CH     ; "<"
        JR      NC,J.10C5
        LD      B,H
        LD      C,L
        LD      E,D
        CALL    C$1155
        XOR     A
        LD      C,A
        RET
J.10C5: LD      C,0FFH
        LD      A,0BDH
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$10CA: LD      A,0DH   ; 13 
        OUT     (0B4H),A
        IN      A,(0B5H)
        AND     04H     ; 4 
        LD      B,A
        INC     A
        OUT     (0B5H),A
        LD      A,0AH   ; 10 
        OUT     (0B4H),A
        LD      A,01H   ; 1 
        OUT     (0B5H),A
        LD      A,0DH   ; 13 
        OUT     (0B4H),A
        LD      A,B
        OUT     (0B5H),A
        LD      BC,I$0D00
J$10E8: LD      A,C
        OUT     (0B4H),A
        IN      A,(0B5H)
        PUSH    AF
        INC     C
        DJNZ    J$10E8
        LD      A,0EH   ; 14 
        OUT     (0B4H),A
        LD      A,00H
        OUT     (0B5H),A
        LD      B,0DH   ; 13 
J$10FB: DEC     C
        POP     DE
        LD      A,C
        OUT     (0B4H),A
        LD      A,D
        OUT     (0B5H),A
        DJNZ    J$10FB
J.1105: LD      A,0DH   ; 13 
        OUT     (0B4H),A
        IN      A,(0B5H)
        OR      08H     ; 8 
        OUT     (0B5H),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1110: LD      A,0DH   ; 13 
        OUT     (0B4H),A
        IN      A,(0B5H)
        AND     04H     ; 4 
        OUT     (0B5H),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.111B: CALL    C.1110
        LD      E,0DH   ; 13 
        CALL    C.113C
        LD      D,A
        CALL    C.113C
        LD      H,A
        CALL    C.113C
        LD      L,A
        DEC     E
        CALL    C.113C
        LD      B,A
        CALL    C.113C
        LD      C,A
        CALL    C.113C
        LD      E,A
        JP      J.1105

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.113C: PUSH    BC
        CALL    C.114C
        LD      B,A
        ADD     A,A
        ADD     A,A
        ADD     A,B
        ADD     A,A
        LD      B,A
        CALL    C.114C
        ADD     A,B
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.114C: DEC     E
        LD      A,E
        OUT     (0B4H),A
        IN      A,(0B5H)
        AND     0FH     ; 15 
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1155: LD      L,E
        LD      H,C
        LD      D,B
        CALL    C.1110
        LD      A,0FH   ; 15 
        OUT     (0B4H),A
        LD      A,02H   ; 2 
        OUT     (0B5H),A
        LD      E,00H
        JR      J$117D

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1167: CALL    C.1110
        OR      01H     ; 1 
        OUT     (0B5H),A
        LD      A,0BH   ; 11 
        OUT     (0B4H),A
        LD      A,D
        OUT     (0B5H),A
        CALL    C.1110
        CALL    C.1110
        LD      E,07H   ; 7 
J$117D: LD      A,L
        CALL    C.118C
        LD      A,H
        CALL    C.118C
        LD      A,D
        CALL    C.118C
        JP      J.1105

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.118C: LD      C,A
        XOR     A
        LD      B,08H   ; 8 
J$1190: RLC     C
        ADC     A,A
        DAA
        DJNZ    J$1190
        CALL    C$119D
        RRCA
        RRCA
        RRCA
        RRCA

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$119D: LD      B,A
        LD      A,E
        OUT     (0B4H),A
        LD      A,B
        OUT     (0B5H),A
        INC     E
        RET

;         Subroutine ALL_SEG
;            Inputs  ________________________
;            Outputs ________________________

C.11A6: OR      A
        LD      A,(D.BBFE)
        JR      Z,J$11AE
        LD      A,0FFH
J$11AE: EX      AF,AF'
        LD      C,B
        LD      A,C
        AND     8FH
        JR      NZ,J$11BA
        LD      A,(D.F344)
        OR      C
        LD      C,A
J$11BA: LD      A,C
        AND     70H     ; "p"
        JR      NZ,J$11C1
        JR      C.1206
J$11C1: LD      B,C
        CP      20H     ; " "
        JR      NZ,J$11CB
        CALL    C.1206
        JR      NC,J.11FF
J$11CB: XOR     A
        LD      HL,EXPTBL
J$11CF: BIT     7,(HL)
        JR      Z,J.11D5
        SET     7,A
J.11D5: LD      C,A
        XOR     B
        AND     8FH
        JR      Z,J$11E2
        PUSH    HL
        CALL    C.1206
        POP     HL
        JR      NC,J.11FF
J$11E2: LD      A,C
        BIT     7,A
        JR      Z,J$11ED
        ADD     A,04H   ; 4 
        BIT     4,A
        JR      Z,J.11D5
J$11ED: INC     HL
        INC     A
        AND     03H     ; 3 
        JR      NZ,J$11CF
        LD      A,B
        AND     70H     ; "p"
        CP      30H     ; "0"
        SCF
        JR      NZ,J.11FF
        LD      C,B
        CALL    C.1206
J.11FF: PUSH    AF
        LD      A,C
        AND     8FH
        LD      B,A
        POP     AF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1206: PUSH    BC
        LD      A,C
        AND     0FH     ; 15 
        ADD     A,A
        ADD     A,A
        LD      E,A
        LD      D,00H
        LD      HL,I.BA35
        ADD     HL,DE
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        OR      H
        JR      Z,J.1253
        LD      A,(DE)
        INC     DE
        LD      C,A
        EX      AF,AF'
        LD      B,A
        EX      AF,AF'
        INC     B
        JR      Z,J$123B
        LD      B,00H
J$1229: LD      A,(HL)
        OR      A
        JR      Z,J$1234
        INC     B
        INC     HL
        DEC     C
        JR      NZ,J$1229
        JR      J.1253
J$1234: EX      DE,HL
        DEC     (HL)
        INC     HL
        INC     HL
        INC     (HL)
        JR      J$124C
J$123B: ADD     HL,BC
J$123C: DEC     HL
        LD      A,(HL)
        OR      A
        JR      Z,J$1246
        DEC     C
        JR      NZ,J$123C
        JR      J.1253
J$1246: LD      B,C
        DEC     B
        EX      DE,HL
        DEC     (HL)
        INC     HL
        INC     (HL)
J$124C: EX      AF,AF'
        LD      (DE),A
        EX      AF,AF'
        LD      A,B
        POP     BC
        OR      A
        RET
J.1253: POP     BC
        SCF
        RET

;         Subroutine FRE_SEG
;            Inputs  ________________________
;            Outputs ________________________

C.1256: LD      C,A
        LD      A,B
        AND     8FH
        JR      NZ,J$125F
        LD      A,(D.F344)
J$125F: AND     0FH     ; 15 
        ADD     A,A
        ADD     A,A
        LD      E,A
        LD      D,00H
        LD      HL,I.BA35
        ADD     HL,DE
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        OR      H
        JR      Z,J.128E
        LD      A,(DE)
        CP      C
        JR      C,J.128E
        JR      Z,J.128E
        LD      B,00H
        ADD     HL,BC
        LD      A,(HL)
        OR      A
        JR      Z,J.128E
        LD      (HL),B
        EX      DE,HL
        INC     HL
        INC     (HL)
        INC     HL
        INC     A
        JR      Z,J$128B
        INC     HL
J$128B: DEC     (HL)
        OR      A
        RET
J.128E: SCF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1290: LD      C,10H   ; 16 
        LD      HL,I.BA35
J$1295: LD      E,(HL)
        INC     HL
        LD      D,(HL)
        PUSH    DE
        INC     HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        EX      (SP),HL
        LD      A,H
        OR      L
        JR      Z,J$12BE
        PUSH    BC
        LD      C,(HL)
J$12A5: LD      A,(DE)
        INC     A
        JR      Z,J.12B9
        DEC     A
        JR      Z,J.12B9
        DEC     A
        CP      B
        JR      C,J.12B9
        PUSH    HL
        XOR     A
        LD      (DE),A
        INC     HL
        INC     (HL)
        INC     HL
        INC     HL
        DEC     (HL)
        POP     HL
J.12B9: INC     DE
        DEC     C
        JR      NZ,J$12A5
        POP     BC
J$12BE: POP     HL
        DEC     C
        JR      NZ,J$1295
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.12C3: LD      (IX),0FFH
        LD      (IX+31),B
        LD      (IY+32),C
        LD      (D.BB9E),DE
        OR      A
        JR      NZ,J$12D7
        LD      A,(D.F23C)
J$12D7: LD      D,A
        CALL    C$13BC
        OR      A
        JR      Z,J.12E9
        CP      D
        JR      Z,J.12E9
        LD      D,A
        BIT     7,(IY+32)
        LD      A,0DBH
        RET     NZ
J.12E9: LD      (IX+25),D
        BIT     3,(IX+31)
        JR      NZ,J$12FF
        CALL    C.1782
        JR      Z,J.1304
        CP      5CH     ; "\"
        JR      NZ,J.1304
        SET     0,B
        SET     1,B
J$12FF: SET     5,(IY+32)
        XOR     A
J.1304: CALL    NZ,C.179C
        LD      DE,(D.BB9E)
        LD      (D.BB9C),DE
        CALL    C.16BC
        BIT     3,(IX+31)
        JR      Z,J.1320
        LD      DE,I.B926
        CALL    C$13E9
        JR      J$1391
J.1320: LD      DE,I.B926
        CALL    C.13FF
        CP      5CH     ; "\"
        JR      NZ,J$1366
        SET     1,B
        CALL    C.1782
        LD      DE,(D.BB9E)
        LD      (D.BB9C),DE
        LD      DE,I.B926
        CALL    C.14CB
        JR      NZ,J.13A6
        LD      DE,I.B926
        CALL    C.16E7
        JR      Z,J.1320
        JR      J.13A6

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1349: LD      (IX),0FFH
        LD      (IX+31),B
        LD      (IX+25),A
        LD      (IY+32),C
        LD      (D.BB9E),DE
        LD      (D.BB9C),DE
        LD      B,00H
        LD      DE,I.B926
        CALL    C.13FF
J$1366: LD      A,B
        AND     18H
        JR      NZ,J.1383
        BIT     1,(IY+32)
        JR      Z,J.1383
        PUSH    HL
        PUSH    BC
        LD      HL,I$13B1
        LD      DE,I.B926
        LD      BC,I.000B
        LDIR
        POP     AF
        OR      39H     ; "9"
        LD      B,A
        POP     HL
J.1383: XOR     A
        BIT     0,(IY+32)
        LD      DE,I.B926
        CALL    Z,C.14F4
        OR      A
        JR      NZ,J$139D
J$1391: SET     4,(IY+32)
        LD      DE,I.B926
        CALL    C.14CB
        JR      NZ,J.13A6
J$139D: LD      (IX+30),A
        LD      DE,I.B926
        CALL    C.16E7
J.13A6: PUSH    AF
        CALL    C.1782
        CALL    NZ,C.179C
        LD      C,A
        POP     AF
        OR      A
        RET

I$13B1: DEFB	"???????????"

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$13BC: LD      (IY+33),00H
        CALL    C.1782
        JR      Z,J$13E6
        BIT     1,(IY+33)
        JR      NZ,J.13E3
        SUB     41H     ; "A"
        JR      C,J.13E3
        CP      1AH
        JR      NC,J.13E3
        INC     A
        LD      B,A
        CALL    C.1782
        JR      Z,J.13E3
        CP      3AH     ; ":"
        LD      A,B
        LD      B,04H   ; 4 
        RET     Z
        CALL    C.179C
J.13E3: CALL    C.179C
J$13E6: XOR     A
        LD      B,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$13E9: PUSH    HL
        EX      DE,HL
        LD      A,B
        AND     07H     ; 7 
        LD      B,A
        LD      (IY+33),09H     ; 9 
        LD      C,0BH   ; 11 
        CALL    C.146C
        DEC     D
        JR      NZ,J$13FD
        SET     3,B
J$13FD: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.13FF: PUSH    HL
        EX      DE,HL
        LD      A,B
        AND     07H     ; 7 
        LD      B,A
        LD      (IY+33),00H
        LD      C,08H   ; 8 
        CALL    C.1782
        JR      Z,J.1454
        CP      2EH     ; "."
        JR      NZ,J$1451
        LD      D,01H   ; 1 
        CALL    C.1782
        JR      Z,J.143A
        BIT     4,(IY+33)
        JR      Z,J$144E
        CP      2EH     ; "."
        JR      NZ,J$1437
        SET     7,B
        INC     D
        CALL    C.1782
        JR      Z,J.143A
        BIT     4,(IY+33)
        JR      Z,J.1449
        CP      2EH     ; "."
        JR      Z,J.1449
J$1437: CALL    C.179C
J.143A: LD      (HL),2EH        ; "."
        INC     HL
        DEC     C
        DEC     D
        JR      NZ,J.143A
        SET     6,B
        SET     3,B
        SET     0,B
        JR      J.1454
J.1449: RES     7,B
        CALL    C.179C
J$144E: CALL    C.179C
J$1451: CALL    C.179C
J.1454: CALL    C.146C
        DEC     D
        JR      NZ,J$145C
        SET     3,B
J$145C: CP      2EH     ; "."
        JR      NZ,J$1465
        SET     4,B
        CALL    C.1782
J$1465: LD      C,03H   ; 3 
        CALL    C.146C
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.146C: LD      D,00H
        INC     C
        CALL    C.1782
        JR      Z,J.14C4
        CALL    C.179C
        CP      20H     ; " "
        JR      Z,J.14C4
        DEC     C
J$147C: INC     C
J$147D: CALL    C.1782
        JR      Z,J.14C4
        BIT     1,(IY+33)
        JR      Z,J$1490
        DEC     C
        DEC     C
        JR      NZ,J$148E
        LD      A,20H   ; " "
J$148E: INC     C
        INC     C
J$1490: BIT     4,(IY+33)
        JR      NZ,J$14C1
        BIT     3,(IY+33)
        JR      NZ,J.14AC
        BIT     2,(IY+33)
        JR      NZ,J.14AC
        CP      2AH     ; "*"
        JR      Z,J$14B7
        CP      3FH     ; "?"
        JR      NZ,J.14AC
J$14AA: SET     5,B
J.14AC: SET     0,B
        LD      D,01H   ; 1 
        DEC     C
        JR      Z,J$147C
        LD      (HL),A
        INC     HL
        JR      J$147D
J$14B7: LD      A,C
J$14B8: LD      C,A
        DEC     A
        JR      Z,J$14AA
        LD      (HL),3FH        ; "?"
        INC     HL
        JR      J$14B8
J$14C1: CALL    C.179C
J.14C4: DEC     C
        RET     Z
        LD      (HL),20H        ; " "
        INC     HL
        JR      J.14C4

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.14CB: XOR     A
        BIT     3,(IY+32)
        RET     Z
        PUSH    DE
        BIT     6,(IY+32)
        SET     6,(IY+32)
        CALL    Z,C$151A
        POP     DE
        OR      A
        RET     NZ
        BIT     4,(IY+32)
        JR      Z,J$14EF
        BIT     0,(IY+32)
        RET     Z
        LD      A,B
        AND     18H
        RET     Z
J$14EF: CALL    C.15A6
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.14F4: PUSH    BC
        PUSH    HL
        CALL    C.1698
        LD      A,00H
        JR      NC,J$1517
        POP     AF
        LD      (IX+26),L
        LD      (IX+27),H
        PUSH    HL
        LD      BC,C.0000
        ADD     HL,BC
        LD      C,(HL)
        INC     HL
        LD      B,(HL)
        LD      (IX+28),C
        LD      (IX+29),B
        LD      BC,I.0007
        ADD     HL,BC
        LD      A,(HL)
J$1517: POP     HL
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$151A: PUSH    BC
        LD      C,(IX+25)
        LD      B,00H
        CALL    C.318D
        POP     BC
        OR      A
        RET     NZ
        PUSH    BC
        PUSH    HL
        BIT     5,(IY+32)
        JR      NZ,J.1597
        LD      DE,I.001E
        ADD     HL,DE
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        BIT     7,D
        JR      NZ,J.1597
        LD      BC,(D.BB9E)
        PUSH    BC
        PUSH    HL
        LD      A,D
        OR      E
        JR      Z,J$1547
        RES     3,(IY+32)
J$1547: INC     HL
        LD      (D.BB9E),HL
        LD      BC,-32
        ADD     HL,BC
        PUSH    DE
        CALL    C.159F
        POP     DE
        LD      B,00H
J$1556: PUSH    DE
        LD      DE,I.B910
        CALL    C.13FF
        BIT     3,(IY+32)
        JR      Z,J$156E
        LD      DE,I.B910
        CALL    C.15A6
        OR      A
        JR      NZ,J.157E
        POP     AF
        PUSH    DE
J$156E: LD      DE,I.B910
        CALL    C.16E7
        JR      NZ,J.157E
        POP     DE
        CALL    C.1782
        JR      NZ,J$1556
        JR      J$1582
J.157E: POP     DE
        LD      DE,0FFFFH
J$1582: POP     HL
        LD      (HL),D
        DEC     HL
        LD      (HL),E
        POP     BC
        LD      (D.BB9E),BC
        SET     3,(IY+32)
        BIT     7,D
        JR      Z,J.1597
        INC     HL
        INC     HL
        LD      (HL),00H
J.1597: POP     HL
        POP     BC
        JR      NZ,C.159F
        CALL    C.1C40
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.159F: CALL    C.16BC
        CALL    C$1C3D
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.15A6: LD      A,0D9H
        BIT     3,B
        RET     Z
        BIT     5,B
        RET     NZ
        PUSH    DE
        CALL    C.1C53
J$15B2: JR      Z,J$15C9
        EX      (SP),HL
        PUSH    HL
        PUSH    BC
        XOR     A
        CALL    C.15D2
        POP     BC
        POP     HL
        EX      (SP),HL
        JR      NC,J$15C4
        BIT     4,A
        JR      NZ,J$15CD
J$15C4: CALL    C.1C8A
        JR      NC,J$15B2
J$15C9: POP     DE
        LD      A,0D6H
        RET
J$15CD: POP     AF
        CALL    C.1C30
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.15D2: AND     08H     ; 8 
        LD      C,A
        LD      A,(DE)
        OR      A
        RET     Z
        CP      0E5H
        RET     Z
        PUSH    DE
        LD      B,0BH   ; 11 
        CP      05H     ; 5 
        JR      NZ,J.15E4
        LD      A,0E5H
J.15E4: PUSH    AF
        LD      A,(HL)
        CALL    C.17AE
        POP     AF
        BIT     3,C
        JR      NZ,J.15FA
        SUB     (HL)
        JR      Z,J.15FA
        BIT     2,C
        JR      NZ,J.1609
        LD      A,(HL)
        SUB     3FH     ; "?"
        JR      NZ,J.1609
J.15FA: INC     HL
        INC     DE
        LD      A,(DE)
        DJNZ    J.15E4
        EX      DE,HL
        LD      A,C
        XOR     (HL)
        AND     08H     ; 8 
        JR      NZ,J.1609
        LD      A,(HL)
        SCF
        DEFB    006H
J.1609: OR      A
        POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.160C: PUSH    BC
        EX      (SP),IX
        LD      BC,I$0B00
        LD      A,(DE)
        CP      05H     ; 5 
        JR      NZ,J.1619
        LD      A,0E5H
J.1619: PUSH    DE
        LD      D,A
        LD      A,(HL)
        CALL    C.17AE
        BIT     2,C
        JR      NZ,J.1628
        CP      3FH     ; "?"
        JR      NZ,J.1628
        LD      A,D
J.1628: LD      (IX),A
        POP     DE
        INC     DE
        INC     HL
        INC     IX
        LD      A,(DE)
        DJNZ    J.1619
        EX      (SP),IX
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1637: PUSH    AF
        CALL    C.2535
        POP     BC
        JR      NC,J$1640
        XOR     A
        RET
J$1640: PUSH    HL
        PUSH    DE
        LD      A,B
        OR      A
        CALL    NZ,C.1698
        POP     HL
        LD      A,0C1H
        JR      C,J.1666
        LD      BC,I.0B09
        BIT     3,(IX+31)
        JR      NZ,J$1662
        LD      BC,I.0800
        LD      A,20H   ; " "
        CALL    C.1669
        JR      NZ,J.1666
        LD      BC,I.0300
J$1662: XOR     A
        CALL    C.1669
J.1666: POP     HL
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1669: CP      (HL)
        JR      Z,J.1694
J$166C: LD      A,(HL)
        CALL    C.17AE
        LD      (HL),A
        INC     HL
        BIT     4,C
        JR      NZ,J$168C
        BIT     2,C
        JR      NZ,J.1686
        BIT     3,C
        JR      NZ,J.1686
        CP      3FH     ; "?"
        JR      Z,J.1694
        CP      2AH     ; "*"
        JR      Z,J.1694
J.1686: DJNZ    J$166C
        JR      J$1692
J$168A: LD      A,(HL)
        INC     HL
J$168C: CP      20H     ; " "
        JR      NZ,J.1694
        DJNZ    J$168A
J$1692: XOR     A
        RET
J.1694: LD      A,0DAH
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1698: LD      HL,(D.BBF4)
        PUSH    HL
J$169C: POP     HL
        LD      A,H
        OR      L
        RET     Z
        LD      C,(HL)
        INC     HL
        LD      B,(HL)
        INC     HL
        PUSH    BC
        PUSH    HL
        PUSH    DE
        LD      BC,I.0009
        ADD     HL,BC
        LD      B,08H   ; 8 
J$16AD: LD      A,(DE)
        CP      (HL)
        JR      NZ,J$16B5
        INC     DE
        INC     HL
        DJNZ    J$16AD
J$16B5: POP     DE
        POP     HL
        JR      NZ,J$169C
        POP     BC
        SCF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.16BC: PUSH    HL
        LD      HL,I$B973
        LD      (HL),02H        ; 2 
        LD      HL,I$B931
        LD      (HL),00H
        INC     HL
        LD      (D.BB9A),HL
        POP     HL
        LD      (IY+25),00H

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$16D0: PUSH    HL
        LD      A,02H   ; 2 
        LD      HL,(D.BB9A)
        CP      (HL)
        JR      Z,J$16E3
        LD      (HL),00H
        INC     HL
        CP      (HL)
        JR      Z,J$16E1
        LD      (HL),00H
J$16E1: LD      A,2AH   ; "*"
J$16E3: ADD     A,0D6H
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.16E7: PUSH    BC
        PUSH    HL
        LD      HL,(D.BB9A)
        LD      A,B
        AND     18H
        JR      Z,J.172F
        BIT     6,B
        JR      Z,J$1706
        BIT     7,B
        JR      Z,J.1723
J$16F9: DEC     HL
        LD      A,(HL)
        CP      01H     ; 1 
        JR      Z,J.1723
        OR      A
        JR      NZ,J$16F9
        LD      A,0D9H
        JR      J.172B
J$1706: PUSH    HL
        LD      HL,I$B901
        PUSH    HL
        LD      (HL),01H        ; 1 
        INC     HL
        LD      A,(DE)
        CALL    C.173A
        POP     DE
        POP     HL
J$1714: LD      A,(HL)
        CP      02H     ; 2 
        LD      A,0D8H
        JR      Z,J.172B
        LD      A,(DE)
        LD      (HL),A
        INC     HL
        INC     DE
        OR      A
        JR      NZ,J$1714
        DEC     HL
J.1723: LD      (D.BB9A),HL
        CALL    C$16D0
        JR      Z,J.172F
J.172B: LD      (IY+25),0FFH
J.172F: POP     HL
        POP     BC
        BIT     2,(IY+32)
        JR      Z,J$1738
        XOR     A
J$1738: OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.173A: PUSH    BC
        PUSH    HL
        LD      B,0DH   ; 13 
J$173E: LD      (HL),00H
        INC     HL
        DJNZ    J$173E
        POP     HL
        LD      BC,I.0B09
        BIT     3,(IX+31)
        JR      NZ,J$175A
        LD      BC,I.0800
        CALL    C.176A
        LD      (HL),2EH        ; "."
        INC     HL
        LD      A,(DE)
        LD      BC,I.0300
J$175A: CALL    C.176A
        BIT     7,C
        JR      NZ,J.1768
        BIT     0,C
        JR      NZ,J.1768
        DEC     HL
        LD      (HL),00H
J.1768: POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.176A: INC     DE
        CALL    C.17AE
        BIT     2,C
        JR      NZ,J.177A
        BIT     3,C
        JR      NZ,J.177A
        CP      20H     ; " "
        JR      Z,J$177E
J.177A: SET     7,C
        LD      (HL),A
        INC     HL
J$177E: LD      A,(DE)
        DJNZ    C.176A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1782: PUSH    HL
        LD      HL,(D.BB9E)
        LD      A,(HL)
        OR      A
        JR      Z,J$178E
        INC     HL
        LD      (D.BB9E),HL
J$178E: POP     HL
        PUSH    BC
        LD      C,(IY+33)
        CALL    C.17AE
        LD      (IY+33),C
        POP     BC
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.179C: PUSH    HL
        LD      HL,(D.BB9E)
        DEC     HL
        LD      (D.BB9E),HL
        RES     1,(IY+33)
        RES     2,(IY+33)
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.17AE: RES     4,C
        SET     2,C
        BIT     1,C
        RES     1,C
        JR      NZ,J.17D1
        RES     2,C
        SET     1,C
        CALL    C.17D6
        JR      C,J.17D1
        RES     1,C
        BIT     0,C
        CALL    Z,C$17F3
        BIT     3,C
        CALL    C$1803
        JR      NC,J.17D1
        SET     4,C
J.17D1: OR      A
        RET     NZ
        SET     4,C
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.17D6: CALL    C$F258
        PUSH    HL
        LD      HL,I$F30F
        CP      (HL)
        INC     HL
        JR      C,J$17E4
        CP      (HL)
        JR      C,J$17EC
J$17E4: INC     HL
        CP      (HL)
        JR      C,J.17F0
        INC     HL
        CP      (HL)
        JR      NC,J.17F0
J$17EC: OR      A
        SCF
        POP     HL
        RET
J.17F0: OR      A
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$17F3: PUSH    HL
        LD      HL,I$BA75
        CALL    C$F255
        PUSH    BC
        LD      B,00H
        LD      C,A
        ADD     HL,BC
        LD      A,(HL)
        POP     BC
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1803: PUSH    HL
        PUSH    BC
        LD      BC,I.0011
        LD      HL,I$181C
        JR      Z,J$1810
        LD      BC,6
J$1810: CP      20H     ; " "
        JR      C,J$1818
        CPIR
        JR      NZ,J$1819
J$1818: SCF
J$1819: POP     BC
        POP     HL
        RET

I$181C: DEFB	07FH,'|<>/',0FFH,' :;.,=+\"[]'

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C182D:  LD      A,B
        LD      B,00H
        LD      IX,I.B9DA
D$1832  EQU     $-2
        LD      C,09H   ; 9 
        PUSH    DE
        LD      DE,I$1842
        CALL    C.12C3
        POP     DE
        RET     NZ
        JP      C1893

I$1842: DEFB    0

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1843:  XOR     A
        LD      B,A
        LD      IX,I.B9DA
        LD      C,09H   ; 9 
        CALL    C.12C3
        RET     NZ
        OR      C
        LD      A,0D9H
        RET     NZ
        LD      BC,I.001E
        ADD     HL,BC
        LD      DE,(D.BBE8)
        LD      (HL),E
        INC     HL
        LD      (HL),D
J$185E: INC     HL
        EX      DE,HL
        JP      C1893

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1863:  LD      C,04H   ; 4 
        LD      IX,I.B9DA
        XOR     A
        CALL    C.12C3
        LD      C,(IX+25)
        LD      DE,(D.BB9E)
        LD      HL,(D.BB9C)
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1878:  PUSH    HL
        LD      (D.BB9E),DE
        EX      DE,HL
        LD      B,00H
        CALL    C.13FF
        LD      DE,(D.BB9E)
        POP     HL
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C188A:  LD      A,E
        LD      C,D
        CALL    C.17AE
        LD      D,C
        LD      E,A
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1893:  PUSH    DE
        LD      HL,I$B933
        LD      C,00H
        PUSH    DE
        LD      A,(D$BB99)
        OR      A
        JR      NZ,J.18B7
J$18A0: LD      A,(HL)
        INC     HL
        CP      02H     ; 2 
        JR      Z,J.18B7
        CP      01H     ; 1 
        JR      NZ,J$18B0
        POP     AF
        LD      A,5CH   ; "\"
        INC     DE
        PUSH    DE
        DEC     DE
J$18B0: LD      (DE),A
        INC     DE
        OR      A
        JR      NZ,J$18A0
        JR      J$18B9
J.18B7: LD      A,0D8H
J$18B9: POP     HL
        POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C18BC:  LD      A,04H   ; 4 
        JR      J$18C1

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C18C0:  XOR     A
J$18C1: LD      (D$BBAF),A
        LD      A,(DE)
        INC     A
        JR      Z,J$18D5
        XOR     A
        LD      C,0AH   ; 10 
        CALL    C.12C3
        RET     NZ
        OR      C
        LD      A,0D9H
        RET     NZ
        JR      J$191F
J$18D5: PUSH    HL
        PUSH    DE
        EX      (SP),IX
        CALL    C.19F8
        LD      C,(IX+25)
        POP     IX
        JP      NZ,J.196D
        LD      A,0C1H
        JP      C,J.196D
        PUSH    HL
        LD      HL,I.000B
        ADD     HL,DE
        LD      A,(HL)
        POP     HL
        BIT     4,A
        LD      A,0CFH
        JR      Z,J.196D
        BIT     3,B
        JR      NZ,J.196D
        CALL    C.1C30
        PUSH    BC
        PUSH    HL
        LD      BC,I.0019
        ADD     HL,BC
        PUSH    IX
        POP     DE
        EX      DE,HL
        LD      BC,I.001A
        ADD     HL,BC
        EX      DE,HL
        LD      BC,I.0004
        LDIR
        POP     HL
        POP     BC
        POP     DE
        LD      A,C
        LD      C,4EH   ; "N"
        CALL    C$1349
        RET     NZ
        OR      C
        LD      A,0D9H
        RET     NZ
J$191F: BIT     2,(IY+47)
        JR      NZ,J.1955
        BIT     5,B
        JR      Z,J.1955
        PUSH    IX
        EX      (SP),HL
        LD      BC,I.0001
        ADD     HL,BC
        LD      (D.BB9E),HL
        POP     HL
        LD      DE,I.B91B
        CALL    C.13FF
        OR      A
        LD      A,0DAH
        RET     NZ
        PUSH    HL
        LD      HL,I.B926
        LD      DE,I.B91B
        LD      BC,I.B926
        CALL    C.160C
        POP     HL
        LD      DE,I.B926
        CALL    C.14F4
        LD      (IX+30),A
J.1955: LD      DE,I.B926
        PUSH    IX
        EX      (SP),HL
        LD      BC,I.0020
        ADD     HL,BC
        EX      DE,HL
        PUSH    DE
        LD      BC,I.000B
        LDIR
        POP     DE
        POP     HL
        CALL    C.1A49
        JR      J$1983
J.196D: POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C196F:  LD      (IY+47),04H     ; 4 
        CALL    C.19F8
        RET     NZ
        PUSH    IX
        EX      (SP),HL
        LD      DE,I.0020
        ADD     HL,DE
        EX      DE,HL
        POP     HL
        CALL    C.1A87
J$1983: PUSH    AF
        CALL    Z,C.198F
        POP     AF
        CALL    C.1A3B
        EX      DE,HL
        LDIR
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.198F: PUSH    IX
        EX      (SP),HL
        PUSH    HL
        INC     HL
        LD      A,(DE)
        CP      05H     ; 5 
        JR      NZ,J$199B
        LD      A,0E5H
J$199B: CALL    C.173A
        POP     HL
        LD      BC,I$000E
        ADD     HL,BC
        LD      A,(DE)
        LD      (HL),A
        EX      DE,HL
        INC     DE
        LD      BC,I.000B
        ADD     HL,BC
        LD      BC,I.000A
        LDIR
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.19B2: LD      (IY+47),04H     ; 4 
        LD      B,16H
        LD      A,(DE)
        INC     A
        JR      Z,J$19DE
        JR      J$19C2

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$19BE: LD      (IY+47),00H
J$19C2: XOR     A
        LD      IX,I.B9DA
        LD      C,08H   ; 8 
        CALL    C.12C3
        RET     NZ
        OR      C
        LD      A,0D9H
        RET     NZ
        BIT     5,B
        LD      A,0DAH
        RET     NZ
        LD      DE,I.B926
        CALL    C.1A49
        JR      J$19ED
J$19DE: PUSH    DE
        POP     IX
        CALL    C.19F8
        RET     NZ
        BIT     3,(IX+31)
        LD      A,0CFH
        RET     NZ
        XOR     A
J$19ED: OR      A
        RET     NZ
        PUSH    HL
        LD      HL,I.000B
        ADD     HL,DE
        LD      A,(HL)
        POP     HL
        CP      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.19F8: PUSH    BC
        BIT     7,(IX+30)
        JR      Z,J$1A06
        CALL    C.1A1B
        POP     BC
        XOR     A
        SCF
        RET
J$1A06: CALL    C.1A3B
        LDIR
        LD      C,(IX+25)
        LD      B,01H   ; 1 
        CALL    C.318D
        POP     BC
        OR      A
        RET     NZ
        CALL    C.1C70
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1A1B: LD      L,(IX+26)
        LD      H,(IX+27)
        PUSH    HL
        LD      DE,I.0009
        ADD     HL,DE
        PUSH    HL
        LD      DE,I.0016
        ADD     HL,DE
        EX      DE,HL
        PUSH    IX
        POP     HL
        LD      BC,I.000F
        ADD     HL,BC
        LD      BC,I.0004
        LDIR
        POP     DE
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1A3B: LD      DE,D.BBDE
        PUSH    IX
        POP     HL
        LD      BC,I.002B
        ADD     HL,BC
        LD      BC,12
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1A49: BIT     2,(IY+47)
        JR      NZ,J.1A64
        PUSH    DE
        LD      A,(IX+31)
        AND     10H     ; 16 
        CALL    C.1637
        POP     DE
        RET     NZ
        BIT     7,(IX+31)
        JR      Z,J.1A64
        SET     3,(IY+47)
J.1A64: RES     7,(IX+31)
        LD      (D.BBAD),DE
        BIT     7,(IX+30)
        JR      NZ,J$1A7A
        CALL    C.1C53
        CALL    C.1BC8
        JR      J$1A99
J$1A7A: PUSH    HL
        LD      DE,I.0009
        ADD     HL,DE
        EX      DE,HL
        CALL    C.1B96
        POP     HL
        JP      J.1B24

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1A87: BIT     7,(IX+30)
        LD      A,0D7H
        RET     NZ
        SET     1,(IY+41)
        LD      (D.BBAD),DE
J$1A96: CALL    C.1BC5
J$1A99: JR      C,J$1AA7
        BIT     2,(IY+47)
        LD      A,0D7H
        CALL    Z,C.1BFA
        RET     NZ
        JR      J$1AE6
J$1AA7: BIT     2,(IY+47)
        JR      Z,J$1ABC
        BIT     3,A
        JR      NZ,J.1B24
        AND     16H
        CPL
        OR      (IX+31)
        INC     A
        JR      NZ,J$1A96
        JR      J.1B24
J$1ABC: LD      B,A
        BIT     3,(IY+47)
        JR      NZ,J$1AD3
        BIT     2,B
        LD      A,0CDH
        JR      NZ,J.1B25
        BIT     4,B
        LD      A,0CCH
        JR      NZ,J.1B25
        BIT     4,(IX+31)
J$1AD3: LD      A,0CBH
        JR      NZ,J.1B25
        CALL    C.1C70
        XOR     A
        CALL    C.2332
        PUSH    AF
        CALL    C.1C70
        POP     AF
        OR      A
        JR      NZ,J.1B25
J$1AE6: LD      DE,(D.BBAD)
        CALL    C.2535
        JR      NC,J$1AF1
        OR      A
        RET
J$1AF1: LD      BC,C.0000
        BIT     4,(IX+31)
        JR      Z,J$1B04
        LD      A,0FFH
        INC     BC
        CALL    C.2F40
        RET     NZ
        CALL    C$1B27
J$1B04: CALL    C.1C70
        LD      A,28H   ; "("
        BIT     3,(IX+31)
        JR      NZ,J$1B1C
        LD      A,(IX+31)
        SET     5,A
        BIT     4,A
        JR      Z,J$1B1A
        AND     0DAH
J$1B1A: AND     3FH     ; "?"
J$1B1C: PUSH    HL
        LD      HL,(D.BBAD)
        CALL    C.1B69
        POP     HL
J.1B24: XOR     A
J.1B25: CP      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1B27: PUSH    DE
        LD      D,B
        LD      E,C
        XOR     A
        CALL    C.2DB6
        PUSH    HL
        EX      (SP),IX
        PUSH    BC
        LD      B,01H   ; 1 
        CALL    C.2B78
        POP     BC
        PUSH    BC
        LD      DE,I.000B
        ADD     HL,DE
        EX      DE,HL
        LD      HL,I$1B5E
        LD      A,10H   ; 16 
        CALL    C.1B69
        LD      HL,I.0020
        ADD     HL,DE
        EX      DE,HL
        LD      HL,I$1B5D
        LD      BC,(D.BBE8)
        LD      A,10H   ; 16 
        CALL    C.1B69
        POP     BC
        EX      (SP),IX
        POP     HL
        POP     DE
        RET

I$1B5D: DEFB	"."
I$1B5E: DEFB	".          "

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1B69: PUSH    DE
        PUSH    BC
        LD      B,A
        LD      A,(HL)
        CP      0E5H
        JR      NZ,J$1B73
        LD      A,05H   ; 5 
J$1B73: LD      (DE),A
        LD      A,B
        INC     HL
        INC     DE
        LD      BC,I.000A
        LDIR
        CALL    C.2C38
        LD      (DE),A
        EX      DE,HL
J$1B81: LD      B,14H   ; 20 
J.1B83: INC     HL
        LD      (HL),C
J$1B85: DJNZ    J.1B83
J$1B87: POP     DE
        BIT     7,D
J$1B89  EQU     $-1
        JR      Z,J$1B8E
        LD      D,B
        LD      E,B
J$1B8E: LD      BC,-4
        ADD     HL,BC
        LD      (HL),D
        DEC     HL
        LD      (HL),E
        POP     DE

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1B96: PUSH    HL
        PUSH    BC
        PUSH    DE
        LD      HL,I.0016
        ADD     HL,DE
        PUSH    HL
        CALL    C.111B
        EX      (SP),HL
        LD      A,C
        ADD     A,A
        ADD     A,A
        LD      C,03H   ; 3 
J$1BA7: ADD     A,A
        RL      B
        DEC     C
        JR      NZ,J$1BA7
        SRL     E
        ADD     A,E
        LD      (HL),A
        INC     HL
        LD      (HL),B
        INC     HL
        POP     BC
        LD      A,B
        OR      A
        RRA
        RRA
        RRA
        RRA
        RL      D
        ADD     A,C
        LD      (HL),A
        INC     HL
        LD      (HL),D
        POP     DE
        POP     BC
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1BC5: CALL    C.1C8A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1BC8: JR      C,J$1BE4
        PUSH    IX
        EX      (SP),HL
        LD      HL,(D.BBAD)
        LD      A,(IX+31)
        CALL    C.15D2
        POP     HL
        RET     C
        JR      NZ,C.1BC5
        BIT     0,(IY+47)
        CALL    Z,C.1BE6
        OR      A
        JR      NZ,C.1BC5
J$1BE4: XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1BE6: PUSH    HL
        PUSH    DE
        PUSH    BC
        CALL    C.1A3B
        EX      DE,HL
        LD      DE,I.BBD2
        LDIR
        SET     0,(IY+47)
        POP     BC
        POP     DE
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1BFA: PUSH    BC
        BIT     0,(IY+47)
        JR      Z,J$1C0D
        PUSH    HL
        CALL    C.1A3B
        LD      HL,I.BBD2
        LDIR
        POP     HL
        JR      J$1C2D
J$1C0D: LD      DE,(D.BBE6)
        BIT     7,D
        LD      A,0D5H
        JR      NZ,J.1C2E
        LD      A,0FFH
        LD      BC,I.0001
        CALL    C.2F40
        JR      NZ,J.1C2E
        PUSH    BC
        CALL    C.2DD3
        POP     BC
        LD      (D.BBE4),BC
        CALL    C.1C8A
J$1C2D: XOR     A
J.1C2E: POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1C30: PUSH    HL
        LD      HL,I.001A
        ADD     HL,DE
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        POP     HL
        LD      A,D
        OR      E
        JR      NZ,C.1C40

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1C3D: LD      DE,0FFFFH

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1C40: LD      (D.BBE8),DE
        PUSH    HL
        LD      HL,(D.BBAB)
        XOR     A
        SBC     HL,DE
        JR      NZ,J$1C51
        SET     1,(IY+47)
J$1C51: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1C53: LD      DE,(D.BBE8)
        BIT     7,D
        JR      Z,J$1CBA
        PUSH    BC
        PUSH    HL
        LD      BC,I.000F
        ADD     HL,BC
        LD      C,(HL)
        INC     HL
        LD      A,(HL)
        INC     HL
        INC     HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        POP     HL
        LD      B,0FFH
        PUSH    BC
        PUSH    BC
        JR      J$1CD4

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1C70: PUSH    HL
        LD      DE,C.0008
        ADD     HL,DE
        BIT     7,(HL)
        EX      DE,HL
        INC     DE
        POP     HL
        JP      NZ,J$1D1F
        SET     1,(IY+41)
        INC     (IY+96)
        PUSH    BC
        LD      BC,C.0000
        JR      J$1C8E

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1C8A: PUSH    BC
        LD      BC,I.0020
J$1C8E: PUSH    HL
        EX      DE,HL
        ADD     HL,BC
        LD      DE,(D.BBE2)
        LD      A,(D.BBE0)
        DEC     A
        JR      Z,J$1CA4
        BIT     1,(IY+41)
        JP      Z,J$1D19
        JR      J$1CF9
J$1CA4: POP     HL
        INC     DE
        LD      A,(D.BBE1)
        DEC     A
        JR      NZ,J$1CE1
        CP      (IY+94)
        JR      NZ,J$1CE3
        LD      DE,(D.BBE4)
        BIT     7,D
        SCF
        POP     BC
        RET     NZ
J$1CBA: PUSH    BC
        PUSH    DE
        CALL    C.2D86
        LD      B,D
        LD      C,E
        POP     DE
        PUSH    DE
        XOR     A
        CALL    C.2DB6
        PUSH    DE
        EX      DE,HL
        LD      HL,I.000A
        ADD     HL,DE
        LD      A,(HL)
        INC     A
        EX      DE,HL
        POP     DE
        PUSH    BC
        LD      C,00H
J$1CD4: LD      (IY+94),C
        POP     BC
        LD      (D.BBE4),BC
        POP     BC
        LD      (D.BBE6),BC
J$1CE1: LD      B,10H   ; 16 
J$1CE3: OR      A
        JR      NZ,J$1CED
        LD      B,(IY+94)
        LD      (D.BBDE),A
        INC     A
J$1CED: LD      (D.BBE1),A
        LD      (D.BBE2),DE
        LD      (IY+95),B
        LD      A,B
        PUSH    HL
J$1CF9: EX      (SP),IX
        PUSH    AF
        LD      B,01H   ; 1 
        CALL    C.2B78
        POP     BC
        EX      (SP),IX
        LD      DE,-21
        ADD     HL,DE
        LD      A,(D.BBDF)
        INC     A
        SUB     B
        LD      DE,I.0020
J$1D10: ADD     HL,DE
        DEC     A
        JR      NZ,J$1D10
        LD      A,B
        RES     1,(IY+41)
J$1D19: LD      (D.BBE0),A
        EX      DE,HL
        POP     HL
        POP     BC
J$1D1F: LD      A,(DE)
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1D22: EX      AF,AF'
        CALL    C.2136
        RET     NC
        RET     Z
        BIT     7,(IX+30)
        JR      Z,J$1D39
        LD      L,(IX+28)
        LD      H,(IX+29)
        INC     HL
        INC     HL
        INC     HL
        EX      AF,AF'

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1D38: JP      (HL)
J$1D39: EX      AF,AF'
        LD      DE,I.BBC5
        LD      (DE),A
        LD      BC,I.0001
        LD      A,0FFH
        CALL    C.2753
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.1D47: CALL    C.2136
        RET     NC
        RET     Z
        BIT     7,(IX+30)
        JR      Z,J$1D6D
        RES     6,(IX+30)
        LD      L,(IX+28)
        LD      H,(IX+29)
        PUSH    BC
        CALL    C$1D38
        POP     DE
        CP      0B9H
        JR      Z,J$1D6B
        BIT     5,E
        RET     NZ
        CP      0C7H
        RET     NZ
J$1D6B: XOR     A
        RET
J$1D6D: PUSH    BC
        LD      DE,I.BBC5
        LD      BC,I.0001
        LD      A,0FFH
        CALL    C.2757
        LD      HL,I.BBC5
        LD      B,(HL)
        POP     DE
        OR      A
        RET     NZ
        OR      E
        RET     Z
        LD      A,B
        CP      1AH
        LD      A,0C7H
        RET     Z
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1D8A:  EX      AF,AF'
        BIT     3,B
        LD      A,0CFH
        RET     NZ
        CALL    C$19BE
        RET     NZ
        LD      B,0FFH
        BIT     4,A
        JR      NZ,J$1DDC
        JR      J$1DA6

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1D9C:  EX      AF,AF'
        CALL    C.19B2
        RET     NZ
        BIT     4,A
        LD      A,0CCH
        RET     NZ
J$1DA6: PUSH    HL
        CALL    C.2121
        JR      NZ,J$1DDF
        PUSH    HL
        CALL    C$21A3
        JR      NZ,J$1DDE
        EX      DE,HL
        EX      (SP),HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        PUSH    BC
        PUSH    DE
        EX      (SP),IX
        POP     HL
        LD      BC,I.0020
        LDIR
        POP     BC
        POP     DE
        LD      (IX+31),06H     ; 6 
        XOR     A
        LD      (IX+45),A
        LD      (IX+46),A
        LD      (IX+47),A
        LD      (IX+48),A
        POP     HL
        EX      AF,AF'
        CALL    C.2284
        CALL    C.20E8
J$1DDC: XOR     A
        RET
J$1DDE: POP     HL
J$1DDF: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1DE1:  CALL    C.2136
        RET     NC
        RET     Z
        CALL    C.22CD
        CALL    C.20E8
        JR      J$1DF3

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1DEE:  CALL    C.2136
        RET     NC
        RET     Z
J$1DF3: CALL    C.223A
        LD      A,(IX+25)
        CALL    C.2C41
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1DFE:  CALL    C.2136
        RET     NC
        RET     Z
        CALL    C.2121
        RET     NZ
        CALL    C.215C
        RET     NZ
        LD      (HL),E
        INC     HL
        LD      (HL),D
        CALL    C.20E8
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1E13:  PUSH    DE
        PUSH    HL
        CALL    C.2136
        POP     BC
        POP     DE
        RET     NC
        RET     Z
        XOR     A
        CALL    C.2757
        PUSH    BC
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1E23:  PUSH    DE
        PUSH    HL
        CALL    C.2136
        POP     BC
        POP     DE
        RET     NC
        RET     Z
        XOR     A
        CALL    C.2753
        PUSH    BC
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1E33:  EX      AF,AF'
        PUSH    DE
        PUSH    HL
        CALL    C.2136
        POP     DE
        POP     HL
        RET     NC
        RET     Z
        EX      AF,AF'
        PUSH    HL
        LD      HL,C.0000
        LD      BC,C.0000
        OR      A
        JR      Z,J.1E63
        LD      L,(IX+45)
        LD      H,(IX+46)
        LD      C,(IX+47)
        LD      B,(IX+48)
        DEC     A
        JR      Z,J.1E63
        LD      L,(IX+21)
        LD      H,(IX+22)
        LD      C,(IX+23)
        LD      B,(IX+24)
J.1E63: ADD     HL,DE
        EX      (SP),HL
        POP     DE
        ADC     HL,BC
        EX      DE,HL
        LD      (IX+45),L
        LD      (IX+46),H
        LD      (IX+47),E
        LD      (IX+48),D
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1E77:  EX      AF,AF'
        PUSH    DE
        CALL    C.2136
        POP     DE
        RET     NC
        RET     Z
        EX      AF,AF'
        LD      L,(IX+28)
        LD      H,(IX+29)
        OR      A
        JR      Z,J$1EAA
        DEC     A
        JR      Z,J$1E98
        DEC     A
        JR      Z,J$1ECB
        DEC     A
        JR      Z,J$1EE1
        DEC     A
        JR      Z,J$1EFB
J$1E95: LD      A,0B8H
        RET
J$1E98: BIT     7,(IX+30)
        JR      Z,J$1E95
        LD      A,(IX+30)
        XOR     E
        AND     0DFH
        XOR     E
        RES     6,A
        LD      (IX+30),A
J$1EAA: LD      E,(IX+30)
        XOR     A
        LD      D,A
        BIT     7,E
        RET     NZ

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$1EB2: LD      E,(IX+25)
        DEC     E
        LD      B,04H   ; 4 
J$1EB8: LD      A,(IX+48)
        CP      (IX+24)
        JR      C,J$1EC8
        JR      NZ,J$1EC6
        DEC     IX
        DJNZ    J$1EB8
J$1EC6: SET     6,E
J$1EC8: XOR     A
        LD      D,A
        RET
J$1ECB: BIT     1,(IX+49)
        JR      NZ,J.1EF0
        BIT     7,(IX+30)
        JR      NZ,J.1EF3
        CALL    C$1EB2
        BIT     6,E
        JR      NZ,J.1EF0
        LD      E,00H
        RET
J$1EE1: BIT     0,(IX+49)
        JR      NZ,J.1EF0
        INC     HL
        INC     HL
        INC     HL
        BIT     7,(IX+30)
        JR      NZ,J.1EF3
J.1EF0: LD      E,0FFH
        RET
J.1EF3: LD      BC,6
        ADD     HL,BC
        LD      C,(IX+30)
        JP      (HL)
J$1EFB: BIT     7,(IX+30)
        JR      NZ,J$1F05
        XOR     A
        LD      E,A
        LD      D,A
        RET
J$1F05: LD      BC,12
        ADD     HL,BC
        JP      (HL)

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F0A:  CALL    C.19B2
        RET     NZ
        LD      A,0FFH
        CALL    C.2332
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F14:  CALL    C.2136
        RET     NC
        RET     Z
        CALL    C.22CD
        CALL    C.20E8
        CALL    C.2240
        SET     3,(IX+49)
        OR      A
        RET     NZ
        CALL    C.1C70
        LD      A,0FFH
        CALL    C.2332
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F31:  PUSH    HL
        CALL    C.19B2
        POP     BC
        RET     NZ
        CALL    C.2398
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F3B:  PUSH    HL
        CALL    C.2136
        POP     BC
        RET     NC
        RET     Z
        PUSH    BC
        CALL    C.2240
        POP     BC
        OR      A
        RET     NZ
        CALL    C.1C70
        CALL    C.2398
        OR      A
        RET     NZ
        CALL    C.227E
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F56:  PUSH    HL
        CALL    C.19B2
        POP     BC
        RET     NZ
        CALL    C.23FD
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F60:  PUSH    HL
        CALL    C.2136
        POP     BC
        RET     NC
        RET     Z
        PUSH    BC
        CALL    C.2240
        POP     BC
        OR      A
        RET     NZ
        CALL    C.1C70
        CALL    C.23FD
        OR      A
        RET     NZ
        CALL    C.227E
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F7B:  EX      AF,AF'
        PUSH    HL
        CALL    C.19B2
        POP     BC
        RET     NZ
        EX      AF,AF'
        OR      A
        CALL    NZ,C.24DF
        OR      A
        RET     NZ
        CALL    C.1C70
        LD      HL,I.000B
        ADD     HL,DE
        LD      L,(HL)
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1F93:  EX      AF,AF'
        LD      C,L
        CALL    C.2136
        RET     NC
        RET     Z
        EX      AF,AF'
        OR      A
        JR      Z,J$1FAF
        PUSH    BC
        CALL    C.2240
        POP     BC
        OR      A
        RET     NZ
        CALL    C.1C70
        CALL    C.24DF
        RET     NZ
        CALL    C.227E
J$1FAF: LD      L,(IX+14)
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1FB4:  EX      AF,AF'
        PUSH    IX
        PUSH    HL
        CALL    C.19B2
        POP     BC
        POP     DE
        RET     NZ
        EX      AF,AF'
        OR      A
        CALL    NZ,C.2504
        OR      A
        RET     NZ
        CALL    C.1C70
        LD      HL,I.0016
        ADD     HL,DE
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C1FD6:  EX      AF,AF'
        PUSH    IX
        PUSH    HL
        CALL    C.2136
        POP     BC
        POP     DE
        RET     NC
        RET     Z
        EX      AF,AF'
        OR      A
        JR      Z,J$1FF5
        PUSH    BC
        PUSH    DE
        CALL    C.2240
        POP     DE
        POP     BC
        OR      A
        RET     NZ
        CALL    C.2504
        RET     NZ
        CALL    C.227E
J$1FF5: LD      E,(IX+15)
        LD      D,(IX+16)
        LD      L,(IX+17)
        LD      H,(IX+18)
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C2003:  PUSH    BC
        CALL    C.19B2
        POP     BC
        RET     NZ
        BIT     7,(IX+30)
        JR      NZ,J$201C
        PUSH    HL
        CALL    C.2136
        POP     HL
        RET     NC
        RET     Z
        LD      B,0FFH
        CALL    C.2308
        RET     Z
J$201C: XOR     A
        LD      B,A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C201F:  LD      HL,I.0040
        ADD     HL,HL
        CALL    C.01CB
        RET     NZ
        LD      DE,(D.BBF0)
        LD      (D.BBF0),HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        LD      A,D
        OR      E
        JR      Z,J$2059
        INC     DE
        LD      B,3FH   ; "?"
J$2038: PUSH    BC
        INC     HL
        INC     DE
        LD      A,(DE)
        LD      C,A
        INC     DE
        LD      A,(DE)
        LD      B,A
        OR      C
        JR      Z,J.2055
        PUSH    BC
        POP     IX
        BIT     2,(IX+49)
        JR      Z,J.2055
        CALL    C.215C
        JR      NZ,J.2055
        LD      (HL),C
        INC     HL
        LD      (HL),B
        DEC     HL
J.2055: INC     HL
        POP     BC
        DJNZ    J$2038
J$2059: LD      A,(D.BBFE)
        LD      B,A
        INC     A
        LD      (D.BBFE),A
        CALL    C.20E8
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C2066:  LD      A,B
        OR      A
        JR      Z,J$2071
        LD      HL,D.BBFE
        CP      (HL)
        LD      A,0C5H
        RET     NC
J$2071: CALL    C$1290
        LD      HL,(D.BBF0)
        PUSH    HL
J.2078: LD      A,H
        OR      L
        JR      Z,J$20A9
        PUSH    BC
        PUSH    HL
        CALL    C.022B
        LD      B,0FFH
J$2083: INC     B
        CALL    C.2136
        JR      NC,J$208E
        CALL    NZ,C.216B
        JR      J$2083
J$208E: POP     HL
        POP     BC
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        EX      DE,HL
        LD      (D.BBF0),HL
        LD      A,(D.BBFE)
        DEC     A
        LD      (D.BBFE),A
        INC     B
        DEC     B
        JR      Z,J.2078
        CP      B
        JR      NZ,J.2078
        XOR     A
        LD      (DE),A
        DEC     DE
        LD      (DE),A
J$20A9: LD      A,B
        LD      (D.BBFE),A
J$20AD: POP     HL
        LD      A,H
        OR      L
        JR      Z,J$20CC
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        PUSH    DE
        LD      B,3FH   ; "?"
J$20B8: INC     HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        PUSH    DE
        POP     IX
        LD      A,D
        OR      E
        PUSH    HL
        PUSH    BC
        CALL    NZ,C.223A
        POP     BC
        POP     HL
        DJNZ    J$20B8
        JR      J$20AD
J$20CC: LD      A,0FFH
        CALL    C.2C4A
        LD      A,(D.BBFE)
        OR      A
        JR      NZ,J$20E0
        CALL    C201F
        CALL    C$21BB
        CALL    C$03A0
J$20E0: CALL    C.20E8
        CALL    C$09B6
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.20E8: PUSH    BC
        PUSH    DE
        PUSH    HL
        PUSH    IX
        LD      C,00H
        LD      B,00H
        CALL    C.2136
        JR      NC,J.2103
        JR      Z,J.2103
        LD      A,(IX+30)
        AND     81H
        CP      81H
        JR      Z,J.2103
        SET     0,C
J.2103: LD      B,01H   ; 1 
        CALL    C.2136
        JR      NC,J.2117
        JR      Z,J.2117
        LD      A,(IX+30)
        AND     82H
        CP      82H
        JR      Z,J.2117
        SET     1,C
J.2117: LD      A,C
        LD      (D$BB89),A
        POP     IX
        POP     HL
        POP     DE
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2121: PUSH    DE
        PUSH    IX
        LD      B,0FFH
J$2126: INC     B
        CALL    C.2136
        LD      A,0C4H
        JR      NC,J$2131
        JR      NZ,J$2126
        XOR     A
J$2131: POP     IX
        POP     DE
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2136: LD      A,B
        CP      3FH     ; "?"
        JR      NC,J.2158
        LD      HL,(D.BBF0)
        LD      A,H
        OR      L
        JR      Z,J.2158
        PUSH    BC
        INC     HL
        INC     HL
        LD      C,B
        LD      B,00H
        ADD     HL,BC
        ADD     HL,BC
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        DEC     HL
        POP     BC
        PUSH    DE
        POP     IX
        LD      A,D
        OR      E
        SCF
        LD      A,0C2H
        RET
J.2158: LD      A,0C3H
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.215C: LD      A,(IX-1)
        INC     A
        JR      Z,J$2167
        LD      (IX-1),A
        XOR     A
        RET
J$2167: LD      A,0C4H
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.216B: LD      A,(IX-1)
        DEC     A
        LD      (IX-1),A
        RET     NZ
        PUSH    DE
        PUSH    BC
        PUSH    IX
        EX      (SP),HL
        LD      BC,-3
        ADD     HL,BC
        EX      DE,HL
        LD      HL,D.BBF2
        CALL    C.2188
        POP     HL
        POP     BC
        POP     DE
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2188: EX      DE,HL
        LD      B,H
        LD      C,L
        CALL    C.022B
        EX      DE,HL
J$218F: LD      E,(HL)
        INC     HL
        LD      D,(HL)
        LD      A,D
        OR      E
        RET     Z
        EX      DE,HL
        SBC     HL,BC
        ADD     HL,BC
        JR      NZ,J$218F
        DEC     DE
        LD      A,(HL)
        LD      (DE),A
        INC     HL
        INC     DE
        LD      A,(HL)
        LD      (DE),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$21A3: LD      HL,I$0036
        CALL    C.01CB
        RET     NZ
        PUSH    DE
        LD      DE,(D.BBF2)
        LD      (D.BBF2),HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        LD      (HL),01H        ; 1 
        INC     HL
        POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$21BB: LD      B,5
        LD      HL,I21DB
J$21C0: PUSH    BC
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      B,(HL)
        INC     HL
        PUSH    HL
        PUSH    BC
        LD      A,B
        CALL    C1D9C
        POP     BC
        OR      A
        LD      DE,I21F6
        LD      A,B
        CALL    NZ,C1D9C
        POP     HL
        POP     BC
        DJNZ    J$21C0
        RET

I21DB:  DEFW	I21EC
        DEFB	101b			; con read only
        DEFW	I21EC
        DEFB	110b			; con write only
        DEFW	I21EC
        DEFB	100b			; con read & write
        DEFW	I21EE
        DEFB	100b			; aux read & write
        DEFW	I21F2
        DEFB	110b			; prn write only

I21EC:	DEFB	"CON",0
I21EE:	DEFB	"AUX",0
I21F2:	DEFB	"PRN",0
I21F6:	DEFB	"NUL",0 

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$21FA: BIT     7,(IX+30)
        JR      Z,J$2205
        CALL    C.1A1B
        XOR     A
        RET
J$2205: LD      C,(IX+25)
        LD      B,01H   ; 1 
        CALL    C.318D
        OR      A
        RET     NZ
        LD      E,(IX+37)
        LD      D,(IX+38)
        LD      (D.BBE8),DE
        PUSH    IX
        EX      (SP),HL
        LD      BC,I.0001
        ADD     HL,BC
        LD      (D.BB9E),HL
        POP     HL
        LD      DE,I.B926
        CALL    C.13FF
        OR      A
        LD      A,0DAH
        RET     NZ
        LD      DE,I.B926
        LD      (IY+47),04H     ; 4 
        CALL    C.1A49
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.223A: XOR     A
        BIT     7,(IX+49)
        RET     Z

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2240: BIT     3,(IX+49)
        LD      A,0BAH
        RET     NZ
        CALL    C$21FA
        RET     NZ
        BIT     7,(IX+30)
        RET     NZ
        BIT     7,(IX+49)
        RET     Z
        CALL    C.1B96
        PUSH    IX
        EX      (SP),HL
        LD      BC,I$0015
        ADD     HL,BC
        EX      DE,HL
        LD      BC,I.000B
        ADD     HL,BC
        SET     5,(HL)
        LD      BC,I.000F
        ADD     HL,BC
        LD      C,(IX+39)
        LD      B,(IX+40)
        LD      (HL),C
        INC     HL
        LD      (HL),B
        INC     HL
        EX      DE,HL
        LD      BC,I.0004
        LDIR
        CALL    C.2C38
        POP     HL

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.227E: CALL    C.1C70
        LD      A,(IX+49)

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2284: PUSH    BC
        EX      AF,AF'
        CALL    C.198F
        EX      AF,AF'
        AND     07H     ; 7 
        LD      (IX+49),A
        LD      (IX+32),L
        LD      (IX+33),H
        LD      BC,(D.BBE2)
        LD      (IX+34),C
        LD      (IX+35),B
        LD      A,(D.BBDF)
        SUB     (IY+96)
        LD      (IX+36),A
        LD      BC,(D.BBE8)
        LD      (IX+37),C
        LD      (IX+38),B
        LD      C,(IX+19)
        LD      B,(IX+20)
        LD      (IX+39),C
        LD      (IX+40),B
        LD      (IX+41),C
        LD      (IX+42),B
        XOR     A
        LD      (IX+43),A
        LD      (IX+44),A
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.22CD: CALL    C.216B
        XOR     A
        LD      (HL),A
        INC     HL
        LD      (HL),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.22D5: PUSH    DE
        PUSH    BC
        EX      DE,HL
        PUSH    IX
        POP     BC
        LD      IX,I$BBF5
J.22DF: LD      L,(IX-3)
        LD      H,(IX-2)
        LD      A,H
        OR      L
        JR      Z,J$2300
        PUSH    DE
        LD      DE,I.0003
        ADD     HL,DE
        POP     DE
        PUSH    HL
        POP     IX
        OR      A
        SBC     HL,BC
        JR      Z,J.22DF
        EX      DE,HL
        CALL    C.2308
        EX      DE,HL
        JR      NZ,J.22DF
        LD      A,0CAH
J$2300: PUSH    BC
        POP     IX
        EX      DE,HL
        POP     BC
        POP     DE
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2308: BIT     7,(IX+30)
        RET     NZ
        LD      A,(D.BBDF)
        SUB     (IY+96)
        CP      (IX+36)
        RET     NZ
        PUSH    HL
        LD      DE,(D.BBE2)
        LD      L,(IX+34)
        LD      H,(IX+35)
        OR      A
        SBC     HL,DE
        POP     HL
        RET     NZ
        LD      E,(IX+32)
        LD      D,(IX+33)
        XOR     A
        SBC     HL,DE
        ADD     HL,DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2332: LD      C,A
        XOR     A
        BIT     7,(IX+30)
        RET     NZ
        CALL    C.22D5
        RET     NZ
        PUSH    HL
        LD      HL,I.000B
        ADD     HL,DE
        LD      B,(HL)
        POP     HL
        BIT     0,B
        LD      A,0D1H
        RET     NZ
        BIT     4,B
        JR      Z,J$236A
        CALL    C.2535
        RET     C
        CALL    C.1BE6
        CALL    C.1C30
        CALL    C.1C53
J$235A: JR      Z,J$2367
        CALL    C.2535
        LD      A,0D0H
        RET     NZ
        CALL    C.1C8A
        JR      NC,J$235A
J$2367: CALL    C.1BFA
J$236A: CALL    C.1C70
        LD      A,C
        PUSH    HL
        LD      HL,I.001A
        ADD     HL,DE
        LD      C,(HL)
        INC     HL
        LD      B,(HL)
        POP     HL
        OR      A
        CALL    NZ,C$2EAE
        LD      D,B
        LD      E,C
        LD      A,D
        OR      E
        CALL    NZ,C.2FFC
        CALL    C.1C70
        PUSH    HL
        LD      HL,12
        ADD     HL,DE
        LD      A,(DE)
        LD      (HL),A
        LD      A,0E5H
        LD      (DE),A
        POP     HL
J$2390: CALL    C.2523
        CALL    NZ,C.34C3
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2398: XOR     A
        BIT     7,(IX+30)
        RET     NZ
        CALL    C.22D5
        RET     NZ
        CALL    C.2535
        RET     C
        LD      (D.BB9E),BC
        PUSH    DE
        LD      DE,I.B91B
        CALL    C.13FF
        POP     DE
        OR      A
        LD      A,0DAH
        RET     NZ
        PUSH    HL
        LD      HL,I.B91B
        LD      BC,I.B91B
        CALL    C.160C
        POP     HL
        LD      DE,I.B91B
        LD      (D.BBAD),DE
        LD      A,0FFH
        CALL    C.1637
        RET     NZ
        CALL    C.2535
        RET     C
        CALL    C.1BE6
        CALL    C.1C53
        CALL    C.1BC8
        LD      A,0D3H
        RET     C
        CALL    C.1BFA
        CALL    C.1C70
        PUSH    HL
        PUSH    DE
        LD      HL,I.B91B
        LD      B,0BH   ; 11 
        LD      A,(HL)
        CP      0E5H
        JR      NZ,J.23F2
        LD      A,05H   ; 5 
J.23F2: LD      (DE),A
        INC     HL
        INC     DE
        LD      A,(HL)
        DJNZ    J.23F2
        POP     DE
        POP     HL
        JP      J$2390

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.23FD: XOR     A
        BIT     7,(IX+30)
        RET     NZ
        CALL    C.22D5
        RET     NZ
        CALL    C.2535
        RET     C
        PUSH    HL
        LD      HL,I.001A
        ADD     HL,DE
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        LD      (D.BBAB),HL
        LD      HL,I.000B
        ADD     HL,DE
        LD      A,(HL)
        POP     HL
        BIT     4,A
        CALL    NZ,C.34C3
        PUSH    BC
        PUSH    HL
        LD      HL,I.B91B
        LD      B,0BH   ; 11 
        LD      A,(DE)
        CP      05H     ; 5 
        JR      NZ,J.2430
        LD      A,0E5H
J.2430: LD      (HL),A
        INC     HL
        INC     DE
        LD      A,(DE)
        DJNZ    J.2430
        LD      HL,D.BBDE
        LD      DE,I.BBC6
        LD      BC,12
        LDIR
        POP     HL
        POP     DE
        LD      C,89H
        LD      B,(IX+31)
        LD      A,(IX+25)
        LD      (IY+47),00H
        CALL    C.12C3
        RET     NZ
        OR      C
        LD      A,0D9H
        RET     NZ
        BIT     1,(IY+47)
        LD      A,0D2H
        RET     NZ
        CALL    C.1C53
        LD      BC,I.B91B
        LD      (D.BBAD),BC
        CALL    C.1BC8
        LD      A,0D3H
        RET     C
        CALL    C.1BFA
        RET     NZ
        CALL    C.1BE6
        PUSH    HL
        LD      HL,I.BBC6
        LD      DE,D.BBDE
        LD      BC,12
        LDIR
        POP     HL
        CALL    C.1C70
        PUSH    HL
        LD      HL,I.B8D4
        PUSH    DE
        EX      DE,HL
        LD      BC,I.0020
        LDIR
        POP     HL
        LD      (HL),0E5H
        CALL    C.2C38
        POP     HL
        CALL    C.1BFA
        CALL    C.1C70
        PUSH    HL
        LD      HL,I.B8D4
        LD      BC,I.0020
        PUSH    DE
        LDIR
        POP     DE
        POP     HL
        CALL    C.2523
        RET     Z
        CALL    C.34C3
        LD      BC,(D.BBE8)
        PUSH    BC
        CALL    C.1C30
        CALL    C.1C53
        LD      BC,I.254C
        LD      (D.BBAD),BC
        CALL    C.1BC8
        POP     BC
        RET     NC
        AND     10H     ; 16 
        RET     Z
        BIT     7,B
        JR      Z,J$24D1
        LD      BC,C.0000
J$24D1: PUSH    HL
        LD      HL,I.001A
        ADD     HL,DE
        LD      (HL),C
        INC     HL
        LD      (HL),B
        CALL    C.2C38
        XOR     A
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.24DF: XOR     A
        BIT     7,(IX+30)
        RET     NZ
        CALL    C.22D5
        RET     NZ
        PUSH    HL
        LD      HL,I.000B
        ADD     HL,DE
        LD      A,(HL)
        LD      B,0DDH
        BIT     4,A
        JR      NZ,J$24F7
        LD      B,0D8H
J$24F7: XOR     C
        AND     B
        LD      A,0CFH
        JR      NZ,J$2502
        LD      (HL),C
        CALL    C.2C38
        XOR     A
J$2502: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2504: XOR     A
        BIT     7,(IX+30)
        RET     NZ
        CALL    C.22D5
        RET     NZ
        PUSH    HL
        PUSH    DE
        CALL    C.1C70
        LD      HL,I.0016
        ADD     HL,DE
        EX      DE,HL
        EX      (SP),HL
        EX      DE,HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        LD      (HL),C
        INC     HL
        LD      (HL),B
        POP     DE
        POP     HL

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2523: PUSH    HL
        LD      HL,I.000B
        ADD     HL,DE
        BIT     4,(HL)
        JR      NZ,J$252E
        SET     5,(HL)
J$252E: CALL    C.2C38
        POP     HL
        LD      A,00H
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2535: PUSH    HL
        PUSH    BC
        LD      HL,I$254D
        XOR     A
        CALL    C.15D2
        JR      Z,J$2547
        LD      HL,I.254C
        XOR     A
        CALL    C.15D2
J$2547: POP     BC
        POP     HL
        LD      A,0CEH
        RET

I.254C: DEFB	"."
I$254D: DEFB	".          "

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C2558:  LD      A,01H   ; 1 
        DEFB    0FEH
C255B:  XOR     A
        LD      (D.BBC4),A
        LD      (D.BBB4),DE
        LD      BC,(D.F23D)
        LD      (D.BBC2),BC
        LD      A,B
        ADD     A,H
        JR      C,J.2570
        ADD     A,H
J.2570: LD      A,0C9H
J$2572: RET     C
        PUSH    HL
J$2574: LD      IX,I.B9DA
J$2576  EQU     $-2
J$2578: LD      B,02H   ; 2 
        LD      C,L
        INC     C
        CALL    C.318D
        POP     BC
        OR      A
        RET     NZ
        CALL    C.2C49
        CALL    C.2C59
        CALL    C.2599
        CALL    C.2C49
        CALL    C.2C59
        LD      DE,I.0009
        ADD     HL,DE
        LD      (HL),01H        ; 1 
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2599: XOR     A
        CP      B
        RET     Z
        LD      A,(D.BBC4)
        AND     04H     ; 4 
        LD      DE,(D.BBC2)
        CALL    C.2731
        SET     7,D
        EX      AF,AF'
        PUSH    HL
        LD      HL,D.BE00
        OR      A
        SBC     HL,DE
        JR      C,J$261C
        LD      A,H
        SRL     A
        INC     A
        CP      B
        JR      C,J$25BC
        LD      A,B
J$25BC: LD      C,A
        POP     HL
        SUB     B
        NEG
        LD      B,A
        PUSH    BC
        LD      B,C
        EX      AF,AF'
        LD      C,A
        PUSH    BC
        XOR     A
J$25C8: PUSH    BC
        PUSH    DE
        PUSH    DE
        EX      (SP),IX
        LD      DE,(D.BBB4)
        PUSH    DE
        DEC     A
        JR      Z,J$25E4
        LD      A,00H
        BIT     0,(IY+68)
        JR      NZ,J$25DF
        LD      A,01H   ; 1 
J$25DF: CALL    C.324F
        JR      J$25E6
J$25E4: LD      B,01H   ; 1 
J$25E6: EX      AF,AF'
        POP     DE
        POP     IX
        PUSH    HL
        LD      L,B
        LD      H,00H
        ADD     HL,DE
        LD      (D.BBB4),HL
        POP     HL
        POP     DE
        LD      A,D
        ADD     A,B
        ADD     A,B
        LD      D,A
        LD      A,B
        POP     BC
        SUB     B
        NEG
        LD      B,A
        EX      AF,AF'
        PUSH    DE
        LD      DE,(D.BBB4)
        CALL    NZ,C.3686
        POP     DE
        INC     B
        DEC     B
        JR      NZ,J$25C8
        POP     BC
        CALL    C$2633
        POP     BC
        LD      A,(IY+67)
        ADD     A,C
        ADD     A,C
        LD      (IY+67),A
        JP      C.2599
J$261C: POP     HL
        DEC     B
        PUSH    BC
        LD      DE,I.0200
        LD      B,E
        LD      C,E
        CALL    C.2688
        POP     BC
        INC     (IY+52)
        JR      NZ,J$2630
        INC     (IY+53)
J$2630: JP      C.2599

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$2633: CALL    C$2C6F
J$2636: PUSH    BC
        EXX
        CALL    C.2C9F
        JR      Z,J$2685
        LD      BC,I.0004
        ADD     HL,BC
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        EX      DE,HL
        LD      BC,(D.BBB4)
        SBC     HL,BC
        POP     BC
        LD      A,H
        INC     A
        JR      NZ,J.2665
        LD      A,L
        ADD     A,B
        JR      NC,J.2665
        DEC     DE
        DEC     DE
        EX      DE,HL
        BIT     0,(IY+68)
        JR      NZ,J$2668
        DEC     HL
        LD      (HL),00H
        DEC     HL
        DEC     HL
        CALL    C.2CB7
J.2665: EXX
        JR      J$2636
J$2668: BIT     7,(HL)
        JR      Z,J.2665
        LD      A,C
        EXX
        PUSH    DE
        EXX
        LD      BC,C.0008
        ADD     HL,BC
        EX      (SP),HL
        LD      D,E
        LD      E,B
        ADD     HL,DE
        ADD     HL,DE
        EX      DE,HL
        RES     7,D
        POP     HL
        LD      BC,I.0200
        CALL    C.F1D6
        JR      J.2665
J$2685: EXX
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2688: PUSH    HL
        EX      (SP),IX
        PUSH    DE
        PUSH    BC
        BIT     0,(IY+68)
        JR      NZ,J.26B8
        BIT     1,D
        JR      NZ,J.26BB
        BIT     1,(IY+68)
        JR      NZ,J.26B8
        PUSH    DE
        LD      HL,(D.BBC0)
        LD      DE,(D.BBB2)
        OR      A
        SBC     HL,DE
        POP     DE
        JR      C,J$26B5
        LD      A,B
        OR      C
        JR      NZ,J.26B8
        SBC     HL,DE
        JR      C,J.26BB
        JR      J.26B8
J$26B5: ADD     HL,BC
        JR      NC,J.26BB
J.26B8: LD      B,3
        DEFB    021H
J.26BB: LD      B,2
        LD      DE,(D.BBB4)
        CALL    C.2B78
        POP     DE
        ADD     HL,DE
        LD      BC,I.000B
        ADD     HL,BC
        POP     BC
        PUSH    DE
        PUSH    BC
        LD      DE,(D.BBC2)
        PUSH    DE
        LD      A,(D.BBC4)
        CALL    C.26F3
        POP     HL
        POP     BC
        ADD     HL,BC
        LD      (D.BBC2),HL
        BIT     0,(IY+68)
        CALL    Z,C.2C38
        POP     HL
        ADD     HL,BC
        BIT     1,H
        LD      HL,(D.BBF6)
        CALL    NZ,C.2CB4
        EX      (SP),IX
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.26F3: PUSH    DE
        PUSH    BC
        PUSH    AF
        PUSH    HL
        AND     04H     ; 4 
        CALL    C.2731
        LD      HL,04000H
        OR      A
        SBC     HL,DE
        SBC     HL,BC
        JR      NC,J$2709
        ADD     HL,BC
        LD      C,L
        LD      B,H
J$2709: POP     HL
        EX      (SP),HL
        BIT     0,H
        EX      (SP),HL
        PUSH    BC
        JR      NZ,J$2712
        EX      DE,HL
J$2712: CALL    C.F1D6
        JR      NZ,J$2718
        EX      DE,HL
J$2718: POP     BC
        POP     AF
        EX      (SP),HL
        OR      A
        SBC     HL,BC
        LD      B,H
        LD      C,L
        POP     HL
        JR      Z,J$272F
        LD      E,A
        POP     AF
        AND     0C0H
        ADD     A,40H   ; "@"
        LD      D,A
        LD      A,E
        LD      E,00H
        JR      C.26F3
J$272F: POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2731: PUSH    DE
        PUSH    HL
        LD      HL,I$F2CB
        OR      A
        JR      Z,J$273C
        LD      HL,I$F2C7
J$273C: LD      A,D
        AND     0C0H
        RLCA
        RLCA
        LD      E,A
        LD      D,00H
        ADD     HL,DE
        LD      A,(HL)
        POP     HL
        POP     DE
        RES     6,D
        RES     7,D
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

?.274D: AND     04H     ; 4 
        OR      02H     ; 2 
        JR      C.275B

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2753: AND     04H     ; 4 
        JR      C.275B

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2757: AND     04H     ; 4 
        OR      01H     ; 1 

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.275B: BIT     7,(IX+30)
        JR      NZ,J$27AA
        LD      (D.BBC4),A
        AND     10H     ; 16 
        OR      B
        OR      C
        RET     Z
        XOR     A
        LD      (D.BBBE),A
        LD      (D$BBBF),A
        LD      (D.BBC0),BC
        LD      (D.BBC2),DE
        CALL    C$2863
        LD      BC,(D.BBBE)
        LD      DE,(D.BBC2)
J$2783: LD      L,(IX+45)
        LD      H,(IX+46)
        ADD     HL,BC
        LD      (IX+45),L
        LD      (IX+46),H
        JR      NC,J.279A
        INC     (IX+47)
        JR      NZ,J.279A
        INC     (IX+48)
J.279A: OR      A
        RET     NZ
        BIT     4,(IY+68)
        JR      NZ,J$27A8
        LD      A,B
        OR      C
        LD      A,0C7H
        JR      Z,J.279A
J$27A8: XOR     A
        RET
J$27AA: LD      H,A
        AND     04H     ; 4 
        LD      (IX+50),A
        LD      A,B
        OR      C
        RET     Z
        BIT     0,H
        JR      NZ,J$27FC
        LD      L,(IX+28)
        LD      H,(IX+29)
        INC     HL
        INC     HL
        INC     HL
        PUSH    BC
J$27C1: PUSH    DE
        LD      A,(IX+50)
        CALL    C.2731
        EX      DE,HL
        CALL    CF206                   ; RD_SEG
        EI
        EX      DE,HL
        POP     DE
        BIT     5,(IX+30)
        JR      Z,J$27D9
        CP      1AH
        JR      Z,J$27F1
J$27D9: PUSH    IX
        PUSH    BC
        PUSH    DE
        PUSH    HL
        CALL    C.285F
        POP     HL
        POP     DE
        POP     BC
        POP     IX
        OR      A
        JR      NZ,J.27F4
        INC     DE
        DEC     BC
        LD      A,B
        OR      C
        JR      NZ,J$27C1
        JR      J.27F4
J$27F1: XOR     A
        INC     DE
        DEC     BC
J.27F4: POP     HL
        OR      A
        SBC     HL,BC
        LD      B,H
        LD      C,L
J$27FA: JR      J$2783
J$27FC: LD      L,(IX+28)
        LD      H,(IX+29)
        PUSH    BC
        RES     6,(IX+30)
J$2807: PUSH    BC
        PUSH    IX
        PUSH    DE
        PUSH    HL
        CALL    C.285F
        POP     HL
        POP     DE
        POP     IX
        LD      C,00H
        OR      A
        JR      Z,J.2830
        CP      0C7H
        JR      Z,J$2827
        CP      0B9H
        JR      NZ,J$2850
        BIT     2,(IX+30)
        JR      NZ,J.2830
        INC     C
J$2827: INC     C
        BIT     5,(IX+30)
        JR      NZ,J.2830
        LD      C,00H
J.2830: PUSH    DE
        PUSH    HL
        LD      A,(IX+50)
        CALL    C.2731
        EX      DE,HL
        LD      E,B
        CALL    CF209                   ; WR_SEG
        EI
        POP     HL
        POP     DE
        LD      A,C
        POP     BC
        DEC     A
        JR      Z,J$2853
        INC     DE
        DEC     BC
        DEC     A
        JR      Z,J.2857
        LD      A,B
        OR      C
        JR      NZ,J$2807
        JR      J.2857
J$2850: POP     BC
        JR      J.2857
J$2853: SET     6,(IX+30)
J.2857: POP     HL
        OR      A
        SBC     HL,BC
        LD      B,H
        LD      C,L
        JR      J$27FA

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.285F: LD      C,(IX+30)
        JP      (HL)

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$2863: LD      A,0BAH
        BIT     3,(IX+49)
        RET     NZ
        LD      A,0C6H
        BIT     0,(IY+68)
        JR      Z,J$2879
        BIT     1,(IX+49)
        RET     NZ
        JR      J$2885
J$2879: BIT     0,(IX+49)
        RET     NZ
        LD      A,0D1H
        BIT     0,(IX+14)
        RET     NZ
J$2885: BIT     0,(IY+127)
        JR      Z,J$2892
        LD      HL,(D.BBC2)
        ADD     HL,BC
        LD      A,0C9H
        RET     C
J$2892: LD      C,(IX+25)
        LD      B,01H   ; 1 
        CALL    C.318D
        OR      A
        RET     NZ
        CALL    C$29B6
        RET     NZ
        LD      BC,(D.BBC0)
        LD      A,B
        OR      C
        RET     Z
        LD      DE,(D.BBBC)
        CALL    C.2B3A
        LD      (D.BBB6),DE
        RET     NZ
        LD      BC,(D.BBB9)
        LD      A,B
        OR      C
        CALL    NZ,C.2936
        RET     NZ
J$28BD: LD      C,(IY+65)
        SRL     C
        JR      Z,J$291A
        CALL    C.295F
        RET     NZ
        SUB     (IY+59)
        LD      B,A
        LD      DE,(D.BBB6)
        CALL    C.2993
J$28D3: LD      A,B
        ADD     A,(IY+56)
        LD      B,A
        CP      C
        JR      NC,J$28FA
        PUSH    DE
        CALL    C.2D86
        EX      (SP),HL
        OR      A
        INC     HL
        SBC     HL,DE
        JR      NZ,J$28F1
        INC     (IY+60)
        JR      NZ,J$28EE
        INC     (IY+61)
J$28EE: POP     HL
        JR      J$28D3
J$28F1: ADD     HL,DE
        EX      DE,HL
        DEC     DE
        POP     HL
        LD      A,(D.BBB8)
        JR      J$2900
J$28FA: LD      A,(D.BBB8)
        SUB     B
        ADD     A,C
        LD      B,C
J$2900: DEC     A
        LD      (D.BBBB),A
        LD      (D.BBB6),DE
        PUSH    BC
        CALL    C.2599
        POP     BC
        SLA     B
        LD      C,00H
        CALL    C.29A4
        SET     3,(IY+68)
        JR      J$28BD
J$291A: LD      BC,C.0000
        CALL    C.2936
        RET     NZ
        LD      DE,(D.BBB6)
        LD      (IX+41),E
        LD      (IX+42),D
        LD      DE,(D.BBBC)
        LD      (IX+43),E
        LD      (IX+44),D
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2936: PUSH    HL
        LD      HL,I.0200
        OR      A
        SBC     HL,BC
        EX      DE,HL
        LD      HL,(D.BBC0)
        SBC     HL,DE
        JR      NC,J$2948
        ADD     HL,DE
        LD      E,L
        LD      D,H
J$2948: LD      A,D
        OR      E
        POP     HL
        RET     Z
        CALL    C.295F
        RET     NZ
        CALL    C.2993
        CALL    C.2688
        SET     3,(IY+68)
        CALL    C.29A4
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.295F: XOR     A
        BIT     3,(IY+68)
        RET     Z
        RES     3,(IY+68)
        LD      A,(D.BBBB)
        INC     A
        CP      (IY+56)
        JR      NZ,J$298E
        PUSH    DE
        LD      DE,(D.BBBC)
        INC     DE
        LD      (D.BBBC),DE
        LD      DE,(D.BBB6)
        CALL    C.2D86
        LD      (D.BBB6),DE
        BIT     7,D
        POP     DE
        LD      A,0C8H
        RET     NZ
        XOR     A
J$298E: LD      (D.BBBB),A
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2993: PUSH    DE
        LD      A,(D.BBBB)
        LD      DE,(D.BBB6)
        CALL    C.2DB6
        LD      (D.BBB4),DE
        POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.29A4: PUSH    HL
        LD      HL,(D.BBBE)
        ADD     HL,BC
        LD      (D.BBBE),HL
        LD      HL,(D.BBC0)
        SBC     HL,BC
        LD      (D.BBC0),HL
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$29B6: PUSH    HL
        LD      C,(IX+45)
        LD      B,(IX+46)
        LD      E,(IX+47)
        LD      D,(IX+48)
        PUSH    DE
        PUSH    BC
        CALL    C.2B05
        JR      NZ,J.2A19
        LD      (D.BBBC),DE
        LD      (D.BBBB),A
        LD      (D.BBB9),BC
        POP     HL
        LD      DE,(D.BBC0)
        DEC     DE
        ADD     HL,DE
        EX      (SP),HL
        POP     BC
        EX      DE,HL
        EX      (SP),HL
        PUSH    HL
        LD      HL,C.0000
        BIT     4,(IY+68)
        JR      Z,J$29EB
        DEC     HL
J$29EB: ADC     HL,DE
        EX      DE,HL
        BIT     7,D
        JR      NZ,J$2A62
        POP     HL
        PUSH    DE
        PUSH    BC
        CALL    C.2B05
        JR      NZ,J.2A19
        PUSH    DE
        LD      C,(IX+21)
        LD      B,(IX+22)
        LD      E,(IX+23)
        LD      D,(IX+24)
        LD      A,B
        OR      C
        DEC     BC
        JR      NZ,J$2A0F
        OR      D
        OR      E
        DEC     DE
J$2A0F: PUSH    DE
        PUSH    BC
        CALL    NZ,C.2B05
        EXX
        POP     HL
        POP     DE
        EXX
        POP     BC
J.2A19: JR      NZ,J$2A92
        EXX
        POP     BC
        XOR     A
        SBC     HL,BC
        EX      (SP),HL
        EX      DE,HL
        SBC     HL,DE
        EXX
        BIT     7,D
        EX      AF,AF'
        BIT     0,(IY+68)
        JP      NZ,J$2AEA
        PUSH    HL
        LD      H,B
        LD      L,C
        INC     DE
        OR      A
        SBC     HL,DE
        LD      C,L
        LD      B,H
        INC     BC
        JR      NC,J$2A76
        ADD     HL,DE
        EX      DE,HL
        POP     HL
        BIT     4,(IY+68)
        JR      Z,J.2AA9
        CALL    C.2B3A
        JR      NZ,J$2A94
        PUSH    DE
        CALL    C.2D86
        BIT     7,D
        CALL    Z,C.2FFC
        POP     DE
        LD      B,0FFH
        CALL    C.2DD3
        LD      C,(IX+39)
        LD      B,(IX+40)
        SCF
        EX      AF,AF'
        JR      J.2A96
J$2A62: EXX
        EX      AF,AF'
        POP     HL
        LD      E,(IX+39)
        LD      D,(IX+40)
        LD      A,D
        OR      E
        CALL    NZ,C.2FFC
        PUSH    DE
        LD      BC,C.0000
        JR      J.2A96
J$2A76: POP     HL
        LD      A,(IY+68)
        AND     02H     ; 2 
        CALL    C.2F40
        JR      NZ,J.2A93
        DEC     DE
        BIT     7,D
        JR      NZ,J.2A96
        PUSH    BC
        CALL    C.2B3A
        POP     BC
        JR      NZ,J.2A93
        CALL    C.2DD6
        JR      J.2AA9
J$2A92: POP     DE
J.2A93: POP     DE
J$2A94: POP     DE
        RET
J.2A96: LD      (IX+39),C
        LD      (IX+40),B
        XOR     A
        LD      (IX+41),C
        LD      (IX+42),B
        LD      (IX+43),A
        LD      (IX+44),A
J.2AA9: SET     7,(IX+49)
        EXX
        EX      AF,AF'
        JR      NZ,J$2AB3
        JR      NC,J$2AC5
J$2AB3: INC     BC
        LD      A,B
        OR      C
        JR      NZ,J$2AB9
        INC     DE
J$2AB9: LD      (IX+21),C
        LD      (IX+22),B
        LD      (IX+23),E
        LD      (IX+24),D
J$2AC5: POP     BC
        POP     DE
        LD      A,B
        OR      C
        DEC     BC
        JR      NZ,J$2ACD
        DEC     HL
J$2ACD: BIT     7,H
        JR      Z,J$2AE1
        LD      A,H
        AND     L
        INC     A
        LD      HL,0FFFFH
        JR      NZ,J.2AE4
        INC     HL
        SBC     HL,BC
        JR      NZ,J.2AE4
        DEC     HL
        JR      J.2AE4
J$2AE1: LD      HL,C.0000
J.2AE4: LD      (D.BBB2),HL
        EXX
        XOR     A
        RET
J$2AEA: EX      AF,AF'
        POP     DE
        EX      (SP),HL
        JR      NZ,J.2AFB
        JR      NC,J$2B02
        EXX
        LD      A,H
        AND     L
        INC     A
        EXX
        JR      NZ,J.2AFB
        ADD     HL,DE
        JR      C,J$2AFE
J.2AFB: LD      HL,0FFFFH
J$2AFE: INC     HL
        LD      (D.BBC0),HL
J$2B02: XOR     A
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2B05: PUSH    HL
        LD      A,B
        SRL     D
        RR      E
        RRA
        LD      B,00H
        RL      B
        PUSH    BC
        LD      BC,I.000A
        ADD     HL,BC
        PUSH    AF
        AND     (HL)
        LD      C,A
        LD      A,(HL)
        INC     A
        LD      (D.BBB8),A
        POP     AF
        INC     HL
        LD      B,(HL)
        JR      J$2B27
J$2B22: SRL     D
        RR      E
        RRA
J$2B27: DJNZ    J$2B22
        INC     D
        DEC     D
        JR      NZ,J.2B35
        BIT     7,E
        JR      NZ,J.2B35
        LD      D,E
        LD      E,A
        LD      A,C
        DEFB    021H
J.2B35: LD      A,0C8H
        POP     BC
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2B3A: PUSH    HL
        EX      DE,HL
        LD      E,(IX+41)
        LD      D,(IX+42)
        LD      A,D
        OR      E
        JR      Z,J$2B65
        LD      C,(IX+43)
        LD      B,(IX+44)
        SBC     HL,BC
        JR      NC,J$2B57
        ADD     HL,BC
        LD      E,(IX+39)
        LD      D,(IX+40)
J$2B57: EX      (SP),HL
        POP     BC
J$2B59: LD      A,B
        OR      C
        RET     Z
        DEC     BC
        CALL    C.2D86
        BIT     7,D
        JR      Z,J$2B59
        DEFB    03EH
J$2B65: POP     HL
        LD      A,0C8H
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2B6A: LD      B,01H   ; 1 
        LD      A,(IX+14)
        BIT     0,(IX+24)
        JR      Z,J.2B7A
        DEC     A
        JR      NZ,J.2B7A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2B78: LD      A,01H   ; 1 
J.2B7A: LD      (D$BBA2),A
        LD      C,(IX+8)
        LD      HL,(D.BBF6)
        LD      A,H
        SUB     01H     ; 1 
        CALL    NC,C.2C26
        RET     Z
        LD      HL,(D.BBF8)
        PUSH    HL
J$2B8E: CALL    C.2C26
        JP      Z,J$2C19
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        OR      H
        JR      NZ,J$2B8E
        POP     HL
        INC     HL
        INC     HL
        BIT     7,(HL)
        DEC     HL
        LD      A,(HL)
        DEC     HL
        JR      Z,J$2BA7
        LD      L,(HL)
        LD      H,A
J$2BA7: CALL    C.2D0F
        PUSH    HL
        INC     HL
        INC     HL
        LD      (HL),C
        INC     HL
        LD      A,B
        AND     02H     ; 2 
        LD      (HL),A
        INC     HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        LD      A,(IY+34)
        LD      (HL),A
        INC     HL
        LD      C,(IX+17)
        LD      (HL),C
        INC     HL
        PUSH    DE
        INC     HL
        INC     HL
        INC     HL
        PUSH    HL
        LD      E,L
        LD      D,H
        INC     DE
        LD      (HL),00H
        PUSH    BC
        LD      BC,J.01FF
        LDIR
        POP     BC
        EX      (SP),IX
        POP     HL
        LD      (IX-2),L
        LD      (IX-1),H
        POP     DE
        BIT     0,B
        JR      Z,J$2C15
J$2BE1: PUSH    BC
        PUSH    DE
        LD      B,(IY+34)
        JR      J.2BEE
J$2BE8: LD      A,E
        ADD     A,C
        LD      E,A
        JR      NC,J.2BEE
        INC     D
J.2BEE: PUSH    DE
        PUSH    BC
        LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,00H
        CALL    C.324F
        POP     BC
        POP     DE
        JR      Z,J$2C13
        CP      0F1H
        JR      Z,J$2C05
        DJNZ    J$2BE8
J$2C05: POP     DE
        POP     BC
        OR      A
        BIT     1,B
        JR      NZ,J$2C0D
        SCF
J$2C0D: CALL    C.368A
        JR      Z,J$2BE1
        DEFB    0CAH
J$2C13: POP     DE
        POP     BC
J$2C15: EX      (SP),HL
        POP     IX
        DEFB    0FEH
J$2C19: POP     BC
        SET     1,(IY+41)
        LD      (D.BBF6),HL
        CALL    C$2CD7
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2C26: PUSH    HL
        INC     HL
        INC     HL
        LD      A,(HL)
        SUB     C
        JR      NZ,J.2C36
        INC     HL
        INC     HL
        LD      A,(HL)
        SUB     E
        JR      NZ,J.2C36
        INC     HL
        LD      A,(HL)
        SUB     D
J.2C36: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2C38: LD      HL,(D.BBF6)
        INC     HL
        INC     HL
        INC     HL
        SET     7,(HL)
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2C41: PUSH    BC
        PUSH    HL
        CALL    C.3606
        POP     HL
        POP     BC
        DEFB    0FEH

C.2C49: DEFB    0F6H

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2C4A: SCF
        CALL    C.2C6D
        PUSH    HL
J$2C4F: CALL    C.2C9F
        JR      Z,J.2C9D
        CALL    C.2D0F
        JR      J$2C4F

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2C59: DEFB    0F6H
C.2C5A: SCF
        CALL    C.2C6D
        PUSH    HL
J$2C5F: CALL    C.2C9F
        JR      Z,J.2C9D
        CALL    C.2CB7
        INC     HL
        INC     HL
        LD      (HL),00H
        JR      J$2C5F

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2C6D: JR      C,J$2C78

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$2C6F: PUSH    HL
        PUSH    BC
        LD      BC,C.0008
        ADD     HL,BC
        LD      A,(HL)
        POP     BC
        POP     HL
J$2C78: PUSH    HL
        PUSH    DE
        PUSH    BC
        LD      B,A
        LD      HL,(D.BBF8)
J$2C7F: LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      A,(HL)
        INC     HL
        RES     0,(HL)
        OR      A
        JR      Z,J.2C96
        CP      B
        JR      Z,J$2C94
        RLCA
        JR      C,J.2C96
        LD      A,B
        INC     A
        JR      NZ,J.2C96
J$2C94: SET     0,(HL)
J.2C96: LD      A,D
        OR      E
        EX      DE,HL
        JR      NZ,J$2C7F
        POP     BC
        POP     DE
J.2C9D: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2C9F: LD      HL,(D.BBF8)
J$2CA2: PUSH    HL
        INC     HL
        INC     HL
        INC     HL
        BIT     0,(HL)
        RES     0,(HL)
        POP     HL
        RET     NZ
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        OR      H
        JR      NZ,J$2CA2
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2CB4: CALL    C.2D0F

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2CB7: PUSH    DE
        LD      DE,(D.BBF8)
        OR      A
        SBC     HL,DE
        ADD     HL,DE
        JR      Z,J$2CFE
        PUSH    BC
        PUSH    HL
        LD      (D.BBF8),HL
        LD      C,(HL)
        INC     HL
        LD      B,(HL)
        PUSH    BC
        LD      (HL),D
        DEC     HL
        LD      (HL),E
        EX      DE,HL
        LD      B,D
        LD      C,E
        CALL    C.2D00
        POP     BC
        JR      J$2CF8

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$2CD7: LD      A,(HL)
        INC     HL
        OR      (HL)
        DEC     HL
        RET     Z
        PUSH    DE
        PUSH    BC
        PUSH    HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        PUSH    DE
        XOR     A
        LD      (HL),A
        DEC     HL
        LD      (HL),A
        LD      B,H
        LD      C,L
        LD      HL,D.BBF8
        CALL    C.2D00
        EX      DE,HL
        POP     DE
        LD      (HL),E
        INC     HL
        LD      (HL),D
        DEC     HL
        CALL    C.2D00
J$2CF8: EX      DE,HL
        LD      (HL),C
        INC     HL
        LD      (HL),B
        POP     HL
        POP     BC
J$2CFE: POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2D00: LD      E,(HL)
        INC     HL
        LD      D,(HL)
        DEC     HL
        EX      DE,HL
        LD      A,H
        OR      L
        RET     Z
        SBC     HL,BC
        ADD     HL,BC
        JR      NZ,C.2D00
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2D0F: SET     1,(IY+41)
        PUSH    HL
        INC     HL
        INC     HL
        LD      A,(HL)
        OR      A
        JR      Z,J.2D84
        INC     HL
        BIT     7,(HL)
        JR      Z,J.2D84
        RES     7,(HL)
        PUSH    DE
        PUSH    BC
        PUSH    IX
J$2D25: PUSH    HL
        BIT     6,(HL)
        INC     HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      B,(HL)
        INC     HL
        JR      Z,J$2D3B
        LD      A,E
J$2D32: ADD     A,(HL)
        JR      NC,J$2D36
        INC     D
J$2D36: DJNZ    J$2D32
        LD      E,A
        LD      B,01H   ; 1 
J$2D3B: PUSH    DE
        INC     HL
        INC     HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        EX      DE,HL
        PUSH    DE
        POP     IX
        LD      C,01H   ; 1 
        POP     DE
        PUSH    DE
J$2D4A: PUSH    DE
        PUSH    BC
        LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,01H   ; 1 
        CALL    C.324F
        POP     BC
        POP     DE
        JR      NZ,J$2D5C
        INC     C
J$2D5C: CP      0F1H
        JR      NZ,J$2D63
        LD      BC,J.0101
J$2D63: PUSH    AF
        LD      A,E
        ADD     A,(IX-4)
        LD      E,A
        JR      NC,J$2D6C
        INC     D
J$2D6C: POP     AF
        DJNZ    J$2D4A
        POP     DE
        DEC     C
        JR      NZ,J$2D7D
        BIT     1,(IX-8)
        JR      NZ,J$2D7A
        SCF
J$2D7A: CALL    C.368A
J$2D7D: POP     HL
        JR      Z,J$2D25
        POP     IX
        POP     BC
        POP     DE
J.2D84: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2D86: CALL    C.2E37
        JR      Z,J$2D9B
J$2D8B: XOR     A
        LD      (D.BBEA),A
        LD      A,0F2H
        LD      DE,0FFFFH
        CALL    C.3686
        JR      Z,J$2D8B
        JR      J$2DB2
J$2D9B: PUSH    HL
        LD      A,(DE)
        LD      L,A
        INC     DE
        LD      A,(DE)
        JR      NC,J$2DA7
        LD      H,A
        CALL    C.2E98
        LD      L,H
J$2DA7: AND     0FH     ; 15 
        LD      H,A
        EX      DE,HL
        LD      HL,I$0FF7
        SBC     HL,DE
        POP     HL
        RET     NC
J$2DB2: LD      DE,0FFFFH
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2DB6: PUSH    HL
        PUSH    BC
        LD      BC,I.000B
        ADD     HL,BC
        LD      B,(HL)
        EX      DE,HL
        DEC     HL
        DEC     HL
        DEFB    00EH
J$2DC1: ADD     HL,HL
        DJNZ    J$2DC1
        ADD     A,L
        LD      L,A
        EX      DE,HL
        LD      C,09H   ; 9 
        ADD     HL,BC
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        ADD     HL,DE
        EX      DE,HL
        POP     BC
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2DD3: CALL    C.2EA2

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2DD6: PUSH    DE
        LD      A,B
        CP      10H     ; 16 
        JR      C,J$2DDF
        LD      BC,I$0FFF
J$2DDF: CALL    C.2E37
        JR      Z,J$2DF5
J$2DE4: LD      A,0FFH
        LD      (D.BBEA),A
        LD      A,0F2H
        LD      DE,0FFFFH
        CALL    C.3686
        JR      Z,J$2DE4
        JR      J$2E35
J$2DF5: PUSH    HL
        JR      C,J$2E02
        LD      A,C
        LD      (DE),A
        INC     DE
        LD      A,(DE)
        AND     0F0H
        OR      B
        LD      (DE),A
        JR      J$2E0F
J$2E02: LD      H,B
        LD      L,C
        CALL    C.2E98
        LD      A,(DE)
        AND     0FH     ; 15 
        OR      L
        LD      (DE),A
        INC     DE
        LD      A,H
        LD      (DE),A
J$2E0F: CALL    C.2C38
        BIT     0,(IY+41)
        JR      Z,J$2E34
        LD      BC,C.0008
        ADD     HL,BC
        LD      (HL),A
        DEC     DE
        LD      A,(DE)
        LD      DE,(D.BBA7)
        EX      (SP),IX
        PUSH    AF
        CALL    C.2B6A
        CALL    C.2C38
        LD      BC,I$0207
        ADD     HL,BC
        POP     AF
        LD      (HL),A
        EX      (SP),IX
J$2E34: POP     HL
J$2E35: POP     DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2E37: PUSH    IX
        PUSH    BC
        PUSH    HL
        PUSH    HL
        POP     IX
        RES     0,(IY+41)
        LD      L,(IX+22)
        LD      H,(IX+23)
        XOR     A
        SBC     HL,DE
        JR      C,J$2E93
        LD      H,D
        LD      L,E
        ADD     HL,HL
        ADD     HL,DE
        SRL     H
        RR      L
        PUSH    AF
        PUSH    HL
        LD      E,H
        SRL     E
        LD      D,A
        LD      L,(IX+12)
        LD      H,(IX+13)
        ADD     HL,DE
        EX      DE,HL
        CALL    C.2B6A
        LD      BC,I.000B
        ADD     HL,BC
        POP     BC
        LD      A,B
        AND     01H     ; 1 
        LD      B,A
        ADD     HL,BC
        ADD     A,C
        JR      NC,J$2E8E
        LD      A,(HL)
        SET     0,(IY+41)
        LD      (D.BBA7),DE
        LD      (D.BBA5),A
        INC     DE
        CALL    C.2B6A
        LD      BC,I.000B
        ADD     HL,BC
        LD      A,(HL)
        LD      (D$BBA6),A
        LD      HL,D.BBA5
J$2E8E: EX      DE,HL
        POP     AF
        SBC     A,A
        CP      A
        RRCA
J$2E93: POP     HL
        POP     BC
        POP     IX
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2E98: XOR     A
        ADD     HL,HL
        RLA
        ADD     HL,HL
        RLA
        ADD     HL,HL
        RLA
        ADD     HL,HL
        RLA
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2EA2: PUSH    HL
        EX      (SP),IX
        BIT     0,(IX+24)
        JR      Z,J.2F16
        XOR     A
        JR      J$2EBF

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$2EAE: PUSH    HL
        EX      (SP),IX
        BIT     7,(IX+25)
        JR      NZ,J.2F16
        BIT     0,(IX+24)
        JR      NZ,J.2F16
        LD      A,01H   ; 1 
J$2EBF: PUSH    BC
        PUSH    DE
        LD      B,(IX+14)
        DEC     B
        JR      Z,J$2EF6
        LD      E,(IX+12)
        LD      D,(IX+13)
        LD      B,(IX+17)
J$2ED0: PUSH    BC
        PUSH    AF
        DEC     A
        LD      B,00H
        JR      NZ,J$2EDC
        CALL    C.2B78
        JR      J$2EE9
J$2EDC: CALL    C.2B6A
        CALL    C.2D0F
        PUSH    HL
        CALL    C.2C38
        SET     6,(HL)
        POP     HL
J$2EE9: CALL    C.2CB4
        INC     HL
        INC     HL
        LD      (HL),00H
        POP     AF
        POP     BC
        INC     DE
        DJNZ    J$2ED0
        LD      B,A
J$2EF6: LD      A,B
        CP      (IX+24)
        JR      Z,J$2F14
        PUSH    BC
        LD      DE,C.0000
        LD      B,01H   ; 1 
        CALL    C.2B78
        CALL    C.2CB7
        CALL    C.2C38
        LD      DE,I$002E
        ADD     HL,DE
        POP     BC
        LD      (HL),B
        LD      (IX+24),B
J$2F14: POP     DE
        POP     BC
J.2F16: EX      (SP),IX
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$2F1A: LD      DE,C.0000
        LD      C,A
        LD      B,0FH   ; 15 
        CALL    C.2DD3
        INC     DE
        LD      BC,0FFFFH
        CALL    C.2DD3
J$2F2A: INC     DE
        LD      BC,C.0000
        CALL    C.2DD3
        PUSH    HL
        LD      BC,I.0016
        ADD     HL,BC
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        SBC     HL,DE
        POP     HL
        JR      NZ,J$2F2A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2F40: LD      (D.BBAA),A
        PUSH    DE
        PUSH    BC
        LD      DE,0FFFFH
        LD      (D.BBA3),DE
        PUSH    DE
        LD      DE,I.0001
        JR      J.2F54
J$2F52: PUSH    BC
        PUSH    DE
J.2F54: INC     DE
        PUSH    HL
        LD      BC,I.0016
        ADD     HL,BC
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        SBC     HL,DE
        POP     HL
        JR      C,J$2F99
        PUSH    DE
        CALL    C.2D86
        LD      A,D
        OR      E
        POP     DE
        JR      NZ,J.2F54
        LD      B,D
        LD      C,E
        POP     DE
        PUSH    BC
        BIT     7,D
        JR      Z,J$2F78
        LD      (D.BBA3),BC
J$2F78: CALL    Z,C.2DD6
        POP     DE
        LD      A,(D.BBAA)
        OR      A
        CALL    NZ,C.2FA9
        POP     BC
        DEC     BC
        LD      A,B
        OR      C
        JR      NZ,J$2F52
        LD      BC,0FFFFH
        CALL    C.2DD6
        CALL    C.2EA2
        LD      BC,(D.BBA3)
        POP     DE
        XOR     A
        RET
J$2F99: POP     DE
        POP     DE
        LD      DE,(D.BBA3)
        BIT     7,D
        CALL    Z,C.2FFC
        POP     DE
        LD      A,0D4H
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2FA9: PUSH    DE
        LD      A,D
        OR      E
        JR      NZ,J$2FC4
        PUSH    HL
        LD      BC,I.0012
        ADD     HL,BC
        LD      C,(HL)
        INC     HL
        LD      B,(HL)
        INC     HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        LD      H,D
        LD      L,E
        SBC     HL,BC
        LD      B,L
        DEC     B
        DEC     DE
        POP     HL
        JR      J$2FCF
J$2FC4: PUSH    HL
        LD      BC,I.000A
        ADD     HL,BC
        LD      B,(HL)
        POP     HL
        LD      A,B
        CALL    C.2DB6
J$2FCF: LD      A,B
        INC     A
        POP     BC
        PUSH    HL
        EX      (SP),IX
        PUSH    BC
        LD      B,A
J$2FD7: PUSH    BC
        JR      NZ,J$2FDD
        CALL    C.2CB7
J$2FDD: LD      B,00H
        CALL    C.2B78
        PUSH    HL
        LD      BC,I.000B
        ADD     HL,BC
        XOR     A
J$2FE8: LD      (HL),A
        INC     HL
        LD      (HL),A
        INC     HL
        DJNZ    J$2FE8
        CALL    C.2C38
        POP     HL
        POP     BC
        DEC     DE
        XOR     A
        DJNZ    J$2FD7
        POP     DE
        EX      (SP),IX
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.2FFC: PUSH    DE
        CALL    C.2D86
        POP     BC
        PUSH    DE
        LD      D,B
        LD      E,C
        LD      BC,C.0000
        CALL    C.2DD6
        POP     DE
        LD      A,D
        OR      E
        RET     Z
        BIT     7,D
        JR      Z,C.2FFC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3013: LD      A,04H   ; 4 
        CALL    C.34D4
        RET     NZ
        LD      A,E
        OR      D
        RET     Z
        PUSH    HL
        EX      (SP),IX
        EX      DE,HL
        LD      A,(IX)
        CALL    C.000C
        EX      DE,HL
        EX      (SP),IX
        POP     HL
        OR      A
        LD      A,0F0H
        RET     Z
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3030: BIT     7,A
        JR      NZ,J$303F
        LD      E,C
        LD      C,D
        LD      D,B
        LD      B,A
        LD      A,05H   ; 5 
        CALL    C.34D4
        RET     NZ
        INC     A
J$303F: PUSH    AF
        LD      IX,I.B6D4
        LD      DE,C.0000
        LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,00H
        CALL    C.34D4
        POP     BC
        RET     NZ
        PUSH    BC
        CALL    C.334E
        LD      DE,I.0001
        JR      NZ,J$3063
        LD      E,(IX+14)
        LD      D,(IX+15)
J$3063: LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,00H
        CALL    C.34D4
        POP     BC
        RET     NZ
        LD      A,(IX+1)
        AND     (IX+2)
        INC     A
        JR      NZ,J.30E6
        LD      A,(IX)
        CP      0F8H
        JR      C,J.30E6
        LD      C,A
        PUSH    BC
        LD      DE,C.0000
        LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,00H
        CALL    C.34D4
        POP     BC
        RET     NZ
        PUSH    BC
        LD      A,C
        CALL    C.3382
        POP     BC
        RET     NZ
        BIT     0,B
        JR      Z,J$30D7
        PUSH    HL
        CALL    C.32CB
        JR      Z,J$30B9
        LD      HL,I$30F4
        LD      DE,I$B6F2
        LD      BC,I$0099
        LDIR
        EX      DE,HL
        LD      DE,0FFB7H
J$30B2: LD      (HL),B
        INC     HL
        INC     DE
        LD      A,D
        OR      E
        JR      NZ,J$30B2
J$30B9: LD      HL,(D$F2BA)
        LD      A,(D$F2BC)
        LD      B,A
        XOR     A
        SRL     L
        RLA
        SRL     H
        RLA
        SRL     B
        RLA
        LD      C,A
        LD      (D$B6FB),HL
        LD      (D$B6FD),BC
        XOR     A
        LD      (D$B6FA),A
        POP     HL
J$30D7: LD      DE,C.0000
        LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,01H   ; 1 
        CALL    C.34D4
        RET
J.30E6: LD      A,0F6H
        RET

?.30E9:
        DEFB	0EBH,0FEH,090H
        DEFB	"MSXDOS22"

I30F2:
        .DEPHASE
        .PHASE	0C01EH

RC01E:	JR	    RC030
        DEFB	"VOL_ID"
        DEFB	0
        DEFW	0FFFFH,0FFFFH
        DEFS	5,0
        RET     NC
        LD      (D$C06A),DE
        LD      (D$C072),A
        LD      (HL),67H        ; "g"
        INC     HL
        LD      (HL),0C0H
RC030:	RET     NC
        LD      (RC069+1),DE
        LD	    (RC071+1),A
        LD  	(HL),LOW RC067
        INC     HL
        LD	    (HL),HIGH RC067
RC03D:	LD	    SP,KBUF+256
        LD	    DE,RC0AB
        LD	    C,00FH
        CALL	B.BDOS
        INC	    A
        JR	    Z,RC071
        LD	    DE,00100H
        LD	    C,01AH
        CALL	B.BDOS
        LD	    HL,1
        LD	    (RC0AB+14),HL
        LD	    HL,04000H-00100H
        LD	    DE,RC0AB
        LD	    C,027H
        CALL	B.BDOS
        JP	    00100H

RC067:	DEFW	RC069

RC069:	CALL	0
        LD	    A,C
        AND 	0FEH
        SUB	    002H
RC071:	OR      000H
        JP	    Z,J$4022
        LD	    DE,RC085
        LD	    C,009H
        CALL	B.BDOS
        LD  	C,007H
        CALL	B.BDOS
        JR	    RC03D

RC085:	DEFB	"Boot error",13,10
        DEFB	"Press any key for retry",13,10
        DEFB	"$"

RC0AB:	DEFB	0,"MSXDOS  SYS"

RC0B7:
        .DEPHASE
        .PHASE	I30F2+RC0B7-RC01E

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.318D: LD      A,C
        CALL    C.3606
        LD      (D.BBEB),A
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        LD      A,D
        OR      E
        LD      A,C
        RET     Z
        PUSH    DE
        DEC     B
        JR      NZ,J$320B
J$319F: PUSH    IX
        POP     HL
        LD      BC,I.001A
        ADD     HL,BC
        EX      DE,HL
        POP     HL
        CALL    C.3627
J$31AA  EQU     $-1
        PUSH    IX
        PUSH    HL
        LD      C,09H   ; 9 
        ADD     HL,BC
        LD      A,(HL)
        OR      A
        JR      Z,J.31C6
        LD      C,10H   ; 16 
        ADD     HL,BC
        LD      C,A
        PUSH    DE
        CALL    C.32F3
        POP     DE
        JR      Z,J.31CF
        LD      A,(D.BBEB)
        CALL    C.2C4A
J.31C6: POP     HL
        CALL    C.32FD
        PUSH    HL
        LD      C,01H   ; 1 
        JR      J$31E1
J.31CF: POP     HL
        PUSH    HL
        DEC     C
        JR      Z,J.31DC
        DEC     C
        JR      NZ,J.31F9
        CALL    C.3294
        JR      Z,J.31F9
J.31DC: CALL    C.32FD
J$31DD  EQU     $-2
        LD      C,00H
J$31E1: CALL    C.3255
        PUSH    DE
        CALL    C.32CB
        POP     DE
        CALL    C.32F3
J$31EC: POP     HL
        PUSH    HL
        JR      NZ,J$31FB
        DEC     C
        JR      NZ,J.31F9
        CALL    C.3401
        CALL    C.2C59
J.31F9: JR      J$324A
J$31FB: LD      A,0F4H
        LD      DE,0FFFFH
        CALL    C.3689
        POP     HL
        JR      NZ,J$3231
        POP     IX
        PUSH    HL
        JR      J$319F
J$320B: POP     HL
        CALL    C.2C49
        CALL    C.3627
        PUSH    IX
        PUSH    HL
        LD      DE,I.0009
        ADD     HL,DE
        LD      A,(HL)
        POP     HL
        OR      A
        JR      Z,J.322E
        DEC     B
        JR      Z,J$3237
        DEC     A
        JR      Z,J.322E
        DEC     A
        JR      NZ,J.323A
        CALL    C.3294
        JR      C,J.322E
        JR      Z,J.323A
J.322E: CALL    C.32FD
J$3231: CALL    C.3401
        CALL    C.2C59
J$3237: CALL    C.3255
J.323A: POP     DE
        PUSH    DE
        PUSH    HL
        LD      BC,I.0019
        ADD     HL,BC
        EX      DE,HL
        LD      C,1AH
        ADD     HL,BC
        EX      DE,HL
        LD      C,04H   ; 4 
        LDIR
J$324A: POP     HL
        POP     IX
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.324F: CALL    C$3264
        CALL    C.34D4

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3255: PUSH    HL
        CALL    C.3627
        EX      (SP),IX
        LD      (IX+9),07H      ; 7 
        EX      (SP),IX
        POP     HL
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3264: CALL    C.3627
        PUSH    AF
        PUSH    DE
        PUSH    HL
        LD      DE,I.0009
        ADD     HL,DE
        LD      A,02H   ; 2 
        CP      (HL)
        POP     HL
        JR      C,J$3291
        PUSH    BC
        CALL    Z,C.3294
        JR      Z,J$3290
        PUSH    IX
J$327C: CALL    C.32FD
        CALL    C$32B5
        JR      Z,J$328E
        LD      A,0F5H
        LD      DE,0FFFFH
        CALL    C.3689
        JR      J$327C
J$328E: POP     IX
J$3290: POP     BC
J$3291: POP     DE
        POP     AF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3294: PUSH    BC
        PUSH    DE
        LD      A,02H   ; 2 
        CALL    C.34D4
        JR      Z,J$32A7
        CP      0FCH
        LD      DE,0FFFFH
        CALL    Z,C.3689
        LD      B,0FFH
J$32A7: DEC     B
        JR      Z,J.32B2
        INC     B
        JR      NZ,J.32B2
        LD      A,(D.F2EC)
        INC     A
        SCF
J.32B2: POP     DE
        POP     BC
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$32B5: PUSH    HL
        CALL    C.32CB
        EX      DE,HL
        POP     HL
        PUSH    HL
        LD      BC,I.0019
        ADD     HL,BC
        CALL    C.32F3
        JR      NZ,J$32C9
        LD      A,(HL)
        CP      (IX+21)
J$32C9: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.32CB: PUSH    IX
        POP     HL
        LD      DE,I.0020
        ADD     HL,DE
        LD      DE,I$32E8
        LD      B,06H   ; 6 
J$32D7: LD      A,(DE)
        CP      (HL)
        JR      NZ,J$32E2
        INC     HL
        INC     DE
        DJNZ    J$32D7
        INC     HL
        XOR     A
        RET
J$32E2: LD      HL,I$32EF
        XOR     A
        DEC     A
        RET

I$32E8: DEFB	"VOL_ID",0

I$32EF: DEFW	0FFFFH,0FFFFH

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.32F3: LD      B,04H   ; 4 
J$32F5: LD      A,(DE)
        SUB     (HL)
        RET     NZ
        INC     DE
        INC     HL
        DJNZ    J$32F5
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.32FD: PUSH    BC
        PUSH    DE
        LD      IX,I.B6D4
J$3303: LD      DE,C.0000
        LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,00H
        CALL    C.34D4
        JR      NZ,J.3346
        CALL    C.334E
        JR      Z,J$3341
        LD      DE,I.0001
        LD      B,01H   ; 1 
        LD      A,(D.F2CF)
        LD      C,A
        LD      A,00H
        CALL    C.34D4
        JR      NZ,J.3346
        LD      A,(IX+1)
        AND     (IX+2)
        INC     A
        JR      NZ,J.3344
        LD      A,(IX)
        CP      0F8H
        JR      C,J.3344
        CALL    C.3382
        JR      NZ,J.3346
        LD      (IX+32),00H
J$3341: POP     DE
        POP     BC
        RET
J.3344: LD      A,0F6H
J.3346: LD      DE,0FFFFH
        CALL    C.3689
        JR      J$3303

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.334E: PUSH    IX
        EX      (SP),HL
        LD      DE,I.000B
        ADD     HL,DE
        LD      D,(HL)
        INC     HL
        LD      A,(HL)
        INC     HL
        SUB     02H     ; 2 
        OR      D
        JR      NZ,J.337F
        OR      (HL)
        JR      Z,J.337F
        NEG
        AND     (HL)
        CP      (HL)
        INC     HL
        JR      NZ,J.337F
        INC     HL
        INC     HL
        LD      A,(HL)
        DEC     A
        CP      07H     ; 7 
        JR      NC,J.337F
        LD      DE,6
        ADD     HL,DE
        LD      A,(HL)
        INC     HL
        DEC     A
        CP      0CH     ; 12 
        JR      NC,J.337F
        LD      A,(HL)
        OR      A
        POP     HL
        RET
J.337F: POP     HL
        OR      H
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3382: LD      B,A
        LD      A,03H   ; 3 
        CALL    C.34D4
        RET     NZ
        PUSH    HL
        LD      DE,I.0002
        ADD     HL,DE
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        PUSH    DE
        EX      (SP),IX
        POP     HL
        PUSH    HL
        LD      DE,I.000B
        ADD     HL,DE
        LD      C,(IX+2)
        LD      B,(IX+3)
        LD      (HL),C
        INC     HL
        LD      (HL),B
        INC     HL
        LD      A,(IX+6)
        INC     A
        LD      (HL),A
        INC     HL
        LD      C,(IX+8)
        LD      B,(IX+9)
        LD      (HL),C
        INC     HL
        LD      (HL),B
        INC     HL
        LD      A,(IX+10)
        LD      (HL),A
        INC     HL
        EX      DE,HL
        LD      L,(IX+12)
        LD      H,(IX+13)
        PUSH    HL
        LD      C,(IX+17)
        LD      B,(IX+18)
        OR      A
        SBC     HL,BC
        LD      B,(IX+5)
J$33CD: ADD     HL,HL
        DJNZ    J$33CD
        DEC     HL
        LD      L,(IX+11)
        DEC     L
        INC     HL
        EX      DE,HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        EX      DE,HL
        LD      L,(IX+14)
        LD      H,(IX+15)
        DEC     HL
        LD      B,(IX+7)
        DEFB    00EH
J$33E7: ADD     HL,HL
        DJNZ    J$33E7
        POP     BC
        ADD     HL,BC
        EX      DE,HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        LD      A,(IX+1)
        LD      (HL),A
        INC     HL
        LD      A,(IX+16)
        LD      (HL),A
        INC     HL
        XOR     A
        LD      (HL),A
        POP     IX
        POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3401: PUSH    HL
        LD      BC,I.000A
        ADD     HL,BC
        LD      A,(IX+13)
        DEC     A
        LD      (HL),A
        INC     HL
        LD      C,00H
J$340E: INC     C
        RRCA
        JR      C,J$340E
        LD      (HL),C
        INC     HL
        LD      E,(IX+14)
        LD      (HL),E
        INC     HL
        LD      D,(IX+15)
        LD      (HL),D
        INC     HL
        PUSH    DE
        LD      B,(IX+16)
        LD      (HL),B
        INC     HL
        LD      E,(IX+17)
        LD      D,(IX+18)
        LD      A,E
        AND     0FH     ; 15 
        LD      (HL),A
        LD      A,04H   ; 4 
J$3430: SRL     D
        RR      E
        DEC     A
        JR      NZ,J$3430
        CP      (HL)
        INC     HL
        LD      (HL),E
        INC     HL
        JR      NC,J$343E
        INC     DE
J$343E: LD      A,(IX+22)
        LD      (HL),A
        INC     HL
        EX      (SP),HL
        PUSH    DE
        LD      E,A
        XOR     A
        LD      D,A
J$3448: ADD     A,E
        JR      NC,J$344C
        INC     D
J$344C: DJNZ    J$3448
        LD      E,A
        ADD     HL,DE
        EX      DE,HL
        POP     HL
        ADD     HL,DE
        EX      (SP),HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        POP     DE
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        PUSH    HL
        LD      L,(IX+19)
        LD      H,(IX+20)
        OR      A
        SBC     HL,DE
J$3467: DEC     C
        JR      Z,J$3470
        SRL     H
        RR      L
        JR      J$3467
J$3470: INC     HL
        EX      DE,HL
        POP     HL
        LD      (HL),E
        INC     HL
        LD      (HL),D
        INC     HL
        PUSH    HL
        CALL    C.32CB
        POP     DE
        DEC     HL
        LD      BC,BDOS
        LDIR
        EX      DE,HL
        LD      A,(IX+21)
        LD      (HL),A
        POP     HL
        PUSH    HL
        INC     HL
        INC     HL
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        EX      DE,HL
        INC     HL
        LD      (HL),A
        INC     HL
        LD      (HL),00H
        INC     HL
        LD      (HL),02H        ; 2 
        INC     HL
        LD      (HL),0FH        ; 15 
        INC     HL
        LD      (HL),04H        ; 4 
        INC     HL
        EX      DE,HL
        LD      BC,I.0007
        ADD     HL,BC
        LD      BC,BDOS
        LDIR
        LD      C,(HL)
        INC     HL
        LD      A,(HL)
        INC     HL
        ADD     A,A
        ADD     A,A
        ADD     A,A
        ADD     A,A
        OR      C
        LD      (DE),A
        INC     DE
        PUSH    HL
        INC     HL
        INC     HL
        INC     HL
        LD      BC,I.0004
        LDIR
        POP     HL
        LD      BC,I.0003
        LDIR
        POP     HL

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.34C3: PUSH    HL
        PUSH    BC
        LD      BC,I$001F
        ADD     HL,BC
        POP     BC
        XOR     A
        BIT     7,(HL)
        JR      NZ,J$34D2
        LD      (HL),A
        DEC     HL
        LD      (HL),A
J$34D2: POP     HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.34D4: CP      06H     ; 6 
        JR      NC,J$351D
        PUSH    IY
        PUSH    HL
        PUSH    HL
        EX      (SP),IX
        POP     HL
        PUSH    HL
        EXX
        PUSH    HL
        PUSH    DE
        PUSH    BC
        EX      AF,AF'
        PUSH    AF
        LD      A,(IX+8)
        DEC     A
        LD      (D.F33F),A
        LD      A,(IX+6)
        EX      AF,AF'
        LD      C,A
        CP      01H     ; 1 
        LD      A,0FFH
        JR      Z,J$34F9
        INC     A
J$34F9: LD      (D.BBEA),A
        LD      HL,I$3522
        LD      B,00H
        ADD     HL,BC
        ADD     HL,BC
        LD      A,(HL)
        INC     HL
        LD      H,(HL)
        LD      L,A
        LD      A,(D$F2CD)
        EX      AF,AF'
        CALL    C$3521
        EX      AF,AF'
        POP     AF
        EX      AF,AF'
        EXX
        POP     BC
        POP     DE
        POP     HL
        EXX
        POP     IX
        POP     HL
        POP     IY
        OR      A
        RET
J$351D: LD      A,0DFH
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3521: JP      (HL)

I$3522: DEFW    I352E
        DEFW    I3531
        DEFW    I354B
        DEFW    I3566
        DEFW    I357C
        DEFW    I3587

I352E:  OR      A
        JR      J$3532
I3531:  SCF
J$3532: EX      AF,AF'
        LD      HL,04000H
        EXX
        LD      A,C
        LD      C,(IX+29)
        PUSH    BC
        CALL    C.35C6
        JR      C,J$3544
        POP     BC
        XOR     A
        RET
J$3544: EX      AF,AF'
        POP     AF
        SUB     B
        LD      B,A
        EX      AF,AF'
        JR      J.359D

I354B:  EX      AF,AF'
        LD      HL,I$4003
        EXX
        LD      B,00H
        LD      C,(IX+29)
        LD      L,(IX+2)
        LD      H,(IX+3)
        CALL    C.35C6
        JR      C,J$3562
        XOR     A
        RET
J$3562: LD      B,00H
        JR      J.359D

I3566:  EX      AF,AF'
        LD      HL,I$4006
        EXX
        LD      C,(IX+29)
        LD      L,(IX+2)
        LD      H,(IX+3)
        CALL    C.35C6
        LD      A,0FFH
        RET     C
        XOR     A
        RET

I357C:  EX      AF,AF'
        LD      HL,I$4009
        EXX
        CALL    C.35C6
        EX      DE,HL
        XOR     A
        RET

I3587:  LD      HL,I$400C
        EXX
        PUSH    DE
        LD      D,A
        LD      A,B
        EX      AF,AF'
        LD      A,C
        POP     BC
        CALL    C.35C6
        JR      C,J$3598
        XOR     A
        RET
J$3598: LD      HL,I$35BC
        JR      J$35A0
J.359D: LD      HL,I$35AE
J$35A0: RRCA
        CP      (HL)
        JR      NC,J$35AB
        INC     HL
        LD      E,A
        LD      D,00H
        ADD     HL,DE
        LD      A,(HL)
        RET
J$35AB: LD      A,0FDH
        RET

I$35AE: DEFB	13+1
        DEFB	.WPROT,.NRDY ,.DATA ,.SEEK
        DEFB	.RNF  ,.WRERR,.DISK ,.DISK
        DEFB	.DISK ,.NDOS ,.NCOMP,.UFORM
        DEFB	.NOUPB

I$35BC: DEFB	9+1
        DEFB	.WPROT,.NRDY ,.DATA ,.SEEK
        DEFB	.RNF  ,.WRERR,08BH  ,.NORAM
        DEFB	.DISK

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.35C6: CALL    C.0AB9
        EXX
        LD      E,(IX+1)
        LD      D,00H
        ADD     HL,DE
        LD      B,(IX)
        CALL    CF224                   ; PUT_P2
        PUSH    BC
        POP     IY
        PUSH    HL
        POP     IX
        EXX
        EX      AF,AF'
        CALL    C$F1DF
        EI
        EX      AF,AF'
        LD      A,(D.F2CF)
        CALL    CF224                   ; PUT_P2
        EX      AF,AF'
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$35EB: LD      B,08H   ; 8 
J$35ED: LD      A,B
        CALL    C.3606
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        LD      A,D
        OR      E
        JR      Z,J.3602
        LD      HL,I.0009
        ADD     HL,DE
        LD      A,(HL)
        OR      A
        JR      Z,J.3602
        LD      (HL),01H        ; 1 
J.3602: DJNZ    J$35ED
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3606: PUSH    DE
        OR      A
        JR      NZ,J$360D
        LD      A,(D.F23C)
J$360D: LD      C,0DBH
        CP      09H     ; 9 
        JR      C,J$3614
        XOR     A
J$3614: LD      HL,I.BA1A
        LD      E,A
        LD      D,00H
        ADD     HL,DE
        LD      A,(HL)
        LD      E,A
        LD      D,00H
        LD      HL,I.BA23
        ADD     HL,DE
        ADD     HL,DE
        POP     DE
        OR      A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3627: PUSH    AF
        PUSH    HL
        LD      HL,(D.F34D)
        DEC     HL
        LD      A,(HL)
        INC     A
        JR      NZ,J.364D
        LD      (HL),00H
        LD      A,(D.F33F)
        PUSH    DE
        LD      E,A
        LD      D,00H
        LD      HL,I.BA25
        ADD     HL,DE
        ADD     HL,DE
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        LD      HL,I.0009
        ADD     HL,DE
        POP     DE
        LD      A,(HL)
        OR      A
        JR      Z,J.364D
        LD      (HL),01H        ; 1 
J.364D: LD      HL,I$F2BF
        DI
        LD      A,(HL)
        EI
        LD      (HL),00H
        OR      A
        JR      Z,J$3683
        PUSH    BC
        PUSH    DE
        PUSH    IX
        LD      C,A
        LD      HL,I.BA25
        LD      B,08H   ; 8 
J$3662: LD      E,(HL)
        INC     HL
        LD      D,(HL)
        INC     HL
        LD      A,D
        OR      E
        JR      Z,J.367D
        PUSH    DE
        POP     IX
        LD      A,(IX+9)
        SUB     02H     ; 2 
        JR      C,J.367D
        SUB     C
        JR      NC,J$3678
        XOR     A
J$3678: ADD     A,02H   ; 2 
        LD      (IX+9),A
J.367D: DJNZ    J$3662
        POP     IX
        POP     DE
        POP     BC
J$3683: POP     HL
        POP     AF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3686: OR      A
        JR      C.368A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3689: SCF

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.368A: PUSH    BC
        PUSH    DE
        PUSH    HL
        EXX
        PUSH    HL
        PUSH    DE
        PUSH    BC
        EXX
        EX      AF,AF'
        PUSH    AF
        EX      AF,AF'
        PUSH    IX
        PUSH    AF
        LD      C,00H
        JR      NC,J$369E
        SET     1,C
J$369E: LD      A,(D.BBEA)
        OR      A
        JR      Z,J$36A6
        SET     0,C
J$36A6: LD      A,D
        AND     E
        INC     A
        JR      Z,J$36AD
        SET     3,C
J$36AD: PUSH    HL
        PUSH    BC
        LD      BC,C.0008
        ADD     HL,BC
        POP     BC
        LD      B,(HL)
        INC     HL
        LD      A,(HL)
        OR      A
        JR      Z,J$36BC
        LD      (HL),01H        ; 1 
J$36BC: POP     HL
        POP     AF
        CP      9FH
        JR      Z,J$371E
        CP      0F1H
        JR      Z,J$3708
        CP      0F2H
        JR      NZ,J$36CC
        SET     2,C
J$36CC: PUSH    AF
        LD      HL,I372F-1
J$36D0: INC     HL
        CP      (HL)
        INC     HL
        JR      Z,J$36D9
        BIT     7,(HL)
        JR      Z,J$36D0
J$36D9: LD      A,(HL)
        ADD     A,A
        BIT     0,C
        JR      Z,J$36E0
        INC     A
J$36E0: BIT     2,C
        JR      Z,J$36E6
        SET     7,A
J$36E6: EX      AF,AF'
        POP     AF
        LD      H,(IY+9)
        PUSH    HL
        LD      (IY+9),00H
        PUSH    AF
        PUSH    IY
        LD      HL,(D$F300)
        CALL    C.3726
        POP     IY
        POP     BC
        POP     HL
        LD      (IY+9),H
        DEC     A
        CP      03H     ; 3 
        JR      C,J.370A
        XOR     A
        JR      J.370A
J$3708: LD      A,01H   ; 1 
J.370A: POP     IX
        EX      AF,AF'
        POP     AF
        EX      AF,AF'
        EXX
        POP     BC
        POP     DE
        POP     HL
        EXX
        POP     HL
        OR      A
        JR      Z,J$371C
        POP     DE
        POP     BC
        DEC     A
        RET
J$371C: LD      A,9DH
J$371E: PUSH    AF
        CALL    C.2C59
        POP     AF

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3723: LD      HL,(D$F302)

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3726: PUSH    HL
        LD      HL,I$F1F7
        EX      (SP),HL
        PUSH    HL
        JP      J$F1FA

I372F:  DEFB	.WPROT,0
        DEFB	.NRDY,1
        DEFB	.DATA,2
        DEFB	.SEEK,3
        DEFB	.RNF,4
        DEFB	.WRERR,5
        DEFB	.DISK,6
        DEFB	.DISK,7
        DEFB	.DISK,8
        DEFB	.NDOS,9
        DEFB	.NCOMP,10
        DEFB	.UFORM,11
        DEFB	.NOUPB,12
        DEFB	0,6+128

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C374B:  LD      (IY+47),04H     ; 4 
        LD      A,02H   ; 2 
        LD      C,01H   ; 1 
J$3753: CALL    C.3A33
        JR      NZ,J.378B
        XOR     A
        PUSH    DE
        CALL    C.2284
        POP     DE
        LD      HL,(D.BB96)
        PUSH    HL
        LD      A,(D.BB98)
        OR      A
        JR      Z,J$376C
        LD      A,(D.B9F3)
        LD      (HL),A
J$376C: CALL    C.3D02
        INC     HL
        LD      A,(DE)
        LD      (HL),A
        INC     HL
        LD      (HL),00H
        POP     IX
        CALL    C.3CB4
        XOR     A
        CALL    C.3C88
        CALL    C.3C4E
        LD      A,(D.B9F3)
        CALL    C.2C41
J.3787: XOR     A
        LD      L,A
        LD      H,A
        RET
J.378B: LD      HL,I.00FF
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C378F:  CALL    C.399D
        JR      NZ,J.378B
        LD      DE,(D.BB96)
        CALL    C$3A15
        CALL    C.223A
        OR      A
        JR      NZ,J.378B
        LD      A,(IX+25)
        CALL    C.2C41
        JR      J.3787

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C37A9:  LD      HL,12
        ADD     HL,DE
        LD      A,(HL)
        LD      (D.BB95),A
        LD      (IY+47),04H     ; 4 
        LD      A,(DE)
        ADD     A,A
        SBC     A,A
        AND     10H     ; 16 
        LD      C,00H
        CALL    C.3A33
        JR      NZ,J.378B
        JR      J$37DC

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C37C3:  LD      DE,I.B9DA
        LD      HL,I.B99A
        LD      BC,I.0040
        LD      A,(HL)
        CP      0FFH
        LD      A,0D7H
        JP      NZ,J.378B
        LDIR
        CALL    C.3AF7
        JP      NZ,J.378B
J$37DC: PUSH    DE
        LD      HL,I.B9DA
        LD      DE,I.B99A
        LD      BC,I.0040
        LDIR
        POP     DE
        LD      HL,I.B975
        LD      A,(D.B9F3)
        LD      (HL),A
        CALL    C.3D02
        LD      A,(D.BB95)
        LD      (HL),A
        INC     HL
        LD      A,(DE)
        LD      (HL),A
        INC     HL
        INC     DE
        INC     DE
        LD      (HL),00H
        INC     HL
        INC     DE
        EX      DE,HL
        LD      BC,I.0012
        LDIR
        LD      IX,I.B975
        XOR     A
        CALL    C.3C88
        CALL    C.3C4E
        JR      C,C37C3
        LD      HL,I.B975
        LD      DE,(D.F23D)
        LD      BC,I.0021
        LD      A,01H   ; 1 
        CALL    C.26F3
        JP      J.3787

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C3826:  CALL    C.399D
        JR      NZ,J.3869
        LD      IX,(D.BB96)
        CALL    C.3C85
        LD      A,(D.B9F8)
        BIT     7,A
        JR      Z,J$3850
        LD      BC,DBUF
        LD      DE,(D.F23D)
        LD      IX,I.B9DA
        XOR     A
        CALL    C.2757
        JR      NZ,J.3869
        LD      IX,(D.BB96)
        JR      J$3860
J$3850: CALL    C$3B4E
        JR      Z,J$385D
        CALL    C$3B9B
        JR      NZ,J.3869
        LD      HL,I.B2D4
J$385D: CALL    C$3A26
J$3860: CALL    C.3C30
        CALL    C.3CB4
        JP      J.3787
J.3869: LD      HL,I.0001
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C386D:  CALL    C.399D
        JR      NZ,J.3869
        LD      IX,(D.BB96)
        CALL    C.3C85
        CALL    C.3B7B
        LD      IX,I.B9DA
        LD      BC,DBUF
        LD      DE,(D.F23D)
        XOR     A
        CALL    C.2753
        JR      NZ,J.3869
        LD      IX,(D.BB96)
        CALL    C.3C30
        CALL    C.3CB4
        LD      A,(IX+32)
        LD      HL,(D.BB96)
        LD      BC,I.000F
        ADD     HL,BC
        CP      (HL)
        JR      C,J$38A5
        LD      (HL),A
J$38A5: JP      J.3787

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C38A8:  LD      HL,12
        ADD     HL,DE
        LD      A,(HL)
        OR      A
        JR      Z,J$38B7
        CALL    C374B
        OR      A
        JP      Z,J.3787
J$38B7: LD      (IY+47),00H
        XOR     A
        LD      C,A
        JP      J$3753

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C38C0:  LD      A,0FFH
        LD      (D.BB90),A
        LD      BC,I.00FF
        PUSH    BC
        LD      (IY+47),04H     ; 4 
        XOR     A
        LD      C,A
        CALL    C.3A33
        JR      J$38DB
J$38D4: POP     BC
        LD      C,00H
        PUSH    BC
J$38D8: CALL    C.3AF7
J$38DB: JR      NZ,J.3920
        BIT     0,(IX+14)
        JR      NZ,J$38D8
        LD      A,01H   ; 1 
        CALL    C.2332
        OR      A
        JR      Z,J$38D4
        JR      J.3920

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C38ED:  LD      BC,I.00FF
        PUSH    BC
        PUSH    DE
        LD      IX,I.B9DA
        LD      (IX+31),00H
        LD      HL,I.0011
        ADD     HL,DE
        LD      DE,I.B975
        EX      DE,HL
        LD      A,(DE)
        CALL    C.173A
        POP     DE
        XOR     A
        LD      C,A
        CALL    C.3A33
        JR      J$3915
J$390E: POP     BC
        LD      C,00H
        PUSH    BC
        CALL    C.3AF7
J$3915: JR      NZ,J.3920
        LD      BC,I.B975
        CALL    C.2398
        OR      A
        JR      Z,J$390E
J.3920: LD      B,A
        LD      A,(D.B9F3)
        CALL    C.2C41
        POP     HL
        LD      A,L
        OR      A
        RET     Z
        LD      A,B
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C392D:  LD      A,01H   ; 1 
        CALL    C.3B0F
        JR      NZ,J.3957
        LD      A,C
        NEG
        AND     7FH
        LD      C,A
        LD      A,00H
        CALL    NZ,C.3C05
        JR      J$394A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C3941:  XOR     A
        DEFB    021H

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C3943:  LD      A,2
        CALL    C.3B0F
        JR      NZ,J.3957
J$394A: LD      IX,(D.BB96)
        CALL    C.3C4E
        CALL    C.3CB4
        JP      J.3787
J.3957: LD      HL,I.0001
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C395B:  LD      (IY+47),04H     ; 4 
        LD      A,02H   ; 2 
        LD      C,00H
        CALL    C.3A33
        JP      NZ,J.378B
        LD      C,(IX+21)
        LD      B,(IX+22)
        LD      E,(IX+23)
        LD      D,(IX+24)
        XOR     A
        LD      H,A
        SUB     C
        AND     7FH
        LD      L,A
        ADD     HL,BC
        JR      NC,J$397F
        INC     DE
J$397F: ADD     HL,HL
        LD      A,H
        EX      DE,HL
        ADC     HL,HL
        LD      IX,(D.BB96)
        LD      (IX+33),A
        LD      (IX+34),L
        LD      (IX+35),H
        JP      J.3787

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C3994:  PUSH    DE
        POP     IX
        CALL    C.3C85
        JP      J.3787

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.399D: EX      DE,HL
        LD      (D.BB96),HL
        LD      IX,I.B9DA
        LD      (IX),0FFH
        LD      A,(HL)
        AND     0FH     ; 15 
        LD      (IX+25),A
        LD      DE,D.B9EF
        LD      BC,I.0010
        ADD     HL,BC
        LD      BC,I.0004
        LDIR
        LD      DE,I.B9F4
        LD      BC,I.0004
        LDIR
        LD      DE,I.B9FF
        LD      BC,C.0008
        LDIR
        LD      A,(IX+42)
        LD      B,00H
        BIT     6,A
        JR      Z,J$39D6
        LD      B,01H   ; 1 
J$39D6: LD      (IX+14),B
        LD      B,00H
        BIT     5,A
        JR      Z,J$39E1
        LD      B,0A4H
J$39E1: BIT     4,A
        JR      Z,J$39E7
        SET     6,B
J$39E7: LD      (IX+30),B
        LD      B,00H
        BIT     7,A
        JR      Z,J$39F2
        LD      B,80H
J$39F2: LD      (IX+49),B
        AND     0FH     ; 15 
        LD      (IX+42),A
        XOR     A
        BIT     7,(IX+30)
        RET     Z
        LD      L,(IX+26)
        LD      H,(IX+27)
        LD      E,(HL)
        INC     HL
        LD      D,(HL)
        LD      L,(IX+28)
        LD      H,(IX+29)
        SBC     HL,DE
        RET     Z
        LD      A,0B7H
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3A15: LD      IX,I.B9DA
        LD      HL,I$B9DB
        INC     DE
        LD      A,(DE)
        LD      (IX+31),02H     ; 2 
        CALL    C.173A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3A26: LD      DE,(D.F23D)
        LD      BC,DBUF
        LD      A,01H   ; 1 
        CALL    C.26F3
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3A33: PUSH    AF
        XOR     A
        LD      (D.BB98),A
        POP     AF
        LD      B,A
        PUSH    BC
        LD      (D.BB96),DE
        LD      IX,I.B9DA
        LD      (IX+31),A
        PUSH    AF
        PUSH    DE
        INC     DE
        LD      HL,I.B8F4
        LD      A,(DE)
        CALL    C.173A
        POP     DE
        POP     AF
        LD      B,A
        LD      A,(DE)
        AND     0FH     ; 15 
        LD      DE,I.B8F4
J$3A59: LD      C,08H   ; 8 
        CALL    C.12C3
        JR      NZ,J.3A8A
        OR      C
        LD      A,0D9H
        JR      NZ,J.3A8A
        PUSH    HL
        LD      HL,I.B926
        LD      DE,I.B9FA
        LD      BC,I.000B
        PUSH    DE
        LDIR
        POP     DE
        POP     HL
        CALL    C.1A49
J$3A77: OR      A
        JR      NZ,J.3A8A
        PUSH    DE
        PUSH    HL
        CALL    C.198F
        CALL    C.1A3B
        EX      DE,HL
        LDIR
        POP     HL
        POP     DE
        POP     BC
        XOR     A
        RET
J.3A8A: POP     BC
        BIT     0,C
        JR      NZ,J$3A97
        PUSH    AF
        XOR     A
        LD      (D.BB98),A
        POP     AF
        OR      A
        RET
J$3A97: LD      (D.B400),A
        PUSH    BC
        LD      HL,I$3AF0
        LD      DE,I.B2D4
        LD      A,0FFH
        LD      (D.BB90),A
        LD      B,0FFH
        LD      A,01H   ; 1 
        CALL    C$0EDF
        OR      A
        POP     BC
        RET     NZ
        PUSH    BC
        LD      C,04H   ; 4 
        LD      DE,I.B2D4
        LD      IX,I.B9DA
        XOR     A
        CALL    C.12C3
        POP     DE
        RET     NZ
        LD      A,B
        AND     05H     ; 5 
        JR      Z,J$3AEB
        LD      A,0FFH
        LD      (D.BB98),A
        PUSH    DE
        LD      HL,(D.BB9E)
        LD      A,B
        AND     18H
        JR      Z,J$3AD6
        LD      (HL),5CH        ; "\"
        INC     HL
J$3AD6: LD      DE,I.B8F4
J$3AD9: LD      A,(DE)
        LD      (HL),A
        INC     HL
        INC     DE
        OR      A
        JR      NZ,J$3AD9
        POP     BC
        XOR     A
        LD      C,00H
        PUSH    BC
        LD      DE,I.B2D4
        JP      J$3A59
J$3AEB: LD      A,(D.B400)
        OR      A
        RET

I$3AF0: DEFB	"APPEND",0

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3AF7: LD      IX,I.B9DA
        LD      (IY+47),04H     ; 4 
        CALL    C.19F8
        RET     NZ
        LD      DE,I.B9FA
        CALL    C.1A87
        LD      C,00H
        PUSH    BC
        JP      J$3A77

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3B0F: EX      AF,AF'
        CALL    C.399D
        RET     NZ
        LD      IX,(D.BB96)
        LD      A,(IX+33)
        LD      C,(IX+34)
        LD      B,(IX+35)
        PUSH    AF
        PUSH    BC
        CALL    C$3CA1
        CALL    C.3B7B
        POP     HL
        POP     AF
        LD      B,A
        ADD     A,A
        ADC     HL,HL
        LD      A,L
        LD      (IX+12),A
        LD      A,H
        LD      (IX+14),A
        LD      A,B
        AND     7FH
        LD      (IX+32),A
        XOR     A
        EX      AF,AF'
        LD      BC,DBUF
        LD      IX,I.B9DA
        LD      DE,(D.F23D)
        CALL    C.275B
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3B4E: CALL    C.3B85
        RET     NZ
        LD      A,(D.BB92)
        LD      B,A
        LD      DE,(D$BB93)
        LD      A,(IX+33)
        LD      L,(IX+34)
        LD      H,(IX+35)
        SUB     B
        SBC     HL,DE
        RET     NZ
        LD      B,A
        LD      A,(D.BB91)
        SUB     01H     ; 1 
        RET     C
        CP      B
        RET     C
        XOR     A
        SRL     B
        RRA
        LD      C,A
        LD      HL,I.B2D4
        ADD     HL,BC
        XOR     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3B7B: CALL    C.3B85
        RET     NZ
        LD      A,0FFH
        LD      (D.BB90),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3B85: LD      A,(IX)
        LD      B,A
        LD      A,(D.BB90)
        CP      B
        RET     NZ
        LD      L,(IX+26)
        LD      H,(IX+27)
        LD      DE,(D.BB8E)
        SBC     HL,DE
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3B9B: LD      A,0FFH
        LD      (D.BB90),A
        LD      A,(IX+33)
        AND     03H     ; 3 
        LD      B,A
        LD      A,08H   ; 8 
        SUB     B
        LD      B,A
        XOR     A
        SRL     B
        RR      A
        LD      C,A
        PUSH    IX
        LD      IX,I.B9DA
        LD      DE,I.B2D4
        LD      A,0FFH
        CALL    C.2757
        POP     IX
        JR      Z,J$3BC6
        CP      0C7H
        JR      NZ,J.3C01
J$3BC6: LD      A,B
        OR      C
        JR      Z,J.3C01
        LD      HL,I$007F
        ADD     HL,BC
        ADD     HL,HL
        LD      A,H
        LD      (D.BB91),A
        XOR     A
        LD      B,A
        SUB     C
        AND     7FH
        LD      C,A
        LD      A,0FFH
        CALL    NZ,C.3C05
        PUSH    IX
        POP     HL
        LD      BC,I.0021
        ADD     HL,BC
        LD      DE,D.BB92
        LD      BC,I.0003
        LDIR
        LD      A,(IX+26)
        LD      (D.BB8E),A
        LD      A,(IX+27)
        LD      (D$BB8F),A
        LD      A,(IX)
        LD      (D.BB90),A
        XOR     A
        RET
J.3C01: XOR     A
        LD      B,A
        INC     A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3C05: PUSH    AF
        PUSH    DE
        AND     04H     ; 4 
        CALL    C.2731
        SET     7,D
        CALL    CF224                   ; PUT_P2
J$3C11: XOR     A
        LD      (DE),A
        INC     DE
        DEC     BC
        LD      A,B
        OR      C
        JR      Z,J$3C28
        BIT     6,D
        JR      Z,J$3C11
        POP     AF
        AND     0C0H
        ADD     A,40H   ; "@"
        LD      D,A
        LD      E,00H
        POP     AF
        JR      C.3C05
J$3C28: POP     AF
        POP     AF
        LD      A,(D.F2CF)
        JP      CF224                   ; PUT_P2

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3C30: LD      A,(IX+12)
        LD      L,A
        LD      A,(IX+14)
        LD      H,A
        LD      A,(IX+32)
        INC     A
        JP      P,J$3C42
        INC     HL
        LD      A,00H
J$3C42: LD      (IX+32),A
        LD      A,L
        LD      (IX+12),A
        LD      A,H
        LD      (IX+14),A
        RET     P

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3C4E: LD      HL,(D.B9EF)
        XOR     A
        LD      B,A
        SUB     L
        AND     7FH
        LD      C,A
        ADD     HL,BC
        LD      BC,(D$B9F1)
        JR      NC,J$3C5F
        INC     BC
J$3C5F: LD      A,(D$BA08)
        AND     0C0H
        LD      D,A
        XOR     A
        LD      E,A
        SBC     HL,DE
        PUSH    BC
        EX      (SP),HL
        LD      BC,(D.BA09)
        SBC     HL,BC
        POP     HL
        LD      B,A
        JR      C,J.3C80
        LD      B,80H
        JR      NZ,J.3C80
        LD      A,H
        AND     0C0H
        JR      NZ,J.3C80
        ADD     HL,HL
        LD      B,H
J.3C80: LD      A,B
        LD      (IX+15),A
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3C85: LD      A,(IX+32)

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3C88: PUSH    AF
        LD      A,(IX+14)
        LD      B,A
        LD      A,(IX+12)
        LD      C,A
        POP     AF
        ADD     A,A
        SRL     B
        RR      C
        RRA
        LD      (IX+33),A
        LD      (IX+34),C
        LD      (IX+35),B

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3CA1: LD      HL,D.BA07
        LD      (HL),00H
        SRL     B
        RR      C
        RRA
        RR      (HL)
        INC     HL
        LD      (HL),A
        INC     HL
        LD      (HL),C
        INC     HL
        LD      (HL),B
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3CB4: PUSH    IX
        POP     HL
        LD      BC,I.0010
        ADD     HL,BC
        EX      DE,HL
        LD      HL,D.B9EF
        LD      BC,I.0004
        LDIR
        LD      HL,I.B9F4
        LD      BC,I.0004
        LDIR
        LD      HL,I.B9FF
        LD      BC,C.0008
        LDIR
        LD      A,(IX+29)
        AND     0FH     ; 15 
        LD      B,A
        LD      A,(D$B9E8)
        BIT     0,A
        JR      Z,J$3CE3
        SET     6,B
J$3CE3: LD      A,(D.B9F8)
        BIT     7,A
        JR      Z,J$3CEC
        SET     5,B
J$3CEC: LD      A,(D.B9F8)
        BIT     6,A
        JR      Z,J$3CF5
        SET     4,B
J$3CF5: LD      A,(D$BA0B)
        BIT     7,A
        JR      Z,J$3CFE
        SET     7,B
J$3CFE: LD      (IX+29),B
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3D02: INC     HL
        LD      A,(DE)
        CP      05H     ; 5 
        JR      NZ,J$3D0A
        LD      A,0E5H
J$3D0A: LD      (HL),A
        INC     HL
        INC     DE
        LD      BC,I.000A
        EX      DE,HL
        LDIR
        EX      DE,HL
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C3D15:  LD      A,01H   ; 1 
        JR      J$3D1A

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C3D19:  XOR     A
J$3D1A: EX      AF,AF'
        LD      A,0C9H
        LD      (D.B976),A
        PUSH    HL
        CALL    C.399D
        JP      NZ,J$3DED
        LD      IX,(D.BB96)
        CALL    C.3B7B
        LD      C,(IX+14)
        LD      B,(IX+15)
        LD      HL,I$003F
        XOR     A
        SBC     HL,BC
        LD      E,(IX+35)
        LD      D,(IX+36)
        JR      NC,J$3D43
        LD      D,A
J$3D43: CALL    C.3E14
        LD      A,H
        OR      L
        JP      NZ,J.3DF0
        PUSH    DE
        LD      E,(IX+33)
        LD      D,(IX+34)
        CALL    C.3E14
        POP     BC
        ADD     HL,BC
        JP      C,J.3DF0
        LD      (D.BA07),DE
        LD      (D.BA09),HL
        POP     DE
        PUSH    DE
        LD      C,(IX+14)
        LD      B,(IX+15)
        CALL    C.3E14
        LD      A,H
        OR      L
        JP      NZ,J.3DF0
        LD      C,E
        LD      B,D
        PUSH    BC
        EX      AF,AF'
        PUSH    AF
        LD      IX,I.B9DA
        LD      DE,(D.F23D)
        BIT     0,A
        JR      NZ,J.3D8A
        LD      A,B
        OR      C
        LD      A,00H
        JR      NZ,J.3D8A
        SET     4,A
J.3D8A: CALL    C.275B
        LD      (D.B976),A
        LD      IX,(D.BB96)
        POP     AF
        EX      AF,AF'
        XOR     A
        POP     HL
        SBC     HL,BC
        JR      Z,J.3DC9
        LD      (D.B977),DE
        LD      E,(IX+14)
        LD      D,(IX+15)
        CALL    C$3DFE
        LD      A,H
        OR      L
        PUSH    BC
        JR      Z,J$3DC0
        POP     BC
        INC     BC
        PUSH    BC
        EX      DE,HL
        SBC     HL,DE
        LD      B,H
        LD      C,L
        LD      DE,(D.B977)
        EX      AF,AF'
        BIT     0,A
        CALL    NZ,C.3C05
J$3DC0: POP     BC
        POP     HL
        PUSH    BC
        XOR     A
        SBC     HL,BC
        JR      Z,J.3DC9
        INC     A
J.3DC9: EX      AF,AF'
        CALL    C.3CB4
        POP     DE
        LD      L,(IX+33)
        LD      H,(IX+34)
        ADD     HL,DE
        LD      (IX+33),L
        LD      (IX+34),H
        JR      NC,J$3DEA
        LD      L,(IX+35)
        LD      H,(IX+36)
        INC     HL
        LD      (IX+35),L
        LD      (IX+36),H
J$3DEA: EX      AF,AF'
        JR      J$3DF5
J$3DED: LD      (D.B976),A
J.3DF0: POP     HL
        XOR     A
        LD      D,A
        LD      E,A
        INC     A
J$3DF5: LD      L,A
        LD      H,00H
        OR      A
        RET     Z
        LD      A,(D.B976)
        RET

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C$3DFE: XOR     A
        LD      H,A
        LD      L,A
        LD      A,10H   ; 16 
J$3E03: CCF
J$3E04: RL      C
        RL      B
        DEC     A
        RET     M
        ADC     HL,HL
        SBC     HL,DE
        JR      NC,J$3E03
        ADD     HL,DE
        OR      A
        JR      J$3E04

;         Subroutine __________________________
;            Inputs  ________________________
;            Outputs ________________________

C.3E14: PUSH    BC
        LD      A,B
        LD      HL,C.0000
        LD      B,10H   ; 16 
J$3E1B: ADD     HL,HL
        RL      C
        RLA
        JR      NC,J.3E28
        ADD     HL,DE
        JR      NC,J.3E28
        INC     C
        JR      NZ,J.3E28
        INC     A
J.3E28: DJNZ    J$3E1B
        EX      DE,HL
        LD      L,C
        LD      H,A
        POP     BC
        RET

        .DEPHASE

        DEFS    08000H-$,0FFH

        END
